Benchmark started at Tue Mar 25 08:51:23 PM UTC 2025
Running benchmark with direct I/O: on, threads: 4...
    Finished `release` profile [optimized] target(s) in 0.06s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 1600 --num-threads 4 --header-file data/bench-header-1TB-10k.dat --uniform-file data/bench-uniform-1TB-10k.dat --direct-io`
Running multithreaded benchmark with 4 threads
Run 1/3
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 159.67s
  Total lookups: 4000000
  End-to-end throughput: 25051.85 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6262.98 lookups/sec
    Latency per lookup:
      Mean: 159668.51 ns
      Std Dev: 504.70 ns
      Min: 155546.05 ns
      Max: 161013.06 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6290.20 lookups/sec
    Latency per lookup:
      Mean: 158977.44 ns
      Std Dev: 469.23 ns
      Min: 157513.47 ns
      Max: 160558.43 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6281.90 lookups/sec
    Latency per lookup:
      Mean: 159187.49 ns
      Std Dev: 443.86 ns
      Min: 157749.15 ns
      Max: 160844.55 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6309.59 lookups/sec
    Latency per lookup:
      Mean: 158488.81 ns
      Std Dev: 450.58 ns
      Min: 157059.82 ns
      Max: 159739.42 ns
  Overall Latency Statistics:
    Mean: 159080.56 ns
    Std Dev: 631.04 ns
    Min: 155546.05 ns
    Max: 161013.06 ns
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 109.27s
  Total lookups: 4000000
  End-to-end throughput: 36606.59 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 9163.22 lookups/sec
    Latency per lookup:
      Mean: 109131.98 ns
      Std Dev: 694.11 ns
      Min: 106271.76 ns
      Max: 113494.39 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 9151.67 lookups/sec
    Latency per lookup:
      Mean: 109269.69 ns
      Std Dev: 746.73 ns
      Min: 100970.35 ns
      Max: 111720.27 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 9165.98 lookups/sec
    Latency per lookup:
      Mean: 109099.12 ns
      Std Dev: 671.59 ns
      Min: 107154.30 ns
      Max: 111598.01 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 9154.94 lookups/sec
    Latency per lookup:
      Mean: 109230.68 ns
      Std Dev: 738.80 ns
      Min: 102653.89 ns
      Max: 111915.02 ns
  Overall Latency Statistics:
    Mean: 109182.87 ns
    Std Dev: 716.88 ns
    Min: 100970.35 ns
    Max: 113494.39 ns
Run 2/3
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 159.91s
  Total lookups: 4000000
  End-to-end throughput: 25014.20 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6270.28 lookups/sec
    Latency per lookup:
      Mean: 159482.58 ns
      Std Dev: 471.86 ns
      Min: 157965.11 ns
      Max: 161804.91 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6278.41 lookups/sec
    Latency per lookup:
      Mean: 159276.07 ns
      Std Dev: 452.08 ns
      Min: 157886.70 ns
      Max: 160773.02 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6253.56 lookups/sec
    Latency per lookup:
      Mean: 159908.91 ns
      Std Dev: 493.84 ns
      Min: 155644.87 ns
      Max: 161978.88 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6278.31 lookups/sec
    Latency per lookup:
      Mean: 159278.44 ns
      Std Dev: 463.69 ns
      Min: 157796.38 ns
      Max: 161081.54 ns
  Overall Latency Statistics:
    Mean: 159486.50 ns
    Std Dev: 536.64 ns
    Min: 155644.87 ns
    Max: 161978.88 ns
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 109.26s
  Total lookups: 4000000
  End-to-end throughput: 36609.72 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 9170.32 lookups/sec
    Latency per lookup:
      Mean: 109047.42 ns
      Std Dev: 684.33 ns
      Min: 107039.94 ns
      Max: 111113.79 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 9164.59 lookups/sec
    Latency per lookup:
      Mean: 109115.59 ns
      Std Dev: 646.84 ns
      Min: 107143.77 ns
      Max: 111207.55 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 9157.27 lookups/sec
    Latency per lookup:
      Mean: 109202.85 ns
      Std Dev: 700.79 ns
      Min: 103981.05 ns
      Max: 111481.24 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 9152.45 lookups/sec
    Latency per lookup:
      Mean: 109260.34 ns
      Std Dev: 729.36 ns
      Min: 100559.41 ns
      Max: 111217.31 ns
  Overall Latency Statistics:
    Mean: 109156.55 ns
    Std Dev: 695.75 ns
    Min: 100559.41 ns
    Max: 111481.24 ns
Run 3/3
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 159.75s
  Total lookups: 4000000
  End-to-end throughput: 25038.44 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6277.19 lookups/sec
    Latency per lookup:
      Mean: 159306.98 ns
      Std Dev: 461.74 ns
      Min: 157554.98 ns
      Max: 160697.38 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6259.62 lookups/sec
    Latency per lookup:
      Mean: 159754.19 ns
      Std Dev: 503.82 ns
      Min: 155752.05 ns
      Max: 161155.94 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6275.82 lookups/sec
    Latency per lookup:
      Mean: 159341.79 ns
      Std Dev: 452.36 ns
      Min: 157897.45 ns
      Max: 160815.27 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6277.79 lookups/sec
    Latency per lookup:
      Mean: 159291.80 ns
      Std Dev: 459.17 ns
      Min: 157757.38 ns
      Max: 160742.52 ns
  Overall Latency Statistics:
    Mean: 159423.69 ns
    Std Dev: 507.31 ns
    Min: 155752.05 ns
    Max: 161155.94 ns
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 109.26s
  Total lookups: 4000000
  End-to-end throughput: 36609.06 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 9175.44 lookups/sec
    Latency per lookup:
      Mean: 108986.57 ns
      Std Dev: 736.85 ns
      Min: 102155.17 ns
      Max: 111412.08 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 9185.56 lookups/sec
    Latency per lookup:
      Mean: 108866.58 ns
      Std Dev: 680.14 ns
      Min: 106777.93 ns
      Max: 110923.32 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 9152.29 lookups/sec
    Latency per lookup:
      Mean: 109262.33 ns
      Std Dev: 929.17 ns
      Min: 98118.87 ns
      Max: 111394.88 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 9184.19 lookups/sec
    Latency per lookup:
      Mean: 108882.75 ns
      Std Dev: 707.01 ns
      Min: 106917.15 ns
      Max: 111067.22 ns
  Overall Latency Statistics:
    Mean: 108999.56 ns
    Std Dev: 785.70 ns
    Min: 98118.87 ns
    Max: 111412.08 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 1527 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 1888173364 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 4784602800 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 12000000 }, shards: [Shard { sum: AtomicF64 { inner: 4712704061546168320 }, count: AtomicU64 { inner: 12000000 }, buckets: [AtomicU64 { inner: 12000000 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 74504 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 1285615497 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 737262892280 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Tue Mar 25 09:04:51 PM UTC 2025

Benchmark started at Tue Mar 25 11:30:45 PM UTC 2025
Running benchmark with direct I/O: off, threads: 8...
    Finished `release` profile [optimized] target(s) in 0.06s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 100 --num-threads 8 --header-file data/bench-header-1TB-10k.dat --uniform-file data/bench-uniform-1TB-10k.dat`
Running multithreaded benchmark with 8 threads
Run 1/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 84.24s
  Total lookups: 8000000
  End-to-end throughput: 94965.01 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 11870.69 lookups/sec
    Latency per lookup:
      Mean: 84241.07 ns
      Std Dev: 1974.40 ns
      Min: 78512.07 ns
      Max: 90132.38 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 11977.20 lookups/sec
    Latency per lookup:
      Mean: 83491.98 ns
      Std Dev: 1957.79 ns
      Min: 78368.62 ns
      Max: 89305.64 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 11888.01 lookups/sec
    Latency per lookup:
      Mean: 84118.37 ns
      Std Dev: 2069.05 ns
      Min: 79106.56 ns
      Max: 91053.48 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 11933.50 lookups/sec
    Latency per lookup:
      Mean: 83797.71 ns
      Std Dev: 2031.75 ns
      Min: 78857.22 ns
      Max: 89743.85 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 11967.55 lookups/sec
    Latency per lookup:
      Mean: 83559.28 ns
      Std Dev: 2000.45 ns
      Min: 78815.87 ns
      Max: 91143.79 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 11928.34 lookups/sec
    Latency per lookup:
      Mean: 83833.94 ns
      Std Dev: 1871.07 ns
      Min: 78741.10 ns
      Max: 89661.23 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 11915.91 lookups/sec
    Latency per lookup:
      Mean: 83921.39 ns
      Std Dev: 1940.05 ns
      Min: 78864.13 ns
      Max: 89010.49 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 11901.83 lookups/sec
    Latency per lookup:
      Mean: 84020.70 ns
      Std Dev: 1961.63 ns
      Min: 79082.88 ns
      Max: 90636.02 ns
  Overall Latency Statistics:
    Mean: 83873.05 ns
    Std Dev: 1991.40 ns
    Min: 78368.62 ns
    Max: 91143.79 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 94.93s
  Total lookups: 8000000
  End-to-end throughput: 84270.43 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 10711.21 lookups/sec
    Latency per lookup:
      Mean: 93360.16 ns
      Std Dev: 1588.89 ns
      Min: 89146.92 ns
      Max: 98470.13 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 10703.05 lookups/sec
    Latency per lookup:
      Mean: 93431.31 ns
      Std Dev: 1638.10 ns
      Min: 87379.07 ns
      Max: 98889.32 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 10699.83 lookups/sec
    Latency per lookup:
      Mean: 93459.40 ns
      Std Dev: 1607.04 ns
      Min: 88476.31 ns
      Max: 99242.33 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 10684.35 lookups/sec
    Latency per lookup:
      Mean: 93594.85 ns
      Std Dev: 1679.24 ns
      Min: 87885.60 ns
      Max: 99096.40 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 10688.51 lookups/sec
    Latency per lookup:
      Mean: 93558.39 ns
      Std Dev: 1594.51 ns
      Min: 87303.65 ns
      Max: 99220.90 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 10700.93 lookups/sec
    Latency per lookup:
      Mean: 93449.79 ns
      Std Dev: 1620.47 ns
      Min: 87835.76 ns
      Max: 98368.74 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 10708.60 lookups/sec
    Latency per lookup:
      Mean: 93382.85 ns
      Std Dev: 1600.97 ns
      Min: 88637.33 ns
      Max: 99211.28 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 10533.84 lookups/sec
    Latency per lookup:
      Mean: 94932.12 ns
      Std Dev: 2390.23 ns
      Min: 85757.79 ns
      Max: 100848.54 ns
  Overall Latency Statistics:
    Mean: 93646.11 ns
    Std Dev: 1802.42 ns
    Min: 85757.79 ns
    Max: 100848.54 ns
Run 2/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 84.54s
  Total lookups: 8000000
  End-to-end throughput: 94626.43 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 11859.43 lookups/sec
    Latency per lookup:
      Mean: 84321.07 ns
      Std Dev: 1634.19 ns
      Min: 78020.77 ns
      Max: 88860.07 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 11917.35 lookups/sec
    Latency per lookup:
      Mean: 83911.30 ns
      Std Dev: 1691.99 ns
      Min: 79706.47 ns
      Max: 89106.08 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 11930.88 lookups/sec
    Latency per lookup:
      Mean: 83816.12 ns
      Std Dev: 1559.69 ns
      Min: 79314.28 ns
      Max: 88565.95 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 11828.34 lookups/sec
    Latency per lookup:
      Mean: 84542.73 ns
      Std Dev: 1581.27 ns
      Min: 78977.86 ns
      Max: 89981.41 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 11918.64 lookups/sec
    Latency per lookup:
      Mean: 83902.18 ns
      Std Dev: 1524.26 ns
      Min: 79405.83 ns
      Max: 88476.78 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 11902.85 lookups/sec
    Latency per lookup:
      Mean: 84013.49 ns
      Std Dev: 1648.63 ns
      Min: 79963.29 ns
      Max: 90231.53 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 11932.62 lookups/sec
    Latency per lookup:
      Mean: 83803.86 ns
      Std Dev: 1560.18 ns
      Min: 79015.60 ns
      Max: 88332.07 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 11907.44 lookups/sec
    Latency per lookup:
      Mean: 83981.10 ns
      Std Dev: 1430.04 ns
      Min: 79352.35 ns
      Max: 89835.27 ns
  Overall Latency Statistics:
    Mean: 84036.48 ns
    Std Dev: 1599.39 ns
    Min: 78020.77 ns
    Max: 90231.53 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 93.62s
  Total lookups: 8000000
  End-to-end throughput: 85452.52 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 10688.76 lookups/sec
    Latency per lookup:
      Mean: 93556.20 ns
      Std Dev: 2101.36 ns
      Min: 86906.51 ns
      Max: 99544.04 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 10705.69 lookups/sec
    Latency per lookup:
      Mean: 93408.30 ns
      Std Dev: 2218.15 ns
      Min: 87499.04 ns
      Max: 99476.62 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 10752.26 lookups/sec
    Latency per lookup:
      Mean: 93003.67 ns
      Std Dev: 1934.94 ns
      Min: 86732.44 ns
      Max: 98673.89 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 10699.09 lookups/sec
    Latency per lookup:
      Mean: 93465.87 ns
      Std Dev: 1946.71 ns
      Min: 86713.77 ns
      Max: 98577.49 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 10681.59 lookups/sec
    Latency per lookup:
      Mean: 93618.99 ns
      Std Dev: 2209.04 ns
      Min: 87219.90 ns
      Max: 99448.92 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 10721.24 lookups/sec
    Latency per lookup:
      Mean: 93272.78 ns
      Std Dev: 2055.63 ns
      Min: 87671.46 ns
      Max: 99960.76 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 10681.84 lookups/sec
    Latency per lookup:
      Mean: 93616.87 ns
      Std Dev: 2018.95 ns
      Min: 85521.72 ns
      Max: 102525.04 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 10739.85 lookups/sec
    Latency per lookup:
      Mean: 93111.20 ns
      Std Dev: 1942.53 ns
      Min: 87020.65 ns
      Max: 99823.02 ns
  Overall Latency Statistics:
    Mean: 93381.74 ns
    Std Dev: 2067.68 ns
    Min: 85521.72 ns
    Max: 102525.04 ns
Run 3/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 85.59s
  Total lookups: 8000000
  End-to-end throughput: 93468.45 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 11685.82 lookups/sec
    Latency per lookup:
      Mean: 85573.80 ns
      Std Dev: 1796.16 ns
      Min: 81093.95 ns
      Max: 90424.23 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 11686.62 lookups/sec
    Latency per lookup:
      Mean: 85567.94 ns
      Std Dev: 1907.29 ns
      Min: 80168.26 ns
      Max: 90695.23 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 11685.40 lookups/sec
    Latency per lookup:
      Mean: 85576.88 ns
      Std Dev: 1815.06 ns
      Min: 80294.85 ns
      Max: 90990.24 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 11690.38 lookups/sec
    Latency per lookup:
      Mean: 85540.44 ns
      Std Dev: 1846.61 ns
      Min: 80151.23 ns
      Max: 90697.68 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 11688.27 lookups/sec
    Latency per lookup:
      Mean: 85555.88 ns
      Std Dev: 1875.72 ns
      Min: 80651.07 ns
      Max: 90724.69 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 11696.58 lookups/sec
    Latency per lookup:
      Mean: 85495.10 ns
      Std Dev: 1857.75 ns
      Min: 80025.72 ns
      Max: 90549.59 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 11683.59 lookups/sec
    Latency per lookup:
      Mean: 85590.15 ns
      Std Dev: 1926.48 ns
      Min: 80568.42 ns
      Max: 91431.89 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 11690.13 lookups/sec
    Latency per lookup:
      Mean: 85542.26 ns
      Std Dev: 1853.45 ns
      Min: 80992.23 ns
      Max: 90675.89 ns
  Overall Latency Statistics:
    Mean: 85555.31 ns
    Std Dev: 1860.47 ns
    Min: 80025.72 ns
    Max: 91431.89 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 93.90s
  Total lookups: 8000000
  End-to-end throughput: 85194.82 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 10733.86 lookups/sec
    Latency per lookup:
      Mean: 93163.09 ns
      Std Dev: 3917.34 ns
      Min: 86601.06 ns
      Max: 150798.63 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 10714.05 lookups/sec
    Latency per lookup:
      Mean: 93335.41 ns
      Std Dev: 3880.99 ns
      Min: 87294.54 ns
      Max: 153560.20 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 10759.24 lookups/sec
    Latency per lookup:
      Mean: 92943.39 ns
      Std Dev: 3854.58 ns
      Min: 85908.59 ns
      Max: 150810.67 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 10677.21 lookups/sec
    Latency per lookup:
      Mean: 93657.47 ns
      Std Dev: 3970.07 ns
      Min: 87329.21 ns
      Max: 152209.05 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 10712.61 lookups/sec
    Latency per lookup:
      Mean: 93347.92 ns
      Std Dev: 3846.55 ns
      Min: 87879.92 ns
      Max: 152453.92 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 10713.99 lookups/sec
    Latency per lookup:
      Mean: 93335.88 ns
      Std Dev: 3925.39 ns
      Min: 86900.69 ns
      Max: 152181.24 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 10721.09 lookups/sec
    Latency per lookup:
      Mean: 93274.14 ns
      Std Dev: 3880.30 ns
      Min: 86583.91 ns
      Max: 151267.20 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 10649.38 lookups/sec
    Latency per lookup:
      Mean: 93902.16 ns
      Std Dev: 3889.40 ns
      Min: 84164.08 ns
      Max: 151621.02 ns
  Overall Latency Statistics:
    Mean: 93369.93 ns
    Std Dev: 3905.42 ns
    Min: 84164.08 ns
    Max: 153560.20 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 2537 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 1991864592 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 9566518760 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 24000000 }, shards: [Shard { sum: AtomicF64 { inner: 4718586679877697536 }, count: AtomicU64 { inner: 24000000 }, buckets: [AtomicU64 { inner: 18888374 }, AtomicU64 { inner: 5086012 }, AtomicU64 { inner: 25609 }, AtomicU64 { inner: 5 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 6065 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 2204554200 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 116308758400 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Tue Mar 25 11:39:42 PM UTC 2025

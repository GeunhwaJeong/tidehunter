Benchmark started at Tue Mar 25 05:52:07 PM UTC 2025
Running benchmark with direct I/O: on, threads: 8...
    Finished `release` profile [optimized] target(s) in 0.06s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 200 --num-threads 8 --header-file data/bench-header-1TB-10k.dat --uniform-file data/bench-uniform-1TB-10k.dat --direct-io`
Running multithreaded benchmark with 8 threads
Run 1/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 160.90s
  Total lookups: 8000000
  End-to-end throughput: 49721.80 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6224.47 lookups/sec
    Latency per lookup:
      Mean: 160656.16 ns
      Std Dev: 762.60 ns
      Min: 158177.54 ns
      Max: 163101.95 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6251.63 lookups/sec
    Latency per lookup:
      Mean: 159958.23 ns
      Std Dev: 543.71 ns
      Min: 158276.54 ns
      Max: 161722.62 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6242.48 lookups/sec
    Latency per lookup:
      Mean: 160192.79 ns
      Std Dev: 522.01 ns
      Min: 158624.11 ns
      Max: 161761.90 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6215.24 lookups/sec
    Latency per lookup:
      Mean: 160894.84 ns
      Std Dev: 516.61 ns
      Min: 157707.74 ns
      Max: 162887.63 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6218.06 lookups/sec
    Latency per lookup:
      Mean: 160821.79 ns
      Std Dev: 790.32 ns
      Min: 158372.54 ns
      Max: 163147.31 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6250.96 lookups/sec
    Latency per lookup:
      Mean: 159975.42 ns
      Std Dev: 587.03 ns
      Min: 158160.41 ns
      Max: 162406.02 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6245.29 lookups/sec
    Latency per lookup:
      Mean: 160120.70 ns
      Std Dev: 505.46 ns
      Min: 158513.52 ns
      Max: 161989.73 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6231.70 lookups/sec
    Latency per lookup:
      Mean: 160469.88 ns
      Std Dev: 536.01 ns
      Min: 158886.21 ns
      Max: 163179.45 ns
  Overall Latency Statistics:
    Mean: 160386.23 ns
    Std Dev: 699.70 ns
    Min: 157707.74 ns
    Max: 163179.45 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 89.78s
  Total lookups: 8000000
  End-to-end throughput: 89104.38 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 11226.75 lookups/sec
    Latency per lookup:
      Mean: 89073.01 ns
      Std Dev: 589.15 ns
      Min: 87269.84 ns
      Max: 91291.81 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 11168.00 lookups/sec
    Latency per lookup:
      Mean: 89541.53 ns
      Std Dev: 626.44 ns
      Min: 86764.11 ns
      Max: 91340.66 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 11169.23 lookups/sec
    Latency per lookup:
      Mean: 89531.65 ns
      Std Dev: 671.68 ns
      Min: 86890.13 ns
      Max: 91673.92 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 11138.07 lookups/sec
    Latency per lookup:
      Mean: 89782.13 ns
      Std Dev: 666.02 ns
      Min: 83092.83 ns
      Max: 91655.52 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 11165.76 lookups/sec
    Latency per lookup:
      Mean: 89559.47 ns
      Std Dev: 617.34 ns
      Min: 87175.59 ns
      Max: 91501.66 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 11207.32 lookups/sec
    Latency per lookup:
      Mean: 89227.39 ns
      Std Dev: 603.62 ns
      Min: 87270.13 ns
      Max: 91048.79 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 11147.50 lookups/sec
    Latency per lookup:
      Mean: 89706.23 ns
      Std Dev: 684.08 ns
      Min: 85530.12 ns
      Max: 91787.90 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 11195.02 lookups/sec
    Latency per lookup:
      Mean: 89325.45 ns
      Std Dev: 605.63 ns
      Min: 87327.19 ns
      Max: 91845.36 ns
  Overall Latency Statistics:
    Mean: 89468.36 ns
    Std Dev: 672.86 ns
    Min: 83092.83 ns
    Max: 91845.36 ns
Run 2/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 160.87s
  Total lookups: 8000000
  End-to-end throughput: 49731.00 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6236.67 lookups/sec
    Latency per lookup:
      Mean: 160342.08 ns
      Std Dev: 500.74 ns
      Min: 158699.31 ns
      Max: 161765.61 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6216.38 lookups/sec
    Latency per lookup:
      Mean: 160865.26 ns
      Std Dev: 550.63 ns
      Min: 155764.95 ns
      Max: 162847.28 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6240.89 lookups/sec
    Latency per lookup:
      Mean: 160233.59 ns
      Std Dev: 485.73 ns
      Min: 158673.99 ns
      Max: 162234.09 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6225.91 lookups/sec
    Latency per lookup:
      Mean: 160619.17 ns
      Std Dev: 507.09 ns
      Min: 158265.16 ns
      Max: 162120.48 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6255.78 lookups/sec
    Latency per lookup:
      Mean: 159852.28 ns
      Std Dev: 512.94 ns
      Min: 158287.57 ns
      Max: 161885.62 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6242.51 lookups/sec
    Latency per lookup:
      Mean: 160192.07 ns
      Std Dev: 483.11 ns
      Min: 158786.54 ns
      Max: 161526.53 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6242.10 lookups/sec
    Latency per lookup:
      Mean: 160202.50 ns
      Std Dev: 483.95 ns
      Min: 158338.17 ns
      Max: 161703.07 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6238.44 lookups/sec
    Latency per lookup:
      Mean: 160296.38 ns
      Std Dev: 507.67 ns
      Min: 158640.22 ns
      Max: 161849.29 ns
  Overall Latency Statistics:
    Mean: 160325.42 ns
    Std Dev: 578.73 ns
    Min: 155764.95 ns
    Max: 162847.28 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 89.66s
  Total lookups: 8000000
  End-to-end throughput: 89229.08 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 11182.42 lookups/sec
    Latency per lookup:
      Mean: 89426.10 ns
      Std Dev: 623.17 ns
      Min: 87674.66 ns
      Max: 91723.27 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 11160.85 lookups/sec
    Latency per lookup:
      Mean: 89598.95 ns
      Std Dev: 615.50 ns
      Min: 86277.95 ns
      Max: 91403.87 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 11157.83 lookups/sec
    Latency per lookup:
      Mean: 89623.18 ns
      Std Dev: 633.35 ns
      Min: 86330.22 ns
      Max: 91512.51 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 11153.66 lookups/sec
    Latency per lookup:
      Mean: 89656.63 ns
      Std Dev: 632.05 ns
      Min: 84946.33 ns
      Max: 91662.45 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 11174.93 lookups/sec
    Latency per lookup:
      Mean: 89485.98 ns
      Std Dev: 651.69 ns
      Min: 87597.63 ns
      Max: 91991.43 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 11175.50 lookups/sec
    Latency per lookup:
      Mean: 89481.46 ns
      Std Dev: 603.84 ns
      Min: 87481.88 ns
      Max: 91266.15 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 11181.35 lookups/sec
    Latency per lookup:
      Mean: 89434.67 ns
      Std Dev: 592.96 ns
      Min: 87686.92 ns
      Max: 91213.26 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 11195.26 lookups/sec
    Latency per lookup:
      Mean: 89323.54 ns
      Std Dev: 658.91 ns
      Min: 87364.49 ns
      Max: 91477.00 ns
  Overall Latency Statistics:
    Mean: 89503.81 ns
    Std Dev: 635.77 ns
    Min: 84946.33 ns
    Max: 91991.43 ns
Run 3/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 161.59s
  Total lookups: 8000000
  End-to-end throughput: 49509.40 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6227.17 lookups/sec
    Latency per lookup:
      Mean: 160586.53 ns
      Std Dev: 515.57 ns
      Min: 158554.21 ns
      Max: 162317.57 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6257.30 lookups/sec
    Latency per lookup:
      Mean: 159813.46 ns
      Std Dev: 577.20 ns
      Min: 158165.21 ns
      Max: 162002.45 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6188.68 lookups/sec
    Latency per lookup:
      Mean: 161585.26 ns
      Std Dev: 871.02 ns
      Min: 155501.14 ns
      Max: 163708.16 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6220.27 lookups/sec
    Latency per lookup:
      Mean: 160764.60 ns
      Std Dev: 508.62 ns
      Min: 158535.53 ns
      Max: 162706.65 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6250.15 lookups/sec
    Latency per lookup:
      Mean: 159996.12 ns
      Std Dev: 608.25 ns
      Min: 158452.43 ns
      Max: 162738.84 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6248.19 lookups/sec
    Latency per lookup:
      Mean: 160046.42 ns
      Std Dev: 484.87 ns
      Min: 158634.24 ns
      Max: 161610.82 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6218.00 lookups/sec
    Latency per lookup:
      Mean: 160823.42 ns
      Std Dev: 835.52 ns
      Min: 158032.04 ns
      Max: 162970.65 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6251.74 lookups/sec
    Latency per lookup:
      Mean: 159955.56 ns
      Std Dev: 519.50 ns
      Min: 158125.06 ns
      Max: 161562.92 ns
  Overall Latency Statistics:
    Mean: 160446.42 ns
    Std Dev: 848.06 ns
    Min: 155501.14 ns
    Max: 163708.16 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 89.91s
  Total lookups: 8000000
  End-to-end throughput: 88980.82 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 11176.15 lookups/sec
    Latency per lookup:
      Mean: 89476.26 ns
      Std Dev: 611.70 ns
      Min: 87447.86 ns
      Max: 91449.07 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 11179.04 lookups/sec
    Latency per lookup:
      Mean: 89453.13 ns
      Std Dev: 601.53 ns
      Min: 87507.62 ns
      Max: 91396.43 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 11144.19 lookups/sec
    Latency per lookup:
      Mean: 89732.89 ns
      Std Dev: 733.64 ns
      Min: 86438.70 ns
      Max: 91926.13 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 11152.57 lookups/sec
    Latency per lookup:
      Mean: 89665.41 ns
      Std Dev: 607.66 ns
      Min: 87181.93 ns
      Max: 91646.91 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 11122.63 lookups/sec
    Latency per lookup:
      Mean: 89906.77 ns
      Std Dev: 735.62 ns
      Min: 83056.62 ns
      Max: 92141.84 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 11172.84 lookups/sec
    Latency per lookup:
      Mean: 89502.75 ns
      Std Dev: 648.18 ns
      Min: 87163.50 ns
      Max: 91682.02 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 11144.10 lookups/sec
    Latency per lookup:
      Mean: 89733.57 ns
      Std Dev: 640.93 ns
      Min: 86424.81 ns
      Max: 91728.13 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 11155.30 lookups/sec
    Latency per lookup:
      Mean: 89643.52 ns
      Std Dev: 710.42 ns
      Min: 86967.30 ns
      Max: 91719.55 ns
  Overall Latency Statistics:
    Mean: 89639.29 ns
    Std Dev: 679.16 ns
    Min: 83056.62 ns
    Max: 92141.84 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 3184 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 3801597549 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 9567401800 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 24000000 }, shards: [Shard { sum: AtomicF64 { inner: 4717348697967427584 }, count: AtomicU64 { inner: 24000000 }, buckets: [AtomicU64 { inner: 23474597 }, AtomicU64 { inner: 525403 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 69845 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 2103932204 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 195244682800 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Tue Mar 25 06:04:40 PM UTC 2025

Benchmark started at Tue Mar 25 09:04:51 PM UTC 2025
Running benchmark with direct I/O: on, threads: 8...
    Finished `release` profile [optimized] target(s) in 0.05s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 1600 --num-threads 8 --header-file data/bench-header-1TB-10k.dat --uniform-file data/bench-uniform-1TB-10k.dat --direct-io`
Running multithreaded benchmark with 8 threads
Run 1/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 161.09s
  Total lookups: 8000000
  End-to-end throughput: 49662.00 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6244.30 lookups/sec
    Latency per lookup:
      Mean: 160146.17 ns
      Std Dev: 710.90 ns
      Min: 158362.66 ns
      Max: 162550.63 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6218.80 lookups/sec
    Latency per lookup:
      Mean: 160802.60 ns
      Std Dev: 542.85 ns
      Min: 158527.99 ns
      Max: 162526.10 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6238.20 lookups/sec
    Latency per lookup:
      Mean: 160302.55 ns
      Std Dev: 526.35 ns
      Min: 158834.59 ns
      Max: 162573.93 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6207.77 lookups/sec
    Latency per lookup:
      Mean: 161088.57 ns
      Std Dev: 545.75 ns
      Min: 156169.54 ns
      Max: 162717.41 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6249.92 lookups/sec
    Latency per lookup:
      Mean: 160002.14 ns
      Std Dev: 674.08 ns
      Min: 158281.62 ns
      Max: 162379.00 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6237.85 lookups/sec
    Latency per lookup:
      Mean: 160311.61 ns
      Std Dev: 526.86 ns
      Min: 158859.90 ns
      Max: 162054.85 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6232.50 lookups/sec
    Latency per lookup:
      Mean: 160449.22 ns
      Std Dev: 544.11 ns
      Min: 157916.18 ns
      Max: 162798.96 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6254.49 lookups/sec
    Latency per lookup:
      Mean: 159885.13 ns
      Std Dev: 500.83 ns
      Min: 158038.82 ns
      Max: 161642.15 ns
  Overall Latency Statistics:
    Mean: 160373.50 ns
    Std Dev: 688.47 ns
    Min: 156169.54 ns
    Max: 162798.96 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 123.97s
  Total lookups: 8000000
  End-to-end throughput: 64530.54 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 8095.92 lookups/sec
    Latency per lookup:
      Mean: 123519.05 ns
      Std Dev: 960.70 ns
      Min: 120583.81 ns
      Max: 127228.35 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 8077.04 lookups/sec
    Latency per lookup:
      Mean: 123807.81 ns
      Std Dev: 1103.21 ns
      Min: 109719.88 ns
      Max: 126552.40 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 8090.19 lookups/sec
    Latency per lookup:
      Mean: 123606.48 ns
      Std Dev: 923.39 ns
      Min: 120687.75 ns
      Max: 126980.24 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 8069.91 lookups/sec
    Latency per lookup:
      Mean: 123917.08 ns
      Std Dev: 1374.55 ns
      Min: 103099.77 ns
      Max: 126784.71 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 8073.07 lookups/sec
    Latency per lookup:
      Mean: 123868.68 ns
      Std Dev: 1207.22 ns
      Min: 106608.26 ns
      Max: 127257.27 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 8087.43 lookups/sec
    Latency per lookup:
      Mean: 123648.67 ns
      Std Dev: 935.75 ns
      Min: 116501.94 ns
      Max: 126545.07 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 8066.33 lookups/sec
    Latency per lookup:
      Mean: 123972.08 ns
      Std Dev: 1480.71 ns
      Min: 99512.75 ns
      Max: 126658.16 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 8091.23 lookups/sec
    Latency per lookup:
      Mean: 123590.64 ns
      Std Dev: 942.49 ns
      Min: 120483.40 ns
      Max: 126368.17 ns
  Overall Latency Statistics:
    Mean: 123741.31 ns
    Std Dev: 1145.62 ns
    Min: 99512.75 ns
    Max: 127257.27 ns
Run 2/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 160.90s
  Total lookups: 8000000
  End-to-end throughput: 49720.15 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6256.67 lookups/sec
    Latency per lookup:
      Mean: 159829.53 ns
      Std Dev: 496.83 ns
      Min: 158285.08 ns
      Max: 161589.33 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6217.77 lookups/sec
    Latency per lookup:
      Mean: 160829.48 ns
      Std Dev: 694.75 ns
      Min: 158688.13 ns
      Max: 163315.66 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6235.39 lookups/sec
    Latency per lookup:
      Mean: 160374.89 ns
      Std Dev: 530.64 ns
      Min: 158599.55 ns
      Max: 162246.99 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6217.57 lookups/sec
    Latency per lookup:
      Mean: 160834.52 ns
      Std Dev: 507.32 ns
      Min: 158700.79 ns
      Max: 163461.63 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6215.03 lookups/sec
    Latency per lookup:
      Mean: 160900.34 ns
      Std Dev: 729.78 ns
      Min: 158034.32 ns
      Max: 162983.09 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6238.23 lookups/sec
    Latency per lookup:
      Mean: 160301.92 ns
      Std Dev: 509.37 ns
      Min: 158759.54 ns
      Max: 162513.32 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6230.56 lookups/sec
    Latency per lookup:
      Mean: 160499.13 ns
      Std Dev: 728.96 ns
      Min: 158263.74 ns
      Max: 162693.86 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6240.49 lookups/sec
    Latency per lookup:
      Mean: 160243.82 ns
      Std Dev: 660.83 ns
      Min: 158353.57 ns
      Max: 161996.00 ns
  Overall Latency Statistics:
    Mean: 160476.70 ns
    Std Dev: 704.90 ns
    Min: 158034.32 ns
    Max: 163461.63 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 123.89s
  Total lookups: 8000000
  End-to-end throughput: 64575.82 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 8103.43 lookups/sec
    Latency per lookup:
      Mean: 123404.52 ns
      Std Dev: 905.34 ns
      Min: 120664.13 ns
      Max: 126467.72 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 8087.49 lookups/sec
    Latency per lookup:
      Mean: 123647.82 ns
      Std Dev: 1054.06 ns
      Min: 111653.18 ns
      Max: 126738.39 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 8080.10 lookups/sec
    Latency per lookup:
      Mean: 123760.78 ns
      Std Dev: 1156.83 ns
      Min: 106240.11 ns
      Max: 126747.00 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 8072.00 lookups/sec
    Latency per lookup:
      Mean: 123885.11 ns
      Std Dev: 1429.73 ns
      Min: 99377.03 ns
      Max: 127283.72 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 8089.04 lookups/sec
    Latency per lookup:
      Mean: 123624.02 ns
      Std Dev: 1012.46 ns
      Min: 114063.60 ns
      Max: 127275.91 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 8101.36 lookups/sec
    Latency per lookup:
      Mean: 123436.06 ns
      Std Dev: 928.92 ns
      Min: 120786.07 ns
      Max: 126990.33 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 8077.97 lookups/sec
    Latency per lookup:
      Mean: 123793.40 ns
      Std Dev: 1188.87 ns
      Min: 105632.06 ns
      Max: 126514.64 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 8093.45 lookups/sec
    Latency per lookup:
      Mean: 123556.65 ns
      Std Dev: 974.85 ns
      Min: 117236.61 ns
      Max: 126505.57 ns
  Overall Latency Statistics:
    Mean: 123638.55 ns
    Std Dev: 1104.95 ns
    Min: 99377.03 ns
    Max: 127283.72 ns
Run 3/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 161.01s
  Total lookups: 8000000
  End-to-end throughput: 49685.98 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6234.51 lookups/sec
    Latency per lookup:
      Mean: 160397.64 ns
      Std Dev: 476.32 ns
      Min: 158847.99 ns
      Max: 162002.90 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6239.65 lookups/sec
    Latency per lookup:
      Mean: 160265.27 ns
      Std Dev: 491.36 ns
      Min: 158537.73 ns
      Max: 161902.52 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6219.01 lookups/sec
    Latency per lookup:
      Mean: 160797.24 ns
      Std Dev: 637.23 ns
      Min: 157637.77 ns
      Max: 163523.12 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6210.76 lookups/sec
    Latency per lookup:
      Mean: 161010.98 ns
      Std Dev: 540.75 ns
      Min: 155748.44 ns
      Max: 162586.36 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6252.53 lookups/sec
    Latency per lookup:
      Mean: 159935.19 ns
      Std Dev: 477.38 ns
      Min: 158351.60 ns
      Max: 161442.81 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6244.91 lookups/sec
    Latency per lookup:
      Mean: 160130.48 ns
      Std Dev: 478.58 ns
      Min: 158671.42 ns
      Max: 161539.64 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6228.39 lookups/sec
    Latency per lookup:
      Mean: 160555.07 ns
      Std Dev: 675.89 ns
      Min: 157716.56 ns
      Max: 162833.33 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6250.67 lookups/sec
    Latency per lookup:
      Mean: 159982.74 ns
      Std Dev: 496.13 ns
      Min: 158401.73 ns
      Max: 161581.96 ns
  Overall Latency Statistics:
    Mean: 160384.33 ns
    Std Dev: 648.15 ns
    Min: 155748.44 ns
    Max: 163523.12 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 123.88s
  Total lookups: 8000000
  End-to-end throughput: 64578.49 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 8098.33 lookups/sec
    Latency per lookup:
      Mean: 123482.30 ns
      Std Dev: 979.82 ns
      Min: 120152.15 ns
      Max: 126497.83 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 8098.15 lookups/sec
    Latency per lookup:
      Mean: 123484.95 ns
      Std Dev: 955.14 ns
      Min: 120136.41 ns
      Max: 129426.00 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 8098.42 lookups/sec
    Latency per lookup:
      Mean: 123480.85 ns
      Std Dev: 946.61 ns
      Min: 120972.12 ns
      Max: 128414.62 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 8076.00 lookups/sec
    Latency per lookup:
      Mean: 123823.68 ns
      Std Dev: 1285.10 ns
      Min: 104760.03 ns
      Max: 128456.13 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 8079.21 lookups/sec
    Latency per lookup:
      Mean: 123774.40 ns
      Std Dev: 1229.78 ns
      Min: 106925.44 ns
      Max: 126924.75 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 8072.33 lookups/sec
    Latency per lookup:
      Mean: 123880.02 ns
      Std Dev: 1371.03 ns
      Min: 101432.05 ns
      Max: 127519.57 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 8090.80 lookups/sec
    Latency per lookup:
      Mean: 123597.23 ns
      Std Dev: 986.77 ns
      Min: 113264.24 ns
      Max: 128009.25 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 8084.74 lookups/sec
    Latency per lookup:
      Mean: 123689.88 ns
      Std Dev: 1092.17 ns
      Min: 109559.71 ns
      Max: 127218.99 ns
  Overall Latency Statistics:
    Mean: 123651.66 ns
    Std Dev: 1127.24 ns
    Min: 101432.05 ns
    Max: 129426.00 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 3300 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 3801953094 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 9566729440 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 24000000 }, shards: [Shard { sum: AtomicF64 { inner: 4717207661173538816 }, count: AtomicU64 { inner: 24000000 }, buckets: [AtomicU64 { inner: 24000000 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 203697 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 2921020340 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 1474552726280 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Tue Mar 25 09:19:05 PM UTC 2025

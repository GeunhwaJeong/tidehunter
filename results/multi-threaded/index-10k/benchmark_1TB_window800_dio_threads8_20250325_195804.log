Benchmark started at Tue Mar 25 07:58:04 PM UTC 2025
Running benchmark with direct I/O: on, threads: 8...
    Finished `release` profile [optimized] target(s) in 0.06s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 800 --num-threads 8 --header-file data/bench-header-1TB-10k.dat --uniform-file data/bench-uniform-1TB-10k.dat --direct-io`
Running multithreaded benchmark with 8 threads
Run 1/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 160.70s
  Total lookups: 8000000
  End-to-end throughput: 49783.65 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6239.46 lookups/sec
    Latency per lookup:
      Mean: 160270.40 ns
      Std Dev: 522.71 ns
      Min: 158200.82 ns
      Max: 162536.93 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6246.73 lookups/sec
    Latency per lookup:
      Mean: 160083.78 ns
      Std Dev: 500.01 ns
      Min: 158338.42 ns
      Max: 161514.87 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6234.32 lookups/sec
    Latency per lookup:
      Mean: 160402.29 ns
      Std Dev: 493.03 ns
      Min: 158027.55 ns
      Max: 161905.40 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6222.97 lookups/sec
    Latency per lookup:
      Mean: 160694.87 ns
      Std Dev: 563.74 ns
      Min: 155832.46 ns
      Max: 162671.64 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6240.87 lookups/sec
    Latency per lookup:
      Mean: 160234.05 ns
      Std Dev: 546.23 ns
      Min: 158550.25 ns
      Max: 162505.90 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6236.48 lookups/sec
    Latency per lookup:
      Mean: 160346.74 ns
      Std Dev: 499.34 ns
      Min: 158917.37 ns
      Max: 162070.53 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6244.22 lookups/sec
    Latency per lookup:
      Mean: 160148.06 ns
      Std Dev: 511.92 ns
      Min: 158406.47 ns
      Max: 161745.23 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6257.02 lookups/sec
    Latency per lookup:
      Mean: 159820.43 ns
      Std Dev: 489.18 ns
      Min: 158339.15 ns
      Max: 161529.82 ns
  Overall Latency Statistics:
    Mean: 160250.08 ns
    Std Dev: 568.65 ns
    Min: 155832.46 ns
    Max: 162671.64 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 104.34s
  Total lookups: 8000000
  End-to-end throughput: 76669.85 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 9618.87 lookups/sec
    Latency per lookup:
      Mean: 103962.34 ns
      Std Dev: 728.73 ns
      Min: 101970.75 ns
      Max: 106198.49 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 9606.60 lookups/sec
    Latency per lookup:
      Mean: 104095.16 ns
      Std Dev: 712.55 ns
      Min: 101484.96 ns
      Max: 106177.20 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 9597.92 lookups/sec
    Latency per lookup:
      Mean: 104189.19 ns
      Std Dev: 718.61 ns
      Min: 97640.48 ns
      Max: 106390.27 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 9583.75 lookups/sec
    Latency per lookup:
      Mean: 104343.24 ns
      Std Dev: 863.53 ns
      Min: 91794.35 ns
      Max: 106625.00 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 9595.75 lookups/sec
    Latency per lookup:
      Mean: 104212.84 ns
      Std Dev: 795.15 ns
      Min: 97654.74 ns
      Max: 106869.96 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 9601.37 lookups/sec
    Latency per lookup:
      Mean: 104151.85 ns
      Std Dev: 705.94 ns
      Min: 99333.09 ns
      Max: 108003.67 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 9587.44 lookups/sec
    Latency per lookup:
      Mean: 104303.14 ns
      Std Dev: 844.30 ns
      Min: 93559.85 ns
      Max: 107014.41 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 9606.56 lookups/sec
    Latency per lookup:
      Mean: 104095.54 ns
      Std Dev: 757.10 ns
      Min: 101891.96 ns
      Max: 106759.09 ns
  Overall Latency Statistics:
    Mean: 104169.16 ns
    Std Dev: 776.37 ns
    Min: 91794.35 ns
    Max: 108003.67 ns
Run 2/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 160.82s
  Total lookups: 8000000
  End-to-end throughput: 49744.26 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6251.28 lookups/sec
    Latency per lookup:
      Mean: 159967.30 ns
      Std Dev: 539.52 ns
      Min: 158124.27 ns
      Max: 162214.17 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6246.65 lookups/sec
    Latency per lookup:
      Mean: 160085.68 ns
      Std Dev: 481.29 ns
      Min: 158277.74 ns
      Max: 161490.77 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6240.39 lookups/sec
    Latency per lookup:
      Mean: 160246.48 ns
      Std Dev: 494.26 ns
      Min: 158404.45 ns
      Max: 162318.92 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6218.04 lookups/sec
    Latency per lookup:
      Mean: 160822.34 ns
      Std Dev: 565.90 ns
      Min: 155943.03 ns
      Max: 162509.58 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6240.77 lookups/sec
    Latency per lookup:
      Mean: 160236.55 ns
      Std Dev: 509.73 ns
      Min: 158619.72 ns
      Max: 162062.45 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6243.92 lookups/sec
    Latency per lookup:
      Mean: 160155.84 ns
      Std Dev: 530.25 ns
      Min: 158262.68 ns
      Max: 161780.72 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6247.42 lookups/sec
    Latency per lookup:
      Mean: 160066.05 ns
      Std Dev: 498.72 ns
      Min: 158298.13 ns
      Max: 162024.51 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6256.19 lookups/sec
    Latency per lookup:
      Mean: 159841.70 ns
      Std Dev: 522.99 ns
      Min: 158243.52 ns
      Max: 161566.72 ns
  Overall Latency Statistics:
    Mean: 160177.74 ns
    Std Dev: 586.60 ns
    Min: 155943.03 ns
    Max: 162509.58 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 104.32s
  Total lookups: 8000000
  End-to-end throughput: 76687.43 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 9612.09 lookups/sec
    Latency per lookup:
      Mean: 104035.62 ns
      Std Dev: 728.09 ns
      Min: 102178.47 ns
      Max: 106326.75 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 9604.15 lookups/sec
    Latency per lookup:
      Mean: 104121.60 ns
      Std Dev: 702.18 ns
      Min: 100730.91 ns
      Max: 106198.87 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 9609.12 lookups/sec
    Latency per lookup:
      Mean: 104067.75 ns
      Std Dev: 710.76 ns
      Min: 101733.90 ns
      Max: 106692.54 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 9595.41 lookups/sec
    Latency per lookup:
      Mean: 104216.51 ns
      Std Dev: 806.69 ns
      Min: 97003.45 ns
      Max: 106802.01 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 9602.25 lookups/sec
    Latency per lookup:
      Mean: 104142.24 ns
      Std Dev: 717.23 ns
      Min: 101411.90 ns
      Max: 106436.62 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 9591.82 lookups/sec
    Latency per lookup:
      Mean: 104255.48 ns
      Std Dev: 763.98 ns
      Min: 94221.76 ns
      Max: 107058.00 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 9598.42 lookups/sec
    Latency per lookup:
      Mean: 104183.78 ns
      Std Dev: 728.66 ns
      Min: 99314.43 ns
      Max: 106951.94 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 9585.95 lookups/sec
    Latency per lookup:
      Mean: 104319.34 ns
      Std Dev: 941.59 ns
      Min: 90545.05 ns
      Max: 106805.21 ns
  Overall Latency Statistics:
    Mean: 104167.79 ns
    Std Dev: 771.22 ns
    Min: 90545.05 ns
    Max: 107058.00 ns
Run 3/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 160.98s
  Total lookups: 8000000
  End-to-end throughput: 49694.23 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6238.34 lookups/sec
    Latency per lookup:
      Mean: 160299.15 ns
      Std Dev: 563.34 ns
      Min: 158987.58 ns
      Max: 162413.80 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6236.10 lookups/sec
    Latency per lookup:
      Mean: 160356.71 ns
      Std Dev: 505.19 ns
      Min: 158256.21 ns
      Max: 161963.65 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6211.79 lookups/sec
    Latency per lookup:
      Mean: 160984.28 ns
      Std Dev: 578.49 ns
      Min: 155468.46 ns
      Max: 162491.61 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6231.49 lookups/sec
    Latency per lookup:
      Mean: 160475.34 ns
      Std Dev: 524.03 ns
      Min: 158389.60 ns
      Max: 162114.83 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6256.21 lookups/sec
    Latency per lookup:
      Mean: 159841.22 ns
      Std Dev: 564.31 ns
      Min: 158225.20 ns
      Max: 162347.61 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6247.56 lookups/sec
    Latency per lookup:
      Mean: 160062.40 ns
      Std Dev: 528.85 ns
      Min: 158649.13 ns
      Max: 162325.45 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6230.04 lookups/sec
    Latency per lookup:
      Mean: 160512.64 ns
      Std Dev: 535.83 ns
      Min: 157214.12 ns
      Max: 162903.63 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6252.92 lookups/sec
    Latency per lookup:
      Mean: 159925.32 ns
      Std Dev: 608.87 ns
      Min: 158195.35 ns
      Max: 162277.94 ns
  Overall Latency Statistics:
    Mean: 160307.13 ns
    Std Dev: 651.16 ns
    Min: 155468.46 ns
    Max: 162903.63 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 104.57s
  Total lookups: 8000000
  End-to-end throughput: 76503.07 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 9572.63 lookups/sec
    Latency per lookup:
      Mean: 104464.46 ns
      Std Dev: 907.70 ns
      Min: 94490.56 ns
      Max: 107153.65 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 9570.54 lookups/sec
    Latency per lookup:
      Mean: 104487.29 ns
      Std Dev: 940.39 ns
      Min: 94549.18 ns
      Max: 107538.85 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 9635.84 lookups/sec
    Latency per lookup:
      Mean: 103779.23 ns
      Std Dev: 711.98 ns
      Min: 101441.54 ns
      Max: 106474.73 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 9562.91 lookups/sec
    Latency per lookup:
      Mean: 104570.69 ns
      Std Dev: 1006.86 ns
      Min: 89701.65 ns
      Max: 106781.86 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 9591.76 lookups/sec
    Latency per lookup:
      Mean: 104256.17 ns
      Std Dev: 809.38 ns
      Min: 98724.55 ns
      Max: 106499.84 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 9583.13 lookups/sec
    Latency per lookup:
      Mean: 104350.05 ns
      Std Dev: 850.69 ns
      Min: 96174.36 ns
      Max: 106626.06 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 9606.98 lookups/sec
    Latency per lookup:
      Mean: 104090.98 ns
      Std Dev: 779.00 ns
      Min: 101021.88 ns
      Max: 106534.42 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 9613.24 lookups/sec
    Latency per lookup:
      Mean: 104023.19 ns
      Std Dev: 727.49 ns
      Min: 101413.29 ns
      Max: 106084.39 ns
  Overall Latency Statistics:
    Mean: 104252.76 ns
    Std Dev: 884.40 ns
    Min: 89701.65 ns
    Max: 107538.85 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 2913 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 3798008654 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 9568289400 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 24000000 }, shards: [Shard { sum: AtomicF64 { inner: 4717207661173538816 }, count: AtomicU64 { inner: 24000000 }, buckets: [AtomicU64 { inner: 24000000 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 138344 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 2454622431 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 752634894040 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Tue Mar 25 08:11:20 PM UTC 2025

Benchmark started at Wed Mar 26 01:55:02 AM UTC 2025
Running benchmark with direct I/O: off, threads: 8...
    Finished `release` profile [optimized] target(s) in 0.17s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 800 --num-threads 8 --header-file data/bench-header-1TB-10k.dat --uniform-file data/bench-uniform-1TB-10k.dat`
Running multithreaded benchmark with 8 threads
Run 1/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 104.42s
  Total lookups: 8000000
  End-to-end throughput: 76611.81 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 9654.55 lookups/sec
    Latency per lookup:
      Mean: 103578.12 ns
      Std Dev: 6375.90 ns
      Min: 92769.98 ns
      Max: 120158.26 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 9581.55 lookups/sec
    Latency per lookup:
      Mean: 104367.20 ns
      Std Dev: 6270.13 ns
      Min: 94005.23 ns
      Max: 120078.29 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 9576.51 lookups/sec
    Latency per lookup:
      Mean: 104422.17 ns
      Std Dev: 6469.03 ns
      Min: 91201.45 ns
      Max: 121335.16 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 9604.34 lookups/sec
    Latency per lookup:
      Mean: 104119.55 ns
      Std Dev: 6227.01 ns
      Min: 93388.58 ns
      Max: 122517.82 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 9635.24 lookups/sec
    Latency per lookup:
      Mean: 103785.71 ns
      Std Dev: 6336.31 ns
      Min: 91523.52 ns
      Max: 119775.12 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 9615.33 lookups/sec
    Latency per lookup:
      Mean: 104000.57 ns
      Std Dev: 6473.15 ns
      Min: 93438.46 ns
      Max: 120771.35 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 9592.14 lookups/sec
    Latency per lookup:
      Mean: 104252.04 ns
      Std Dev: 6343.25 ns
      Min: 93390.78 ns
      Max: 121070.62 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 9655.36 lookups/sec
    Latency per lookup:
      Mean: 103569.42 ns
      Std Dev: 6346.25 ns
      Min: 92896.48 ns
      Max: 120110.15 ns
  Overall Latency Statistics:
    Mean: 104011.85 ns
    Std Dev: 6363.49 ns
    Min: 91201.45 ns
    Max: 122517.82 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 116.96s
  Total lookups: 8000000
  End-to-end throughput: 68399.99 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 8593.05 lookups/sec
    Latency per lookup:
      Mean: 116373.10 ns
      Std Dev: 2666.56 ns
      Min: 105212.05 ns
      Max: 124823.53 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 8650.34 lookups/sec
    Latency per lookup:
      Mean: 115602.42 ns
      Std Dev: 2543.53 ns
      Min: 109029.04 ns
      Max: 122088.38 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 8575.16 lookups/sec
    Latency per lookup:
      Mean: 116615.96 ns
      Std Dev: 2730.30 ns
      Min: 99424.95 ns
      Max: 124394.85 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 8608.77 lookups/sec
    Latency per lookup:
      Mean: 116160.68 ns
      Std Dev: 2350.54 ns
      Min: 105308.13 ns
      Max: 122729.38 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 8550.02 lookups/sec
    Latency per lookup:
      Mean: 116958.80 ns
      Std Dev: 3111.49 ns
      Min: 92350.62 ns
      Max: 124819.43 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 8634.39 lookups/sec
    Latency per lookup:
      Mean: 115815.90 ns
      Std Dev: 2524.89 ns
      Min: 107591.64 ns
      Max: 122675.25 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 8586.21 lookups/sec
    Latency per lookup:
      Mean: 116465.85 ns
      Std Dev: 2556.01 ns
      Min: 104691.74 ns
      Max: 123673.18 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 8572.75 lookups/sec
    Latency per lookup:
      Mean: 116648.62 ns
      Std Dev: 2867.67 ns
      Min: 99988.46 ns
      Max: 124503.54 ns
  Overall Latency Statistics:
    Mean: 116330.16 ns
    Std Dev: 2710.96 ns
    Min: 92350.62 ns
    Max: 124823.53 ns
Run 2/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 111.70s
  Total lookups: 8000000
  End-to-end throughput: 71622.57 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 8972.29 lookups/sec
    Latency per lookup:
      Mean: 111454.27 ns
      Std Dev: 10874.89 ns
      Min: 94029.10 ns
      Max: 136329.27 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 8972.69 lookups/sec
    Latency per lookup:
      Mean: 111449.33 ns
      Std Dev: 10640.46 ns
      Min: 93989.60 ns
      Max: 135167.07 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 8952.84 lookups/sec
    Latency per lookup:
      Mean: 111696.40 ns
      Std Dev: 10617.31 ns
      Min: 94307.07 ns
      Max: 135417.04 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 8962.28 lookups/sec
    Latency per lookup:
      Mean: 111578.75 ns
      Std Dev: 10748.54 ns
      Min: 93858.62 ns
      Max: 136342.46 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 8957.09 lookups/sec
    Latency per lookup:
      Mean: 111643.34 ns
      Std Dev: 10807.11 ns
      Min: 93186.86 ns
      Max: 136581.21 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 8975.50 lookups/sec
    Latency per lookup:
      Mean: 111414.36 ns
      Std Dev: 10532.65 ns
      Min: 94423.24 ns
      Max: 136820.88 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 8970.63 lookups/sec
    Latency per lookup:
      Mean: 111474.87 ns
      Std Dev: 10637.52 ns
      Min: 94171.27 ns
      Max: 135967.23 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 8983.17 lookups/sec
    Latency per lookup:
      Mean: 111319.24 ns
      Std Dev: 10748.48 ns
      Min: 93793.95 ns
      Max: 135139.53 ns
  Overall Latency Statistics:
    Mean: 111503.82 ns
    Std Dev: 10702.04 ns
    Min: 93186.86 ns
    Max: 136820.88 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 116.78s
  Total lookups: 8000000
  End-to-end throughput: 68505.62 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 8602.68 lookups/sec
    Latency per lookup:
      Mean: 116242.91 ns
      Std Dev: 2309.34 ns
      Min: 109490.30 ns
      Max: 122537.31 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 8566.49 lookups/sec
    Latency per lookup:
      Mean: 116733.95 ns
      Std Dev: 2640.79 ns
      Min: 97061.44 ns
      Max: 123708.66 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 8585.05 lookups/sec
    Latency per lookup:
      Mean: 116481.56 ns
      Std Dev: 2869.61 ns
      Min: 107272.58 ns
      Max: 124752.57 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 8593.42 lookups/sec
    Latency per lookup:
      Mean: 116368.13 ns
      Std Dev: 2445.68 ns
      Min: 108635.23 ns
      Max: 123309.23 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 8597.39 lookups/sec
    Latency per lookup:
      Mean: 116314.32 ns
      Std Dev: 2768.50 ns
      Min: 108557.38 ns
      Max: 127446.36 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 8563.22 lookups/sec
    Latency per lookup:
      Mean: 116778.46 ns
      Std Dev: 2587.10 ns
      Min: 96485.26 ns
      Max: 123381.29 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 8579.61 lookups/sec
    Latency per lookup:
      Mean: 116555.46 ns
      Std Dev: 2614.33 ns
      Min: 101696.25 ns
      Max: 125068.88 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 8611.42 lookups/sec
    Latency per lookup:
      Mean: 116124.83 ns
      Std Dev: 2350.27 ns
      Min: 108890.88 ns
      Max: 123784.92 ns
  Overall Latency Statistics:
    Mean: 116449.95 ns
    Std Dev: 2588.76 ns
    Min: 96485.26 ns
    Max: 127446.36 ns
Run 3/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 109.39s
  Total lookups: 8000000
  End-to-end throughput: 73133.90 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 9146.31 lookups/sec
    Latency per lookup:
      Mean: 109333.75 ns
      Std Dev: 9537.07 ns
      Min: 94075.17 ns
      Max: 131206.89 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 9154.69 lookups/sec
    Latency per lookup:
      Mean: 109233.60 ns
      Std Dev: 9456.79 ns
      Min: 93776.61 ns
      Max: 130196.88 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 9141.76 lookups/sec
    Latency per lookup:
      Mean: 109388.18 ns
      Std Dev: 9585.59 ns
      Min: 92980.98 ns
      Max: 130848.19 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 9185.93 lookups/sec
    Latency per lookup:
      Mean: 108862.18 ns
      Std Dev: 9467.88 ns
      Min: 91935.83 ns
      Max: 131988.45 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 9162.57 lookups/sec
    Latency per lookup:
      Mean: 109139.68 ns
      Std Dev: 9487.07 ns
      Min: 91899.25 ns
      Max: 130710.05 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 9181.64 lookups/sec
    Latency per lookup:
      Mean: 108913.00 ns
      Std Dev: 9539.62 ns
      Min: 92343.58 ns
      Max: 130483.51 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 9149.92 lookups/sec
    Latency per lookup:
      Mean: 109290.57 ns
      Std Dev: 9563.67 ns
      Min: 93419.95 ns
      Max: 131001.65 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 9171.17 lookups/sec
    Latency per lookup:
      Mean: 109037.29 ns
      Std Dev: 9538.52 ns
      Min: 92671.74 ns
      Max: 131275.58 ns
  Overall Latency Statistics:
    Mean: 109149.78 ns
    Std Dev: 9523.89 ns
    Min: 91899.25 ns
    Max: 131988.45 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 116.92s
  Total lookups: 8000000
  End-to-end throughput: 68424.64 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 8599.07 lookups/sec
    Latency per lookup:
      Mean: 116291.71 ns
      Std Dev: 3410.33 ns
      Min: 108705.69 ns
      Max: 174133.19 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 8597.29 lookups/sec
    Latency per lookup:
      Mean: 116315.79 ns
      Std Dev: 3509.64 ns
      Min: 108856.33 ns
      Max: 174234.15 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 8583.76 lookups/sec
    Latency per lookup:
      Mean: 116499.00 ns
      Std Dev: 3486.80 ns
      Min: 102813.91 ns
      Max: 171461.27 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 8553.10 lookups/sec
    Latency per lookup:
      Mean: 116916.73 ns
      Std Dev: 3708.57 ns
      Min: 94243.31 ns
      Max: 175426.22 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 8598.66 lookups/sec
    Latency per lookup:
      Mean: 116297.19 ns
      Std Dev: 3536.58 ns
      Min: 108740.31 ns
      Max: 174990.19 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 8617.57 lookups/sec
    Latency per lookup:
      Mean: 116042.05 ns
      Std Dev: 3275.15 ns
      Min: 107986.05 ns
      Max: 172303.29 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 8562.88 lookups/sec
    Latency per lookup:
      Mean: 116783.17 ns
      Std Dev: 3673.87 ns
      Min: 97716.31 ns
      Max: 174791.57 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 8577.97 lookups/sec
    Latency per lookup:
      Mean: 116577.63 ns
      Std Dev: 3546.22 ns
      Min: 99633.75 ns
      Max: 171758.39 ns
  Overall Latency Statistics:
    Mean: 116465.41 ns
    Std Dev: 3531.02 ns
    Min: 94243.31 ns
    Max: 175426.22 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 1299 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 2559093445 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 9566387200 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 24000000 }, shards: [Shard { sum: AtomicF64 { inner: 4717207661173538816 }, count: AtomicU64 { inner: 24000000 }, buckets: [AtomicU64 { inner: 24000000 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 9012 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 2760487302 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 752642526920 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Wed Mar 26 02:06:18 AM UTC 2025

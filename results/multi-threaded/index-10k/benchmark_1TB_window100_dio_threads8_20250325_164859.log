Benchmark started at Tue Mar 25 04:48:59 PM UTC 2025
Running benchmark with direct I/O: on, threads: 8...
    Finished `release` profile [optimized] target(s) in 0.06s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 100 --num-threads 8 --header-file data/bench-header-1TB-10k.dat --uniform-file data/bench-uniform-1TB-10k.dat --direct-io`
Running multithreaded benchmark with 8 threads
Run 1/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 161.13s
  Total lookups: 8000000
  End-to-end throughput: 49650.01 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6226.16 lookups/sec
    Latency per lookup:
      Mean: 160612.64 ns
      Std Dev: 507.68 ns
      Min: 157593.48 ns
      Max: 162292.06 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6245.20 lookups/sec
    Latency per lookup:
      Mean: 160122.94 ns
      Std Dev: 484.41 ns
      Min: 158459.24 ns
      Max: 161734.66 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6236.34 lookups/sec
    Latency per lookup:
      Mean: 160350.44 ns
      Std Dev: 502.37 ns
      Min: 158519.26 ns
      Max: 161834.41 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6206.27 lookups/sec
    Latency per lookup:
      Mean: 161127.50 ns
      Std Dev: 550.45 ns
      Min: 156211.55 ns
      Max: 162705.26 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6219.81 lookups/sec
    Latency per lookup:
      Mean: 160776.53 ns
      Std Dev: 510.11 ns
      Min: 159032.51 ns
      Max: 162178.41 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6252.31 lookups/sec
    Latency per lookup:
      Mean: 159940.77 ns
      Std Dev: 502.45 ns
      Min: 158429.88 ns
      Max: 161553.06 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6216.21 lookups/sec
    Latency per lookup:
      Mean: 160869.80 ns
      Std Dev: 524.65 ns
      Min: 158153.41 ns
      Max: 162364.74 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6251.40 lookups/sec
    Latency per lookup:
      Mean: 159964.05 ns
      Std Dev: 496.33 ns
      Min: 158622.08 ns
      Max: 161328.30 ns
  Overall Latency Statistics:
    Mean: 160470.58 ns
    Std Dev: 657.58 ns
    Min: 156211.55 ns
    Max: 162705.26 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 101.92s
  Total lookups: 8000000
  End-to-end throughput: 78494.82 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 9846.33 lookups/sec
    Latency per lookup:
      Mean: 101560.66 ns
      Std Dev: 1158.76 ns
      Min: 97506.56 ns
      Max: 105260.18 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 9838.68 lookups/sec
    Latency per lookup:
      Mean: 101639.61 ns
      Std Dev: 1164.82 ns
      Min: 98480.08 ns
      Max: 105635.53 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 9823.80 lookups/sec
    Latency per lookup:
      Mean: 101793.65 ns
      Std Dev: 1180.66 ns
      Min: 97914.22 ns
      Max: 105643.77 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 9811.88 lookups/sec
    Latency per lookup:
      Mean: 101917.32 ns
      Std Dev: 1163.47 ns
      Min: 97275.24 ns
      Max: 106079.84 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 9833.65 lookups/sec
    Latency per lookup:
      Mean: 101691.62 ns
      Std Dev: 1189.66 ns
      Min: 98532.40 ns
      Max: 105443.70 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 9848.40 lookups/sec
    Latency per lookup:
      Mean: 101539.37 ns
      Std Dev: 1183.88 ns
      Min: 97326.00 ns
      Max: 106736.71 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 9855.91 lookups/sec
    Latency per lookup:
      Mean: 101461.96 ns
      Std Dev: 1157.26 ns
      Min: 97599.44 ns
      Max: 105659.14 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 9859.19 lookups/sec
    Latency per lookup:
      Mean: 101428.25 ns
      Std Dev: 1269.94 ns
      Min: 97889.94 ns
      Max: 110691.54 ns
  Overall Latency Statistics:
    Mean: 101629.05 ns
    Std Dev: 1194.32 ns
    Min: 97275.24 ns
    Max: 110691.54 ns
Run 2/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 161.04s
  Total lookups: 8000000
  End-to-end throughput: 49677.91 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6248.83 lookups/sec
    Latency per lookup:
      Mean: 160030.06 ns
      Std Dev: 577.33 ns
      Min: 158137.23 ns
      Max: 162836.80 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6235.91 lookups/sec
    Latency per lookup:
      Mean: 160361.54 ns
      Std Dev: 464.64 ns
      Min: 158924.43 ns
      Max: 161864.38 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6237.17 lookups/sec
    Latency per lookup:
      Mean: 160329.19 ns
      Std Dev: 510.41 ns
      Min: 159014.45 ns
      Max: 162154.31 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6209.75 lookups/sec
    Latency per lookup:
      Mean: 161037.18 ns
      Std Dev: 633.81 ns
      Min: 155657.81 ns
      Max: 162763.60 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6237.52 lookups/sec
    Latency per lookup:
      Mean: 160320.07 ns
      Std Dev: 484.68 ns
      Min: 158747.55 ns
      Max: 162062.90 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6242.95 lookups/sec
    Latency per lookup:
      Mean: 160180.59 ns
      Std Dev: 523.38 ns
      Min: 158479.93 ns
      Max: 161897.75 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6233.44 lookups/sec
    Latency per lookup:
      Mean: 160425.12 ns
      Std Dev: 485.85 ns
      Min: 158708.27 ns
      Max: 161792.71 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6250.75 lookups/sec
    Latency per lookup:
      Mean: 159980.71 ns
      Std Dev: 518.38 ns
      Min: 158529.00 ns
      Max: 161720.52 ns
  Overall Latency Statistics:
    Mean: 160333.06 ns
    Std Dev: 609.25 ns
    Min: 155657.81 ns
    Max: 162836.80 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 102.12s
  Total lookups: 8000000
  End-to-end throughput: 78340.50 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 9856.48 lookups/sec
    Latency per lookup:
      Mean: 101456.11 ns
      Std Dev: 1167.67 ns
      Min: 97768.88 ns
      Max: 104925.56 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 9845.28 lookups/sec
    Latency per lookup:
      Mean: 101571.48 ns
      Std Dev: 1171.60 ns
      Min: 97647.99 ns
      Max: 105472.99 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 9814.69 lookups/sec
    Latency per lookup:
      Mean: 101888.07 ns
      Std Dev: 1162.93 ns
      Min: 98269.55 ns
      Max: 106029.08 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 9805.74 lookups/sec
    Latency per lookup:
      Mean: 101981.09 ns
      Std Dev: 1185.86 ns
      Min: 98706.04 ns
      Max: 106484.37 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 9842.37 lookups/sec
    Latency per lookup:
      Mean: 101601.54 ns
      Std Dev: 1157.33 ns
      Min: 97200.86 ns
      Max: 105382.63 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 9849.29 lookups/sec
    Latency per lookup:
      Mean: 101530.17 ns
      Std Dev: 1168.72 ns
      Min: 97467.25 ns
      Max: 105142.39 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 9792.59 lookups/sec
    Latency per lookup:
      Mean: 102118.06 ns
      Std Dev: 1133.24 ns
      Min: 98051.19 ns
      Max: 105451.81 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 9852.27 lookups/sec
    Latency per lookup:
      Mean: 101499.43 ns
      Std Dev: 1187.06 ns
      Min: 97614.74 ns
      Max: 105437.31 ns
  Overall Latency Statistics:
    Mean: 101705.74 ns
    Std Dev: 1190.43 ns
    Min: 97200.86 ns
    Max: 106484.37 ns
Run 3/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 160.81s
  Total lookups: 8000000
  End-to-end throughput: 49748.36 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6238.60 lookups/sec
    Latency per lookup:
      Mean: 160292.50 ns
      Std Dev: 494.64 ns
      Min: 158472.37 ns
      Max: 162036.32 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6218.55 lookups/sec
    Latency per lookup:
      Mean: 160809.13 ns
      Std Dev: 538.82 ns
      Min: 155995.61 ns
      Max: 162361.65 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6228.09 lookups/sec
    Latency per lookup:
      Mean: 160562.81 ns
      Std Dev: 495.69 ns
      Min: 158900.29 ns
      Max: 162223.93 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6226.90 lookups/sec
    Latency per lookup:
      Mean: 160593.53 ns
      Std Dev: 705.33 ns
      Min: 158637.31 ns
      Max: 162706.24 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6234.64 lookups/sec
    Latency per lookup:
      Mean: 160394.23 ns
      Std Dev: 478.84 ns
      Min: 158921.48 ns
      Max: 162447.84 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6236.66 lookups/sec
    Latency per lookup:
      Mean: 160342.31 ns
      Std Dev: 485.04 ns
      Min: 158721.15 ns
      Max: 162027.19 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6227.54 lookups/sec
    Latency per lookup:
      Mean: 160576.97 ns
      Std Dev: 537.91 ns
      Min: 158836.74 ns
      Max: 163078.85 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6228.31 lookups/sec
    Latency per lookup:
      Mean: 160557.28 ns
      Std Dev: 683.20 ns
      Min: 158960.81 ns
      Max: 162687.96 ns
  Overall Latency Statistics:
    Mean: 160516.09 ns
    Std Dev: 580.23 ns
    Min: 155995.61 ns
    Max: 163078.85 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 102.01s
  Total lookups: 8000000
  End-to-end throughput: 78422.02 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 9822.48 lookups/sec
    Latency per lookup:
      Mean: 101807.32 ns
      Std Dev: 1170.33 ns
      Min: 98120.10 ns
      Max: 105684.57 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 9828.69 lookups/sec
    Latency per lookup:
      Mean: 101742.98 ns
      Std Dev: 1201.64 ns
      Min: 98261.16 ns
      Max: 105515.81 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 9834.27 lookups/sec
    Latency per lookup:
      Mean: 101685.25 ns
      Std Dev: 1190.29 ns
      Min: 98227.96 ns
      Max: 106390.79 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 9846.80 lookups/sec
    Latency per lookup:
      Mean: 101555.81 ns
      Std Dev: 1144.56 ns
      Min: 97534.52 ns
      Max: 104627.43 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 9802.78 lookups/sec
    Latency per lookup:
      Mean: 102011.93 ns
      Std Dev: 1224.86 ns
      Min: 95896.21 ns
      Max: 106591.76 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 9857.50 lookups/sec
    Latency per lookup:
      Mean: 101445.56 ns
      Std Dev: 1121.42 ns
      Min: 98074.04 ns
      Max: 105093.88 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 9824.44 lookups/sec
    Latency per lookup:
      Mean: 101786.99 ns
      Std Dev: 1170.88 ns
      Min: 98520.15 ns
      Max: 105996.74 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 9843.30 lookups/sec
    Latency per lookup:
      Mean: 101591.98 ns
      Std Dev: 1173.29 ns
      Min: 98045.96 ns
      Max: 105602.86 ns
  Overall Latency Statistics:
    Mean: 101703.48 ns
    Std Dev: 1186.45 ns
    Min: 95896.21 ns
    Max: 106591.76 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 3162 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 3802761003 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 9566535040 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 24000000 }, shards: [Shard { sum: AtomicF64 { inner: 4718586992605003776 }, count: AtomicU64 { inner: 24000000 }, buckets: [AtomicU64 { inner: 18887205 }, AtomicU64 { inner: 5087181 }, AtomicU64 { inner: 25613 }, AtomicU64 { inner: 1 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 24035 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 2391978479 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 116313489560 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Tue Mar 25 05:02:08 PM UTC 2025

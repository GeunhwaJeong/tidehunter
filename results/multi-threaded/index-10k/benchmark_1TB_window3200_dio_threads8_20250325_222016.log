Benchmark started at Tue Mar 25 10:20:16 PM UTC 2025
Running benchmark with direct I/O: on, threads: 8...
    Finished `release` profile [optimized] target(s) in 0.05s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 3200 --num-threads 8 --header-file data/bench-header-1TB-10k.dat --uniform-file data/bench-uniform-1TB-10k.dat --direct-io`
Running multithreaded benchmark with 8 threads
Run 1/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 160.66s
  Total lookups: 8000000
  End-to-end throughput: 49793.44 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6233.87 lookups/sec
    Latency per lookup:
      Mean: 160413.98 ns
      Std Dev: 504.15 ns
      Min: 158649.98 ns
      Max: 162154.43 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6251.61 lookups/sec
    Latency per lookup:
      Mean: 159958.82 ns
      Std Dev: 467.65 ns
      Min: 158524.08 ns
      Max: 162225.21 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6248.53 lookups/sec
    Latency per lookup:
      Mean: 160037.62 ns
      Std Dev: 499.07 ns
      Min: 158201.61 ns
      Max: 161761.99 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6250.04 lookups/sec
    Latency per lookup:
      Mean: 159998.90 ns
      Std Dev: 531.95 ns
      Min: 158116.25 ns
      Max: 162052.78 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6233.24 lookups/sec
    Latency per lookup:
      Mean: 160430.12 ns
      Std Dev: 521.01 ns
      Min: 158720.75 ns
      Max: 162014.45 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6224.20 lookups/sec
    Latency per lookup:
      Mean: 160663.17 ns
      Std Dev: 516.96 ns
      Min: 155620.25 ns
      Max: 162565.99 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6244.16 lookups/sec
    Latency per lookup:
      Mean: 160149.62 ns
      Std Dev: 518.88 ns
      Min: 157675.27 ns
      Max: 161838.91 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6252.23 lookups/sec
    Latency per lookup:
      Mean: 159942.91 ns
      Std Dev: 550.32 ns
      Min: 158234.86 ns
      Max: 162169.12 ns
  Overall Latency Statistics:
    Mean: 160199.39 ns
    Std Dev: 572.56 ns
    Min: 155620.25 ns
    Max: 162565.99 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 186.34s
  Total lookups: 8000000
  End-to-end throughput: 42933.03 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 5386.02 lookups/sec
    Latency per lookup:
      Mean: 185665.97 ns
      Std Dev: 11703.99 ns
      Min: 142961.64 ns
      Max: 197323.87 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 5390.01 lookups/sec
    Latency per lookup:
      Mean: 185528.57 ns
      Std Dev: 11848.50 ns
      Min: 153760.91 ns
      Max: 196511.14 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 5391.61 lookups/sec
    Latency per lookup:
      Mean: 185473.48 ns
      Std Dev: 12044.73 ns
      Min: 153403.03 ns
      Max: 198228.72 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6166.23 lookups/sec
    Latency per lookup:
      Mean: 162173.55 ns
      Std Dev: 1323.71 ns
      Min: 158223.87 ns
      Max: 174779.25 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6163.66 lookups/sec
    Latency per lookup:
      Mean: 162241.33 ns
      Std Dev: 1409.16 ns
      Min: 157559.63 ns
      Max: 175964.87 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6143.59 lookups/sec
    Latency per lookup:
      Mean: 162771.26 ns
      Std Dev: 2497.84 ns
      Min: 135960.54 ns
      Max: 170086.16 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6157.70 lookups/sec
    Latency per lookup:
      Mean: 162398.17 ns
      Std Dev: 1382.22 ns
      Min: 144469.11 ns
      Max: 168523.19 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 5366.64 lookups/sec
    Latency per lookup:
      Mean: 186336.40 ns
      Std Dev: 13125.48 ns
      Min: 132461.01 ns
      Max: 199106.42 ns
  Overall Latency Statistics:
    Mean: 174073.59 ns
    Std Dev: 14569.74 ns
    Min: 132461.01 ns
    Max: 199106.42 ns
Run 2/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 160.78s
  Total lookups: 8000000
  End-to-end throughput: 49756.45 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6219.56 lookups/sec
    Latency per lookup:
      Mean: 160782.98 ns
      Std Dev: 550.93 ns
      Min: 155366.23 ns
      Max: 162891.50 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6234.65 lookups/sec
    Latency per lookup:
      Mean: 160394.01 ns
      Std Dev: 494.10 ns
      Min: 158542.60 ns
      Max: 161944.83 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6256.74 lookups/sec
    Latency per lookup:
      Mean: 159827.66 ns
      Std Dev: 498.44 ns
      Min: 158321.88 ns
      Max: 161557.91 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6229.20 lookups/sec
    Latency per lookup:
      Mean: 160534.27 ns
      Std Dev: 490.59 ns
      Min: 158929.43 ns
      Max: 162010.21 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6229.56 lookups/sec
    Latency per lookup:
      Mean: 160525.04 ns
      Std Dev: 580.56 ns
      Min: 157987.79 ns
      Max: 162236.24 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6249.08 lookups/sec
    Latency per lookup:
      Mean: 160023.60 ns
      Std Dev: 546.37 ns
      Min: 158015.90 ns
      Max: 162082.78 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6234.31 lookups/sec
    Latency per lookup:
      Mean: 160402.56 ns
      Std Dev: 574.36 ns
      Min: 158276.11 ns
      Max: 162299.89 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6246.73 lookups/sec
    Latency per lookup:
      Mean: 160083.86 ns
      Std Dev: 569.11 ns
      Min: 158465.94 ns
      Max: 162651.48 ns
  Overall Latency Statistics:
    Mean: 160321.75 ns
    Std Dev: 615.09 ns
    Min: 155366.23 ns
    Max: 162891.50 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 189.69s
  Total lookups: 8000000
  End-to-end throughput: 42173.70 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 5275.05 lookups/sec
    Latency per lookup:
      Mean: 189571.81 ns
      Std Dev: 10463.90 ns
      Min: 142411.38 ns
      Max: 199775.62 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 5301.92 lookups/sec
    Latency per lookup:
      Mean: 188610.99 ns
      Std Dev: 9203.35 ns
      Min: 157003.75 ns
      Max: 200674.30 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6277.21 lookups/sec
    Latency per lookup:
      Mean: 159306.56 ns
      Std Dev: 1245.13 ns
      Min: 155105.67 ns
      Max: 163970.89 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 5271.72 lookups/sec
    Latency per lookup:
      Mean: 189691.39 ns
      Std Dev: 10698.04 ns
      Min: 135542.07 ns
      Max: 201498.11 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6255.97 lookups/sec
    Latency per lookup:
      Mean: 159847.19 ns
      Std Dev: 1683.30 ns
      Min: 142219.67 ns
      Max: 177898.84 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 5284.57 lookups/sec
    Latency per lookup:
      Mean: 189230.28 ns
      Std Dev: 10377.34 ns
      Min: 146215.63 ns
      Max: 200799.03 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 5306.88 lookups/sec
    Latency per lookup:
      Mean: 188434.68 ns
      Std Dev: 9368.71 ns
      Min: 165063.40 ns
      Max: 197625.75 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6276.93 lookups/sec
    Latency per lookup:
      Mean: 159313.46 ns
      Std Dev: 1265.95 ns
      Min: 154980.98 ns
      Max: 164930.64 ns
  Overall Latency Statistics:
    Mean: 178000.80 ns
    Std Dev: 16418.12 ns
    Min: 135542.07 ns
    Max: 201498.11 ns
Run 3/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 160.94s
  Total lookups: 8000000
  End-to-end throughput: 49706.60 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6233.22 lookups/sec
    Latency per lookup:
      Mean: 160430.79 ns
      Std Dev: 513.94 ns
      Min: 158055.56 ns
      Max: 161862.71 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6234.42 lookups/sec
    Latency per lookup:
      Mean: 160399.92 ns
      Std Dev: 630.60 ns
      Min: 158768.68 ns
      Max: 162486.80 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6243.34 lookups/sec
    Latency per lookup:
      Mean: 160170.61 ns
      Std Dev: 511.91 ns
      Min: 158375.60 ns
      Max: 161841.46 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6238.62 lookups/sec
    Latency per lookup:
      Mean: 160291.99 ns
      Std Dev: 718.66 ns
      Min: 158531.08 ns
      Max: 162601.11 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6238.33 lookups/sec
    Latency per lookup:
      Mean: 160299.39 ns
      Std Dev: 463.87 ns
      Min: 158946.09 ns
      Max: 161832.33 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6242.34 lookups/sec
    Latency per lookup:
      Mean: 160196.25 ns
      Std Dev: 478.05 ns
      Min: 158651.61 ns
      Max: 161601.18 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6213.34 lookups/sec
    Latency per lookup:
      Mean: 160944.12 ns
      Std Dev: 673.47 ns
      Min: 155732.45 ns
      Max: 163276.87 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6221.84 lookups/sec
    Latency per lookup:
      Mean: 160724.24 ns
      Std Dev: 699.01 ns
      Min: 157876.08 ns
      Max: 163042.04 ns
  Overall Latency Statistics:
    Mean: 160432.16 ns
    Std Dev: 645.75 ns
    Min: 155732.45 ns
    Max: 163276.87 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 183.26s
  Total lookups: 8000000
  End-to-end throughput: 43654.28 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6042.02 lookups/sec
    Latency per lookup:
      Mean: 165507.66 ns
      Std Dev: 1430.29 ns
      Min: 152669.74 ns
      Max: 170790.15 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6041.54 lookups/sec
    Latency per lookup:
      Mean: 165520.66 ns
      Std Dev: 1450.30 ns
      Min: 149513.55 ns
      Max: 174358.76 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 5465.36 lookups/sec
    Latency per lookup:
      Mean: 182970.49 ns
      Std Dev: 15051.61 ns
      Min: 141045.98 ns
      Max: 192764.98 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 5456.79 lookups/sec
    Latency per lookup:
      Mean: 183257.80 ns
      Std Dev: 15238.69 ns
      Min: 134209.49 ns
      Max: 193316.84 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6047.49 lookups/sec
    Latency per lookup:
      Mean: 165357.74 ns
      Std Dev: 1428.17 ns
      Min: 160718.11 ns
      Max: 179494.80 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6045.57 lookups/sec
    Latency per lookup:
      Mean: 165410.33 ns
      Std Dev: 1366.55 ns
      Min: 161035.11 ns
      Max: 169710.48 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6029.81 lookups/sec
    Latency per lookup:
      Mean: 165842.67 ns
      Std Dev: 2266.41 ns
      Min: 127197.37 ns
      Max: 170533.16 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6036.15 lookups/sec
    Latency per lookup:
      Mean: 165668.63 ns
      Std Dev: 1855.48 ns
      Min: 131289.99 ns
      Max: 172475.58 ns
  Overall Latency Statistics:
    Mean: 169942.00 ns
    Std Dev: 10829.85 ns
    Min: 127197.37 ns
    Max: 193316.84 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 2775 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 3799839392 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 9566749480 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 24000000 }, shards: [Shard { sum: AtomicF64 { inner: 4717207661173538816 }, count: AtomicU64 { inner: 24000000 }, buckets: [AtomicU64 { inner: 24000000 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 1129484 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 4022516832 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 2826245813480 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Tue Mar 25 10:37:37 PM UTC 2025

Benchmark started at Thu Mar 27 09:43:27 AM UTC 2025
Running benchmark with direct I/O: off, threads: 8...
    Finished `release` profile [optimized] target(s) in 0.17s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 400 --num-threads 8 --header-file data/bench-header-1TB-1M.dat --uniform-file data/bench-uniform-1TB-1M.dat`
Running multithreaded benchmark with 8 threads
Run 1/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 137.97s
  Total lookups: 8000000
  End-to-end throughput: 57985.08 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 7251.70 lookups/sec
    Latency per lookup:
      Mean: 137898.77 ns
      Std Dev: 14682.44 ns
      Min: 97336.71 ns
      Max: 216216.06 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7248.16 lookups/sec
    Latency per lookup:
      Mean: 137966.12 ns
      Std Dev: 14877.66 ns
      Min: 98769.80 ns
      Max: 214357.05 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7306.06 lookups/sec
    Latency per lookup:
      Mean: 136872.65 ns
      Std Dev: 14952.52 ns
      Min: 120069.50 ns
      Max: 229253.17 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7290.03 lookups/sec
    Latency per lookup:
      Mean: 137173.57 ns
      Std Dev: 14587.87 ns
      Min: 118648.34 ns
      Max: 214948.58 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 7270.90 lookups/sec
    Latency per lookup:
      Mean: 137534.48 ns
      Std Dev: 14606.04 ns
      Min: 107611.53 ns
      Max: 217132.52 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7262.25 lookups/sec
    Latency per lookup:
      Mean: 137698.42 ns
      Std Dev: 14863.54 ns
      Min: 103471.65 ns
      Max: 231020.91 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 7291.96 lookups/sec
    Latency per lookup:
      Mean: 137137.29 ns
      Std Dev: 14575.14 ns
      Min: 119151.77 ns
      Max: 215857.18 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 7287.35 lookups/sec
    Latency per lookup:
      Mean: 137224.12 ns
      Std Dev: 14690.30 ns
      Min: 119718.98 ns
      Max: 220170.15 ns
  Overall Latency Statistics:
    Mean: 137438.18 ns
    Std Dev: 14734.73 ns
    Min: 97336.71 ns
    Max: 231020.91 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 169.70s
  Total lookups: 8000000
  End-to-end throughput: 47142.83 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 5920.68 lookups/sec
    Latency per lookup:
      Mean: 168899.55 ns
      Std Dev: 21442.21 ns
      Min: 142048.11 ns
      Max: 272484.57 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 5915.08 lookups/sec
    Latency per lookup:
      Mean: 169059.36 ns
      Std Dev: 21609.17 ns
      Min: 138751.39 ns
      Max: 278894.10 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 5927.78 lookups/sec
    Latency per lookup:
      Mean: 168697.33 ns
      Std Dev: 21839.17 ns
      Min: 145730.33 ns
      Max: 278756.20 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 5932.97 lookups/sec
    Latency per lookup:
      Mean: 168549.69 ns
      Std Dev: 21754.56 ns
      Min: 144885.16 ns
      Max: 275829.43 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 5904.05 lookups/sec
    Latency per lookup:
      Mean: 169375.34 ns
      Std Dev: 21673.74 ns
      Min: 130216.92 ns
      Max: 273113.01 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 5912.10 lookups/sec
    Latency per lookup:
      Mean: 169144.65 ns
      Std Dev: 21700.42 ns
      Min: 138026.11 ns
      Max: 271258.97 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 5935.08 lookups/sec
    Latency per lookup:
      Mean: 168489.61 ns
      Std Dev: 21812.37 ns
      Min: 141559.04 ns
      Max: 283494.57 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 5892.88 lookups/sec
    Latency per lookup:
      Mean: 169696.42 ns
      Std Dev: 21794.05 ns
      Min: 130583.38 ns
      Max: 281998.64 ns
  Overall Latency Statistics:
    Mean: 168988.99 ns
    Std Dev: 21707.05 ns
    Min: 130216.92 ns
    Max: 283494.57 ns
Run 2/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 137.56s
  Total lookups: 8000000
  End-to-end throughput: 58155.07 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 7289.03 lookups/sec
    Latency per lookup:
      Mean: 137192.39 ns
      Std Dev: 15681.43 ns
      Min: 118359.67 ns
      Max: 231008.00 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7274.57 lookups/sec
    Latency per lookup:
      Mean: 137465.08 ns
      Std Dev: 15727.33 ns
      Min: 109510.65 ns
      Max: 230119.08 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7315.32 lookups/sec
    Latency per lookup:
      Mean: 136699.49 ns
      Std Dev: 15747.45 ns
      Min: 119929.42 ns
      Max: 230370.30 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7269.40 lookups/sec
    Latency per lookup:
      Mean: 137563.01 ns
      Std Dev: 15914.26 ns
      Min: 96158.09 ns
      Max: 228013.40 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 7276.14 lookups/sec
    Latency per lookup:
      Mean: 137435.44 ns
      Std Dev: 15761.39 ns
      Min: 115022.12 ns
      Max: 229661.75 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7278.96 lookups/sec
    Latency per lookup:
      Mean: 137382.20 ns
      Std Dev: 15711.85 ns
      Min: 114525.95 ns
      Max: 230897.05 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 7288.67 lookups/sec
    Latency per lookup:
      Mean: 137199.24 ns
      Std Dev: 15823.26 ns
      Min: 118605.93 ns
      Max: 230047.13 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 7287.73 lookups/sec
    Latency per lookup:
      Mean: 137216.86 ns
      Std Dev: 15746.35 ns
      Min: 118142.52 ns
      Max: 229426.57 ns
  Overall Latency Statistics:
    Mean: 137269.21 ns
    Std Dev: 15766.31 ns
    Min: 96158.09 ns
    Max: 231008.00 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 165.72s
  Total lookups: 8000000
  End-to-end throughput: 48272.87 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6126.86 lookups/sec
    Latency per lookup:
      Mean: 163215.62 ns
      Std Dev: 14658.00 ns
      Min: 141493.36 ns
      Max: 234150.00 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6076.79 lookups/sec
    Latency per lookup:
      Mean: 164560.49 ns
      Std Dev: 14336.17 ns
      Min: 136422.00 ns
      Max: 231855.16 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6102.39 lookups/sec
    Latency per lookup:
      Mean: 163870.18 ns
      Std Dev: 14061.63 ns
      Min: 142218.53 ns
      Max: 232868.72 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6085.19 lookups/sec
    Latency per lookup:
      Mean: 164333.44 ns
      Std Dev: 14555.72 ns
      Min: 139849.29 ns
      Max: 232250.92 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6113.37 lookups/sec
    Latency per lookup:
      Mean: 163575.93 ns
      Std Dev: 14392.16 ns
      Min: 144775.44 ns
      Max: 232290.91 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6034.12 lookups/sec
    Latency per lookup:
      Mean: 165724.25 ns
      Std Dev: 14740.54 ns
      Min: 125819.65 ns
      Max: 231041.09 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6079.82 lookups/sec
    Latency per lookup:
      Mean: 164478.62 ns
      Std Dev: 13866.69 ns
      Min: 139339.79 ns
      Max: 235065.32 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6085.20 lookups/sec
    Latency per lookup:
      Mean: 164333.18 ns
      Std Dev: 14595.21 ns
      Min: 142261.49 ns
      Max: 227668.77 ns
  Overall Latency Statistics:
    Mean: 164261.46 ns
    Std Dev: 14420.94 ns
    Min: 125819.65 ns
    Max: 235065.32 ns
Run 3/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 138.10s
  Total lookups: 8000000
  End-to-end throughput: 57928.71 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 7306.12 lookups/sec
    Latency per lookup:
      Mean: 136871.49 ns
      Std Dev: 15697.25 ns
      Min: 118756.44 ns
      Max: 209730.84 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7246.86 lookups/sec
    Latency per lookup:
      Mean: 137990.73 ns
      Std Dev: 16277.02 ns
      Min: 105279.21 ns
      Max: 219565.64 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7264.22 lookups/sec
    Latency per lookup:
      Mean: 137660.96 ns
      Std Dev: 16023.06 ns
      Min: 103534.90 ns
      Max: 207561.28 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7288.90 lookups/sec
    Latency per lookup:
      Mean: 137194.84 ns
      Std Dev: 15961.39 ns
      Min: 117466.80 ns
      Max: 208410.57 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 7298.21 lookups/sec
    Latency per lookup:
      Mean: 137019.87 ns
      Std Dev: 15782.40 ns
      Min: 117893.96 ns
      Max: 207025.81 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7241.10 lookups/sec
    Latency per lookup:
      Mean: 138100.49 ns
      Std Dev: 16333.62 ns
      Min: 95067.03 ns
      Max: 224229.67 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 7269.15 lookups/sec
    Latency per lookup:
      Mean: 137567.70 ns
      Std Dev: 15895.78 ns
      Min: 116053.09 ns
      Max: 209247.32 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 7251.98 lookups/sec
    Latency per lookup:
      Mean: 137893.33 ns
      Std Dev: 16174.62 ns
      Min: 103670.98 ns
      Max: 210569.93 ns
  Overall Latency Statistics:
    Mean: 137537.43 ns
    Std Dev: 16025.41 ns
    Min: 95067.03 ns
    Max: 224229.67 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 165.77s
  Total lookups: 8000000
  End-to-end throughput: 48259.94 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6039.84 lookups/sec
    Latency per lookup:
      Mean: 165567.35 ns
      Std Dev: 14533.81 ns
      Min: 134354.80 ns
      Max: 254777.88 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6055.35 lookups/sec
    Latency per lookup:
      Mean: 165143.13 ns
      Std Dev: 13759.28 ns
      Min: 133432.71 ns
      Max: 240365.64 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6088.66 lookups/sec
    Latency per lookup:
      Mean: 164239.82 ns
      Std Dev: 13804.52 ns
      Min: 144449.29 ns
      Max: 234078.65 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6068.12 lookups/sec
    Latency per lookup:
      Mean: 164795.60 ns
      Std Dev: 14143.88 ns
      Min: 144830.97 ns
      Max: 252384.03 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6032.50 lookups/sec
    Latency per lookup:
      Mean: 165768.64 ns
      Std Dev: 14383.23 ns
      Min: 128235.03 ns
      Max: 258135.77 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6035.28 lookups/sec
    Latency per lookup:
      Mean: 165692.49 ns
      Std Dev: 13916.17 ns
      Min: 130767.72 ns
      Max: 242860.10 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6062.49 lookups/sec
    Latency per lookup:
      Mean: 164948.79 ns
      Std Dev: 14123.20 ns
      Min: 143137.32 ns
      Max: 244426.98 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6073.72 lookups/sec
    Latency per lookup:
      Mean: 164643.75 ns
      Std Dev: 14408.47 ns
      Min: 141203.24 ns
      Max: 239320.14 ns
  Overall Latency Statistics:
    Mean: 165099.95 ns
    Std Dev: 14145.90 ns
    Min: 128235.03 ns
    Max: 258135.77 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 16196 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 3260501211 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 937692577440 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 24000000 }, shards: [Shard { sum: AtomicF64 { inner: 4720887913691217920 }, count: AtomicU64 { inner: 24000000 }, buckets: [AtomicU64 { inner: 10108253 }, AtomicU64 { inner: 10494779 }, AtomicU64 { inner: 2873140 }, AtomicU64 { inner: 473344 }, AtomicU64 { inner: 47935 }, AtomicU64 { inner: 2539 }, AtomicU64 { inner: 10 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 11185 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 3939797688 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 669811252920 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Thu Mar 27 09:58:42 AM UTC 2025

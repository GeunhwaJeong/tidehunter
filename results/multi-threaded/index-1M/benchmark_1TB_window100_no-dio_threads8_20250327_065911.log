Benchmark started at Thu Mar 27 06:59:11 AM UTC 2025
Running benchmark with direct I/O: off, threads: 8...
    Finished `release` profile [optimized] target(s) in 0.17s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 100 --num-threads 8 --header-file data/bench-header-1TB-1M.dat --uniform-file data/bench-uniform-1TB-1M.dat`
Running multithreaded benchmark with 8 threads
Run 1/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 132.83s
  Total lookups: 8000000
  End-to-end throughput: 60227.62 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 7553.81 lookups/sec
    Latency per lookup:
      Mean: 132383.52 ns
      Std Dev: 7910.21 ns
      Min: 118844.17 ns
      Max: 194293.34 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7536.78 lookups/sec
    Latency per lookup:
      Mean: 132682.73 ns
      Std Dev: 7978.18 ns
      Min: 104908.91 ns
      Max: 193736.31 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7567.34 lookups/sec
    Latency per lookup:
      Mean: 132146.81 ns
      Std Dev: 7797.36 ns
      Min: 120687.77 ns
      Max: 190618.13 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7529.51 lookups/sec
    Latency per lookup:
      Mean: 132810.73 ns
      Std Dev: 7974.64 ns
      Min: 97281.56 ns
      Max: 192362.38 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 7545.23 lookups/sec
    Latency per lookup:
      Mean: 132534.15 ns
      Std Dev: 7924.83 ns
      Min: 115191.49 ns
      Max: 193724.53 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7547.58 lookups/sec
    Latency per lookup:
      Mean: 132492.74 ns
      Std Dev: 7859.72 ns
      Min: 120024.67 ns
      Max: 192462.76 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 7542.74 lookups/sec
    Latency per lookup:
      Mean: 132577.82 ns
      Std Dev: 7954.52 ns
      Min: 109195.47 ns
      Max: 196986.23 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 7528.49 lookups/sec
    Latency per lookup:
      Mean: 132828.79 ns
      Std Dev: 8089.95 ns
      Min: 98921.32 ns
      Max: 193500.46 ns
  Overall Latency Statistics:
    Mean: 132557.16 ns
    Std Dev: 7939.41 ns
    Min: 97281.56 ns
    Max: 196986.23 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 240.31s
  Total lookups: 8000000
  End-to-end throughput: 33290.95 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 4192.40 lookups/sec
    Latency per lookup:
      Mean: 238526.79 ns
      Std Dev: 21489.11 ns
      Min: 200498.42 ns
      Max: 296148.51 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 4193.76 lookups/sec
    Latency per lookup:
      Mean: 238449.34 ns
      Std Dev: 20981.89 ns
      Min: 202662.64 ns
      Max: 293962.61 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 4193.80 lookups/sec
    Latency per lookup:
      Mean: 238447.48 ns
      Std Dev: 20375.08 ns
      Min: 204555.32 ns
      Max: 291785.27 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 4172.84 lookups/sec
    Latency per lookup:
      Mean: 239644.77 ns
      Std Dev: 20709.96 ns
      Min: 196964.10 ns
      Max: 296591.89 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 4161.38 lookups/sec
    Latency per lookup:
      Mean: 240305.04 ns
      Std Dev: 21430.90 ns
      Min: 186363.70 ns
      Max: 294581.92 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 4173.95 lookups/sec
    Latency per lookup:
      Mean: 239580.97 ns
      Std Dev: 21266.89 ns
      Min: 190613.88 ns
      Max: 293811.39 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 4182.99 lookups/sec
    Latency per lookup:
      Mean: 239063.59 ns
      Std Dev: 21410.57 ns
      Min: 202665.93 ns
      Max: 294230.40 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 4185.16 lookups/sec
    Latency per lookup:
      Mean: 238939.60 ns
      Std Dev: 20813.60 ns
      Min: 200085.41 ns
      Max: 295617.14 ns
  Overall Latency Statistics:
    Mean: 239119.70 ns
    Std Dev: 21072.59 ns
    Min: 186363.70 ns
    Max: 296591.89 ns
Run 2/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 130.34s
  Total lookups: 8000000
  End-to-end throughput: 61380.22 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 7676.26 lookups/sec
    Latency per lookup:
      Mean: 130271.69 ns
      Std Dev: 4961.14 ns
      Min: 102339.51 ns
      Max: 172707.27 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7706.72 lookups/sec
    Latency per lookup:
      Mean: 129756.83 ns
      Std Dev: 4434.20 ns
      Min: 115483.71 ns
      Max: 164704.54 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7681.67 lookups/sec
    Latency per lookup:
      Mean: 130180.10 ns
      Std Dev: 5383.22 ns
      Min: 104017.22 ns
      Max: 178171.76 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7725.60 lookups/sec
    Latency per lookup:
      Mean: 129439.74 ns
      Std Dev: 4169.21 ns
      Min: 117221.44 ns
      Max: 160093.80 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 7689.95 lookups/sec
    Latency per lookup:
      Mean: 130039.88 ns
      Std Dev: 4716.18 ns
      Min: 111250.01 ns
      Max: 167288.46 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7689.48 lookups/sec
    Latency per lookup:
      Mean: 130047.85 ns
      Std Dev: 4789.12 ns
      Min: 113155.46 ns
      Max: 171690.19 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 7740.53 lookups/sec
    Latency per lookup:
      Mean: 129190.04 ns
      Std Dev: 4551.46 ns
      Min: 119821.70 ns
      Max: 167798.95 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 7672.55 lookups/sec
    Latency per lookup:
      Mean: 130334.77 ns
      Std Dev: 4944.28 ns
      Min: 99190.26 ns
      Max: 163731.18 ns
  Overall Latency Statistics:
    Mean: 129907.61 ns
    Std Dev: 4771.78 ns
    Min: 99190.26 ns
    Max: 178171.76 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 240.79s
  Total lookups: 8000000
  End-to-end throughput: 33224.39 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 4186.61 lookups/sec
    Latency per lookup:
      Mean: 238856.72 ns
      Std Dev: 22065.32 ns
      Min: 201571.11 ns
      Max: 294248.72 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 4173.24 lookups/sec
    Latency per lookup:
      Mean: 239621.80 ns
      Std Dev: 21606.14 ns
      Min: 203778.75 ns
      Max: 302931.43 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 4184.60 lookups/sec
    Latency per lookup:
      Mean: 238971.56 ns
      Std Dev: 21509.00 ns
      Min: 201936.92 ns
      Max: 296629.87 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 4153.05 lookups/sec
    Latency per lookup:
      Mean: 240786.76 ns
      Std Dev: 22293.20 ns
      Min: 190616.14 ns
      Max: 299604.40 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 4154.35 lookups/sec
    Latency per lookup:
      Mean: 240711.61 ns
      Std Dev: 21592.70 ns
      Min: 200109.05 ns
      Max: 299534.44 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 4158.80 lookups/sec
    Latency per lookup:
      Mean: 240453.91 ns
      Std Dev: 21881.98 ns
      Min: 192351.21 ns
      Max: 298502.55 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 4178.41 lookups/sec
    Latency per lookup:
      Mean: 239325.21 ns
      Std Dev: 21139.49 ns
      Min: 201957.42 ns
      Max: 295499.99 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 4154.81 lookups/sec
    Latency per lookup:
      Mean: 240684.64 ns
      Std Dev: 22022.78 ns
      Min: 196385.08 ns
      Max: 299480.29 ns
  Overall Latency Statistics:
    Mean: 239926.52 ns
    Std Dev: 21780.14 ns
    Min: 190616.14 ns
    Max: 302931.43 ns
Run 3/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 130.69s
  Total lookups: 8000000
  End-to-end throughput: 61211.99 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 7661.19 lookups/sec
    Latency per lookup:
      Mean: 130528.10 ns
      Std Dev: 5681.23 ns
      Min: 100958.32 ns
      Max: 197592.24 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7689.25 lookups/sec
    Latency per lookup:
      Mean: 130051.69 ns
      Std Dev: 5498.06 ns
      Min: 119088.69 ns
      Max: 192765.69 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7678.52 lookups/sec
    Latency per lookup:
      Mean: 130233.42 ns
      Std Dev: 5630.94 ns
      Min: 114259.39 ns
      Max: 195687.68 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7651.51 lookups/sec
    Latency per lookup:
      Mean: 130693.10 ns
      Std Dev: 6089.24 ns
      Min: 94269.26 ns
      Max: 197772.58 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 7679.85 lookups/sec
    Latency per lookup:
      Mean: 130210.90 ns
      Std Dev: 5743.41 ns
      Min: 118768.46 ns
      Max: 197992.95 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7692.73 lookups/sec
    Latency per lookup:
      Mean: 129992.83 ns
      Std Dev: 5613.04 ns
      Min: 118870.99 ns
      Max: 193720.72 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 7697.04 lookups/sec
    Latency per lookup:
      Mean: 129920.08 ns
      Std Dev: 5569.14 ns
      Min: 118292.39 ns
      Max: 193441.17 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 7666.39 lookups/sec
    Latency per lookup:
      Mean: 130439.42 ns
      Std Dev: 5702.28 ns
      Min: 102138.92 ns
      Max: 197364.67 ns
  Overall Latency Statistics:
    Mean: 130258.69 ns
    Std Dev: 5699.13 ns
    Min: 94269.26 ns
    Max: 197992.95 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 240.69s
  Total lookups: 8000000
  End-to-end throughput: 33237.16 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 4172.14 lookups/sec
    Latency per lookup:
      Mean: 239685.34 ns
      Std Dev: 22207.72 ns
      Min: 202840.64 ns
      Max: 304570.42 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 4193.51 lookups/sec
    Latency per lookup:
      Mean: 238463.97 ns
      Std Dev: 22080.31 ns
      Min: 199341.88 ns
      Max: 299091.15 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 4178.29 lookups/sec
    Latency per lookup:
      Mean: 239332.16 ns
      Std Dev: 21634.88 ns
      Min: 199882.32 ns
      Max: 298769.56 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 4162.04 lookups/sec
    Latency per lookup:
      Mean: 240266.95 ns
      Std Dev: 21768.95 ns
      Min: 197092.30 ns
      Max: 301772.79 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 4154.65 lookups/sec
    Latency per lookup:
      Mean: 240694.23 ns
      Std Dev: 22182.60 ns
      Min: 194407.57 ns
      Max: 310192.09 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 4167.57 lookups/sec
    Latency per lookup:
      Mean: 239948.23 ns
      Std Dev: 21554.71 ns
      Min: 203581.48 ns
      Max: 296144.18 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 4176.43 lookups/sec
    Latency per lookup:
      Mean: 239438.76 ns
      Std Dev: 21839.28 ns
      Min: 203303.31 ns
      Max: 298529.24 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 4165.76 lookups/sec
    Latency per lookup:
      Mean: 240052.21 ns
      Std Dev: 22061.21 ns
      Min: 203710.34 ns
      Max: 297297.70 ns
  Overall Latency Statistics:
    Mean: 239735.23 ns
    Std Dev: 21926.64 ns
    Min: 194407.57 ns
    Max: 310192.09 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 14169 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 3104600075 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 937694987960 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 24000000 }, shards: [Shard { sum: AtomicF64 { inner: 4726469081153142784 }, count: AtomicU64 { inner: 24000000 }, buckets: [AtomicU64 { inner: 2857133 }, AtomicU64 { inner: 5014473 }, AtomicU64 { inner: 4128885 }, AtomicU64 { inner: 3292859 }, AtomicU64 { inner: 2557804 }, AtomicU64 { inner: 1931995 }, AtomicU64 { inner: 1400575 }, AtomicU64 { inner: 987364 }, AtomicU64 { inner: 673125 }, AtomicU64 { inner: 449561 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 14194 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 5661312151 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 399150325320 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Thu Mar 27 07:17:47 AM UTC 2025

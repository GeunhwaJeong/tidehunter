Benchmark started at Thu Mar 27 03:53:41 AM UTC 2025
Running benchmark with direct I/O: on, threads: 8...
    Finished `release` profile [optimized] target(s) in 0.06s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 1600 --num-threads 8 --header-file data/bench-header-1TB-1M.dat --uniform-file data/bench-uniform-1TB-1M.dat --direct-io`
Running multithreaded benchmark with 8 threads
Run 1/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 188.76s
  Total lookups: 8000000
  End-to-end throughput: 42382.39 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 5320.31 lookups/sec
    Latency per lookup:
      Mean: 187958.90 ns
      Std Dev: 925.12 ns
      Min: 185501.40 ns
      Max: 191129.79 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 5309.30 lookups/sec
    Latency per lookup:
      Mean: 188348.87 ns
      Std Dev: 879.11 ns
      Min: 181012.76 ns
      Max: 191173.40 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 5300.72 lookups/sec
    Latency per lookup:
      Mean: 188653.73 ns
      Std Dev: 1158.49 ns
      Min: 176096.91 ns
      Max: 191901.79 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 5297.81 lookups/sec
    Latency per lookup:
      Mean: 188757.24 ns
      Std Dev: 1102.99 ns
      Min: 172592.37 ns
      Max: 192150.79 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 5311.72 lookups/sec
    Latency per lookup:
      Mean: 188262.95 ns
      Std Dev: 969.45 ns
      Min: 183062.59 ns
      Max: 191065.49 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 5311.70 lookups/sec
    Latency per lookup:
      Mean: 188263.70 ns
      Std Dev: 870.88 ns
      Min: 183495.89 ns
      Max: 191186.10 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 5300.66 lookups/sec
    Latency per lookup:
      Mean: 188655.60 ns
      Std Dev: 1152.45 ns
      Min: 176851.76 ns
      Max: 191599.70 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 5318.12 lookups/sec
    Latency per lookup:
      Mean: 188036.39 ns
      Std Dev: 889.51 ns
      Min: 185312.09 ns
      Max: 191295.51 ns
  Overall Latency Statistics:
    Mean: 188367.17 ns
    Std Dev: 1038.05 ns
    Min: 172592.37 ns
    Max: 192150.79 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 132.79s
  Total lookups: 8000000
  End-to-end throughput: 60244.98 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 7535.40 lookups/sec
    Latency per lookup:
      Mean: 132707.00 ns
      Std Dev: 1747.54 ns
      Min: 109580.01 ns
      Max: 137203.40 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7556.77 lookups/sec
    Latency per lookup:
      Mean: 132331.62 ns
      Std Dev: 1364.86 ns
      Min: 127959.29 ns
      Max: 136987.82 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7548.73 lookups/sec
    Latency per lookup:
      Mean: 132472.56 ns
      Std Dev: 1386.27 ns
      Min: 120545.04 ns
      Max: 137040.56 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7530.63 lookups/sec
    Latency per lookup:
      Mean: 132790.93 ns
      Std Dev: 1835.79 ns
      Min: 105022.31 ns
      Max: 136944.59 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 7558.65 lookups/sec
    Latency per lookup:
      Mean: 132298.74 ns
      Std Dev: 1397.98 ns
      Min: 128072.96 ns
      Max: 136890.88 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7537.22 lookups/sec
    Latency per lookup:
      Mean: 132674.96 ns
      Std Dev: 1660.86 ns
      Min: 111704.66 ns
      Max: 136930.78 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 7544.24 lookups/sec
    Latency per lookup:
      Mean: 132551.48 ns
      Std Dev: 1446.44 ns
      Min: 118900.96 ns
      Max: 136663.70 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 7561.53 lookups/sec
    Latency per lookup:
      Mean: 132248.43 ns
      Std Dev: 1340.14 ns
      Min: 127781.96 ns
      Max: 137361.87 ns
  Overall Latency Statistics:
    Mean: 132509.47 ns
    Std Dev: 1545.26 ns
    Min: 105022.31 ns
    Max: 137361.87 ns
Run 2/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 189.28s
  Total lookups: 8000000
  End-to-end throughput: 42264.88 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 5320.41 lookups/sec
    Latency per lookup:
      Mean: 187955.54 ns
      Std Dev: 833.06 ns
      Min: 185491.68 ns
      Max: 191224.03 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 5294.13 lookups/sec
    Latency per lookup:
      Mean: 188888.50 ns
      Std Dev: 1356.55 ns
      Min: 177791.92 ns
      Max: 193023.09 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 5283.12 lookups/sec
    Latency per lookup:
      Mean: 189282.20 ns
      Std Dev: 1409.03 ns
      Min: 169748.11 ns
      Max: 192288.85 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 5293.65 lookups/sec
    Latency per lookup:
      Mean: 188905.43 ns
      Std Dev: 1014.30 ns
      Min: 177763.46 ns
      Max: 191302.61 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 5301.25 lookups/sec
    Latency per lookup:
      Mean: 188634.68 ns
      Std Dev: 982.81 ns
      Min: 180247.59 ns
      Max: 192856.08 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 5308.12 lookups/sec
    Latency per lookup:
      Mean: 188390.56 ns
      Std Dev: 1239.64 ns
      Min: 181961.19 ns
      Max: 191678.14 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 5305.81 lookups/sec
    Latency per lookup:
      Mean: 188472.56 ns
      Std Dev: 1210.96 ns
      Min: 182712.50 ns
      Max: 192125.46 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 5322.96 lookups/sec
    Latency per lookup:
      Mean: 187865.47 ns
      Std Dev: 893.19 ns
      Min: 185350.53 ns
      Max: 190793.36 ns
  Overall Latency Statistics:
    Mean: 188549.37 ns
    Std Dev: 1222.33 ns
    Min: 169748.11 ns
    Max: 193023.09 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 132.95s
  Total lookups: 8000000
  End-to-end throughput: 60172.21 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 7552.46 lookups/sec
    Latency per lookup:
      Mean: 132407.16 ns
      Std Dev: 1450.87 ns
      Min: 121718.17 ns
      Max: 137076.17 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7545.52 lookups/sec
    Latency per lookup:
      Mean: 132528.98 ns
      Std Dev: 1591.26 ns
      Min: 107279.13 ns
      Max: 137794.43 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7558.31 lookups/sec
    Latency per lookup:
      Mean: 132304.69 ns
      Std Dev: 1335.52 ns
      Min: 127583.75 ns
      Max: 136541.81 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7521.54 lookups/sec
    Latency per lookup:
      Mean: 132951.48 ns
      Std Dev: 2390.00 ns
      Min: 104374.46 ns
      Max: 138001.63 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 7568.76 lookups/sec
    Latency per lookup:
      Mean: 132121.97 ns
      Std Dev: 1331.16 ns
      Min: 127195.23 ns
      Max: 135652.44 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7553.32 lookups/sec
    Latency per lookup:
      Mean: 132392.20 ns
      Std Dev: 1389.07 ns
      Min: 124872.02 ns
      Max: 136620.29 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 7553.19 lookups/sec
    Latency per lookup:
      Mean: 132394.33 ns
      Std Dev: 1356.30 ns
      Min: 123289.81 ns
      Max: 136325.30 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 7556.60 lookups/sec
    Latency per lookup:
      Mean: 132334.71 ns
      Std Dev: 1369.21 ns
      Min: 127286.80 ns
      Max: 136455.86 ns
  Overall Latency Statistics:
    Mean: 132429.44 ns
    Std Dev: 1579.29 ns
    Min: 104374.46 ns
    Max: 138001.63 ns
Run 3/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 188.67s
  Total lookups: 8000000
  End-to-end throughput: 42401.31 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 5309.09 lookups/sec
    Latency per lookup:
      Mean: 188356.32 ns
      Std Dev: 823.59 ns
      Min: 185112.07 ns
      Max: 190718.21 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 5308.21 lookups/sec
    Latency per lookup:
      Mean: 188387.39 ns
      Std Dev: 819.72 ns
      Min: 183259.18 ns
      Max: 191238.89 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 5304.25 lookups/sec
    Latency per lookup:
      Mean: 188528.00 ns
      Std Dev: 915.72 ns
      Min: 176770.76 ns
      Max: 191145.03 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 5300.17 lookups/sec
    Latency per lookup:
      Mean: 188673.15 ns
      Std Dev: 994.31 ns
      Min: 174257.54 ns
      Max: 191218.87 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 5322.08 lookups/sec
    Latency per lookup:
      Mean: 187896.50 ns
      Std Dev: 791.81 ns
      Min: 185610.00 ns
      Max: 190356.36 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 5308.24 lookups/sec
    Latency per lookup:
      Mean: 188386.36 ns
      Std Dev: 855.23 ns
      Min: 182851.38 ns
      Max: 191090.11 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 5301.03 lookups/sec
    Latency per lookup:
      Mean: 188642.48 ns
      Std Dev: 964.68 ns
      Min: 176000.17 ns
      Max: 191079.61 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 5321.87 lookups/sec
    Latency per lookup:
      Mean: 187903.99 ns
      Std Dev: 812.11 ns
      Min: 185680.17 ns
      Max: 190366.09 ns
  Overall Latency Statistics:
    Mean: 188346.77 ns
    Std Dev: 918.89 ns
    Min: 174257.54 ns
    Max: 191238.89 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 132.92s
  Total lookups: 8000000
  End-to-end throughput: 60186.69 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 7540.98 lookups/sec
    Latency per lookup:
      Mean: 132608.67 ns
      Std Dev: 1623.94 ns
      Min: 113384.25 ns
      Max: 136647.31 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7559.74 lookups/sec
    Latency per lookup:
      Mean: 132279.63 ns
      Std Dev: 1385.47 ns
      Min: 127568.05 ns
      Max: 136291.98 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7550.70 lookups/sec
    Latency per lookup:
      Mean: 132438.07 ns
      Std Dev: 1499.63 ns
      Min: 116240.21 ns
      Max: 137125.47 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7536.85 lookups/sec
    Latency per lookup:
      Mean: 132681.38 ns
      Std Dev: 1714.85 ns
      Min: 110525.53 ns
      Max: 138177.25 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 7556.97 lookups/sec
    Latency per lookup:
      Mean: 132328.13 ns
      Std Dev: 1340.19 ns
      Min: 125920.39 ns
      Max: 136561.20 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7554.92 lookups/sec
    Latency per lookup:
      Mean: 132364.15 ns
      Std Dev: 1285.11 ns
      Min: 123145.41 ns
      Max: 136612.88 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 7523.35 lookups/sec
    Latency per lookup:
      Mean: 132919.48 ns
      Std Dev: 2292.07 ns
      Min: 104214.28 ns
      Max: 137310.71 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 7570.76 lookups/sec
    Latency per lookup:
      Mean: 132087.14 ns
      Std Dev: 1308.60 ns
      Min: 127853.51 ns
      Max: 135877.44 ns
  Overall Latency Statistics:
    Mean: 132463.33 ns
    Std Dev: 1606.26 ns
    Min: 104214.28 ns
    Max: 138177.25 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 1285829 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 4463202399 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 937687448960 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 24000000 }, shards: [Shard { sum: AtomicF64 { inner: 4717586233281216512 }, count: AtomicU64 { inner: 24000000 }, buckets: [AtomicU64 { inner: 22589709 }, AtomicU64 { inner: 1410291 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 1389326 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 3128014746 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 1625638832920 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Thu Mar 27 04:09:46 AM UTC 2025

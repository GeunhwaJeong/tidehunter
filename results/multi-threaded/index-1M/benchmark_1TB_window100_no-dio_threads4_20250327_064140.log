Benchmark started at Thu Mar 27 06:41:40 AM UTC 2025
Running benchmark with direct I/O: off, threads: 4...
    Finished `release` profile [optimized] target(s) in 0.17s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 100 --num-threads 4 --header-file data/bench-header-1TB-1M.dat --uniform-file data/bench-uniform-1TB-1M.dat`
Running multithreaded benchmark with 4 threads
Run 1/3
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 113.29s
  Total lookups: 4000000
  End-to-end throughput: 35307.97 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 8910.95 lookups/sec
    Latency per lookup:
      Mean: 112221.42 ns
      Std Dev: 3532.31 ns
      Min: 102273.99 ns
      Max: 121097.49 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 8827.02 lookups/sec
    Latency per lookup:
      Mean: 113288.53 ns
      Std Dev: 4012.70 ns
      Min: 93131.44 ns
      Max: 123233.63 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 8835.04 lookups/sec
    Latency per lookup:
      Mean: 113185.66 ns
      Std Dev: 3951.78 ns
      Min: 95742.73 ns
      Max: 121235.31 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 8915.94 lookups/sec
    Latency per lookup:
      Mean: 112158.70 ns
      Std Dev: 3794.67 ns
      Min: 100755.25 ns
      Max: 121030.26 ns
  Overall Latency Statistics:
    Mean: 112713.58 ns
    Std Dev: 3863.24 ns
    Min: 93131.44 ns
    Max: 123233.63 ns
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 240.01s
  Total lookups: 4000000
  End-to-end throughput: 16665.83 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 4187.62 lookups/sec
    Latency per lookup:
      Mean: 238799.02 ns
      Std Dev: 16950.38 ns
      Min: 199089.08 ns
      Max: 285477.21 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 4191.42 lookups/sec
    Latency per lookup:
      Mean: 238582.61 ns
      Std Dev: 17022.27 ns
      Min: 201409.55 ns
      Max: 276847.19 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 4166.46 lookups/sec
    Latency per lookup:
      Mean: 240011.72 ns
      Std Dev: 16868.63 ns
      Min: 199532.62 ns
      Max: 279889.60 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 4173.66 lookups/sec
    Latency per lookup:
      Mean: 239598.01 ns
      Std Dev: 17035.28 ns
      Min: 205117.72 ns
      Max: 282382.72 ns
  Overall Latency Statistics:
    Mean: 239247.84 ns
    Std Dev: 16979.21 ns
    Min: 199089.08 ns
    Max: 285477.21 ns
Run 2/3
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 114.34s
  Total lookups: 4000000
  End-to-end throughput: 34981.97 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 8745.51 lookups/sec
    Latency per lookup:
      Mean: 114344.42 ns
      Std Dev: 4171.52 ns
      Min: 97574.87 ns
      Max: 124492.93 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 8799.24 lookups/sec
    Latency per lookup:
      Mean: 113646.18 ns
      Std Dev: 4181.58 ns
      Min: 99918.44 ns
      Max: 122667.80 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 8782.63 lookups/sec
    Latency per lookup:
      Mean: 113861.10 ns
      Std Dev: 4402.17 ns
      Min: 101507.32 ns
      Max: 124194.89 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 8751.44 lookups/sec
    Latency per lookup:
      Mean: 114266.94 ns
      Std Dev: 4122.12 ns
      Min: 96472.66 ns
      Max: 124290.69 ns
  Overall Latency Statistics:
    Mean: 114029.66 ns
    Std Dev: 4230.52 ns
    Min: 96472.66 ns
    Max: 124492.93 ns
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 234.51s
  Total lookups: 4000000
  End-to-end throughput: 17056.90 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 4316.48 lookups/sec
    Latency per lookup:
      Mean: 231670.15 ns
      Std Dev: 17045.00 ns
      Min: 196104.32 ns
      Max: 274613.71 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 4289.16 lookups/sec
    Latency per lookup:
      Mean: 233145.65 ns
      Std Dev: 16917.63 ns
      Min: 194803.21 ns
      Max: 273927.75 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 4264.23 lookups/sec
    Latency per lookup:
      Mean: 234508.92 ns
      Std Dev: 16951.61 ns
      Min: 196669.05 ns
      Max: 278820.19 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 4306.00 lookups/sec
    Latency per lookup:
      Mean: 232233.99 ns
      Std Dev: 16999.08 ns
      Min: 196433.35 ns
      Max: 273520.72 ns
  Overall Latency Statistics:
    Mean: 232889.68 ns
    Std Dev: 17012.26 ns
    Min: 194803.21 ns
    Max: 278820.19 ns
Run 3/3
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 114.22s
  Total lookups: 4000000
  End-to-end throughput: 35019.38 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 8801.12 lookups/sec
    Latency per lookup:
      Mean: 113621.85 ns
      Std Dev: 3737.38 ns
      Min: 102036.17 ns
      Max: 122270.21 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 8771.39 lookups/sec
    Latency per lookup:
      Mean: 114006.99 ns
      Std Dev: 3867.15 ns
      Min: 102190.35 ns
      Max: 123480.35 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 8768.56 lookups/sec
    Latency per lookup:
      Mean: 114043.75 ns
      Std Dev: 4404.25 ns
      Min: 102485.03 ns
      Max: 124326.69 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 8754.86 lookups/sec
    Latency per lookup:
      Mean: 114222.21 ns
      Std Dev: 4525.52 ns
      Min: 91639.07 ns
      Max: 123322.91 ns
  Overall Latency Statistics:
    Mean: 113973.70 ns
    Std Dev: 4153.08 ns
    Min: 91639.07 ns
    Max: 124326.69 ns
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 234.55s
  Total lookups: 4000000
  End-to-end throughput: 17053.85 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 4320.83 lookups/sec
    Latency per lookup:
      Mean: 231436.95 ns
      Std Dev: 17866.40 ns
      Min: 194411.01 ns
      Max: 274893.90 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 4278.05 lookups/sec
    Latency per lookup:
      Mean: 233751.48 ns
      Std Dev: 17698.89 ns
      Min: 191216.02 ns
      Max: 272800.78 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 4263.47 lookups/sec
    Latency per lookup:
      Mean: 234550.84 ns
      Std Dev: 17829.11 ns
      Min: 188753.33 ns
      Max: 282086.79 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 4303.98 lookups/sec
    Latency per lookup:
      Mean: 232343.17 ns
      Std Dev: 17986.15 ns
      Min: 195522.73 ns
      Max: 280543.37 ns
  Overall Latency Statistics:
    Mean: 233020.61 ns
    Std Dev: 17886.31 ns
    Min: 188753.33 ns
    Max: 282086.79 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 7531 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 1344021200 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 468836578160 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 12000000 }, shards: [Shard { sum: AtomicF64 { inner: 4721966476213354496 }, count: AtomicU64 { inner: 12000000 }, buckets: [AtomicU64 { inner: 1431328 }, AtomicU64 { inner: 2506525 }, AtomicU64 { inner: 2060926 }, AtomicU64 { inner: 1645004 }, AtomicU64 { inner: 1279940 }, AtomicU64 { inner: 965425 }, AtomicU64 { inner: 700588 }, AtomicU64 { inner: 494949 }, AtomicU64 { inner: 336698 }, AtomicU64 { inner: 225321 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 7966 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 2775391503 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 199604837320 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Thu Mar 27 06:59:11 AM UTC 2025

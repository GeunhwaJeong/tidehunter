Benchmark started at Thu Mar 27 01:39:08 PM UTC 2025
Running benchmark with direct I/O: off, threads: 8...
    Finished `release` profile [optimized] target(s) in 0.18s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 3200 --num-threads 8 --header-file data/bench-header-1TB-1M.dat --uniform-file data/bench-uniform-1TB-1M.dat`
Running multithreaded benchmark with 8 threads
Run 1/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 132.02s
  Total lookups: 8000000
  End-to-end throughput: 60597.79 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 7583.53 lookups/sec
    Latency per lookup:
      Mean: 131864.78 ns
      Std Dev: 8449.98 ns
      Min: 112466.27 ns
      Max: 210383.99 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7594.89 lookups/sec
    Latency per lookup:
      Mean: 131667.44 ns
      Std Dev: 8560.36 ns
      Min: 113726.64 ns
      Max: 211499.37 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7577.91 lookups/sec
    Latency per lookup:
      Mean: 131962.51 ns
      Std Dev: 8380.39 ns
      Min: 108839.14 ns
      Max: 205722.45 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7576.61 lookups/sec
    Latency per lookup:
      Mean: 131985.22 ns
      Std Dev: 8512.28 ns
      Min: 109062.23 ns
      Max: 212365.88 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 7574.75 lookups/sec
    Latency per lookup:
      Mean: 132017.59 ns
      Std Dev: 8484.98 ns
      Min: 102131.42 ns
      Max: 210730.41 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7611.40 lookups/sec
    Latency per lookup:
      Mean: 131381.91 ns
      Std Dev: 8331.42 ns
      Min: 118835.68 ns
      Max: 210239.27 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 7657.63 lookups/sec
    Latency per lookup:
      Mean: 130588.73 ns
      Std Dev: 8132.24 ns
      Min: 119789.69 ns
      Max: 210713.41 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 7649.24 lookups/sec
    Latency per lookup:
      Mean: 130731.98 ns
      Std Dev: 8410.53 ns
      Min: 118812.40 ns
      Max: 209385.95 ns
  Overall Latency Statistics:
    Mean: 131525.02 ns
    Std Dev: 8425.83 ns
    Min: 102131.42 ns
    Max: 212365.88 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 252.25s
  Total lookups: 8000000
  End-to-end throughput: 31714.07 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 3981.89 lookups/sec
    Latency per lookup:
      Mean: 251137.16 ns
      Std Dev: 23592.35 ns
      Min: 211660.24 ns
      Max: 325706.95 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 3975.78 lookups/sec
    Latency per lookup:
      Mean: 251522.75 ns
      Std Dev: 23596.20 ns
      Min: 184027.95 ns
      Max: 327430.73 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 4004.19 lookups/sec
    Latency per lookup:
      Mean: 249738.55 ns
      Std Dev: 22510.11 ns
      Min: 209378.03 ns
      Max: 325059.76 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 3980.71 lookups/sec
    Latency per lookup:
      Mean: 251211.16 ns
      Std Dev: 23429.10 ns
      Min: 198481.04 ns
      Max: 322131.02 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 3964.27 lookups/sec
    Latency per lookup:
      Mean: 252253.56 ns
      Std Dev: 25367.34 ns
      Min: 148446.64 ns
      Max: 334497.48 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 3971.42 lookups/sec
    Latency per lookup:
      Mean: 251798.97 ns
      Std Dev: 23834.10 ns
      Min: 161140.91 ns
      Max: 335358.90 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 3975.54 lookups/sec
    Latency per lookup:
      Mean: 251538.12 ns
      Std Dev: 24174.29 ns
      Min: 182368.31 ns
      Max: 328744.54 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 3984.60 lookups/sec
    Latency per lookup:
      Mean: 250966.14 ns
      Std Dev: 23290.86 ns
      Min: 207308.47 ns
      Max: 309589.59 ns
  Overall Latency Statistics:
    Mean: 251270.80 ns
    Std Dev: 23746.78 ns
    Min: 148446.64 ns
    Max: 335358.90 ns
Run 2/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 131.73s
  Total lookups: 8000000
  End-to-end throughput: 60728.60 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 7591.15 lookups/sec
    Latency per lookup:
      Mean: 131732.42 ns
      Std Dev: 7540.66 ns
      Min: 93731.40 ns
      Max: 211179.34 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7684.90 lookups/sec
    Latency per lookup:
      Mean: 130125.29 ns
      Std Dev: 6078.08 ns
      Min: 118853.07 ns
      Max: 210708.54 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7659.74 lookups/sec
    Latency per lookup:
      Mean: 130552.66 ns
      Std Dev: 6456.55 ns
      Min: 109251.31 ns
      Max: 208862.12 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7652.94 lookups/sec
    Latency per lookup:
      Mean: 130668.69 ns
      Std Dev: 6492.28 ns
      Min: 110312.55 ns
      Max: 210296.91 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 7638.93 lookups/sec
    Latency per lookup:
      Mean: 130908.43 ns
      Std Dev: 6617.68 ns
      Min: 104016.49 ns
      Max: 209303.49 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7635.11 lookups/sec
    Latency per lookup:
      Mean: 130973.80 ns
      Std Dev: 6739.68 ns
      Min: 103927.78 ns
      Max: 208045.64 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 7663.39 lookups/sec
    Latency per lookup:
      Mean: 130490.53 ns
      Std Dev: 6348.99 ns
      Min: 116561.72 ns
      Max: 207327.83 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 7665.91 lookups/sec
    Latency per lookup:
      Mean: 130447.65 ns
      Std Dev: 6423.99 ns
      Min: 117844.65 ns
      Max: 208961.03 ns
  Overall Latency Statistics:
    Mean: 130737.43 ns
    Std Dev: 6615.03 ns
    Min: 93731.40 ns
    Max: 211179.34 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 250.52s
  Total lookups: 8000000
  End-to-end throughput: 31934.04 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 3995.75 lookups/sec
    Latency per lookup:
      Mean: 250266.02 ns
      Std Dev: 22162.30 ns
      Min: 177740.08 ns
      Max: 337734.45 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 3999.06 lookups/sec
    Latency per lookup:
      Mean: 250059.03 ns
      Std Dev: 21772.16 ns
      Min: 177133.01 ns
      Max: 338466.75 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 4007.80 lookups/sec
    Latency per lookup:
      Mean: 249513.28 ns
      Std Dev: 21330.57 ns
      Min: 212109.33 ns
      Max: 334350.55 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 3993.27 lookups/sec
    Latency per lookup:
      Mean: 250421.34 ns
      Std Dev: 22457.41 ns
      Min: 163019.49 ns
      Max: 324952.09 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 3991.76 lookups/sec
    Latency per lookup:
      Mean: 250515.93 ns
      Std Dev: 22641.97 ns
      Min: 153890.12 ns
      Max: 326039.51 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 4002.83 lookups/sec
    Latency per lookup:
      Mean: 249823.30 ns
      Std Dev: 21891.33 ns
      Min: 197003.54 ns
      Max: 333807.93 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 4004.11 lookups/sec
    Latency per lookup:
      Mean: 249743.40 ns
      Std Dev: 21642.37 ns
      Min: 209623.95 ns
      Max: 320154.07 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 4017.55 lookups/sec
    Latency per lookup:
      Mean: 248907.89 ns
      Std Dev: 20937.55 ns
      Min: 210734.32 ns
      Max: 328756.98 ns
  Overall Latency Statistics:
    Mean: 249906.27 ns
    Std Dev: 21866.53 ns
    Min: 153890.12 ns
    Max: 338466.75 ns
Run 3/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 131.42s
  Total lookups: 8000000
  End-to-end throughput: 60875.35 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 7609.52 lookups/sec
    Latency per lookup:
      Mean: 131414.25 ns
      Std Dev: 8310.73 ns
      Min: 93890.34 ns
      Max: 209947.21 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7631.83 lookups/sec
    Latency per lookup:
      Mean: 131030.25 ns
      Std Dev: 8347.46 ns
      Min: 103889.31 ns
      Max: 210815.30 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7661.74 lookups/sec
    Latency per lookup:
      Mean: 130518.70 ns
      Std Dev: 8034.52 ns
      Min: 117740.74 ns
      Max: 209845.16 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7652.03 lookups/sec
    Latency per lookup:
      Mean: 130684.22 ns
      Std Dev: 8086.87 ns
      Min: 117193.16 ns
      Max: 207843.94 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 7640.62 lookups/sec
    Latency per lookup:
      Mean: 130879.38 ns
      Std Dev: 8367.13 ns
      Min: 111127.99 ns
      Max: 226441.95 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7634.47 lookups/sec
    Latency per lookup:
      Mean: 130984.93 ns
      Std Dev: 7985.19 ns
      Min: 101607.53 ns
      Max: 207090.91 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 7668.38 lookups/sec
    Latency per lookup:
      Mean: 130405.72 ns
      Std Dev: 7707.92 ns
      Min: 117378.99 ns
      Max: 220794.02 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 7649.24 lookups/sec
    Latency per lookup:
      Mean: 130731.86 ns
      Std Dev: 7935.75 ns
      Min: 117297.12 ns
      Max: 218859.34 ns
  Overall Latency Statistics:
    Mean: 130831.17 ns
    Std Dev: 8105.36 ns
    Min: 93890.34 ns
    Max: 226441.95 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 251.57s
  Total lookups: 8000000
  End-to-end throughput: 31800.52 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 4002.64 lookups/sec
    Latency per lookup:
      Mean: 249835.10 ns
      Std Dev: 21687.49 ns
      Min: 210898.44 ns
      Max: 328381.41 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 4014.02 lookups/sec
    Latency per lookup:
      Mean: 249126.80 ns
      Std Dev: 22115.93 ns
      Min: 209089.68 ns
      Max: 346220.19 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 3977.49 lookups/sec
    Latency per lookup:
      Mean: 251414.55 ns
      Std Dev: 23988.52 ns
      Min: 167077.07 ns
      Max: 331310.90 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 3975.07 lookups/sec
    Latency per lookup:
      Mean: 251567.84 ns
      Std Dev: 23886.66 ns
      Min: 150570.27 ns
      Max: 332032.45 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 3986.11 lookups/sec
    Latency per lookup:
      Mean: 250870.89 ns
      Std Dev: 22442.48 ns
      Min: 194476.46 ns
      Max: 331822.34 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 3979.36 lookups/sec
    Latency per lookup:
      Mean: 251296.82 ns
      Std Dev: 22955.51 ns
      Min: 171135.73 ns
      Max: 330766.30 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 3987.26 lookups/sec
    Latency per lookup:
      Mean: 250798.82 ns
      Std Dev: 22589.82 ns
      Min: 191862.54 ns
      Max: 336815.38 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 3988.02 lookups/sec
    Latency per lookup:
      Mean: 250751.26 ns
      Std Dev: 23193.55 ns
      Min: 202235.51 ns
      Max: 349718.81 ns
  Overall Latency Statistics:
    Mean: 250707.76 ns
    Std Dev: 22883.48 ns
    Min: 150570.27 ns
    Max: 349718.81 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 13748 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 3106966661 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 937695031640 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 24000000 }, shards: [Shard { sum: AtomicF64 { inner: 4717211010711158784 }, count: AtomicU64 { inner: 24000000 }, buckets: [AtomicU64 { inner: 23987522 }, AtomicU64 { inner: 12478 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 9330 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 5977501550 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 3071147749960 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Thu Mar 27 01:58:18 PM UTC 2025

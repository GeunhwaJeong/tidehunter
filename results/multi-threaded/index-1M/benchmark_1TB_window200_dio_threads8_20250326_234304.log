Benchmark started at Wed Mar 26 11:43:04 PM UTC 2025
Running benchmark with direct I/O: on, threads: 8...
    Finished `release` profile [optimized] target(s) in 0.06s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 200 --num-threads 8 --header-file data/bench-header-1TB-1M.dat --uniform-file data/bench-uniform-1TB-1M.dat --direct-io`
Running multithreaded benchmark with 8 threads
Run 1/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 188.79s
  Total lookups: 8000000
  End-to-end throughput: 42375.92 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 5297.00 lookups/sec
    Latency per lookup:
      Mean: 188786.09 ns
      Std Dev: 1324.84 ns
      Min: 170206.08 ns
      Max: 191444.45 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 5316.91 lookups/sec
    Latency per lookup:
      Mean: 188079.16 ns
      Std Dev: 827.60 ns
      Min: 181890.79 ns
      Max: 191081.53 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 5320.38 lookups/sec
    Latency per lookup:
      Mean: 187956.58 ns
      Std Dev: 937.02 ns
      Min: 184664.17 ns
      Max: 191433.92 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 5300.51 lookups/sec
    Latency per lookup:
      Mean: 188661.06 ns
      Std Dev: 1123.96 ns
      Min: 173439.45 ns
      Max: 191505.62 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 5328.80 lookups/sec
    Latency per lookup:
      Mean: 187659.34 ns
      Std Dev: 802.65 ns
      Min: 185251.28 ns
      Max: 190608.13 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 5322.82 lookups/sec
    Latency per lookup:
      Mean: 187870.37 ns
      Std Dev: 968.93 ns
      Min: 185339.94 ns
      Max: 191230.95 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 5310.43 lookups/sec
    Latency per lookup:
      Mean: 188308.66 ns
      Std Dev: 990.59 ns
      Min: 175857.10 ns
      Max: 191259.06 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 5314.01 lookups/sec
    Latency per lookup:
      Mean: 188181.95 ns
      Std Dev: 856.08 ns
      Min: 178846.52 ns
      Max: 190928.65 ns
  Overall Latency Statistics:
    Mean: 188187.90 ns
    Std Dev: 1055.96 ns
    Min: 170206.08 ns
    Max: 191505.62 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 222.77s
  Total lookups: 8000000
  End-to-end throughput: 35911.49 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 4512.75 lookups/sec
    Latency per lookup:
      Mean: 221594.54 ns
      Std Dev: 4007.27 ns
      Min: 208312.60 ns
      Max: 233755.03 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 4526.52 lookups/sec
    Latency per lookup:
      Mean: 220920.08 ns
      Std Dev: 3935.81 ns
      Min: 208907.65 ns
      Max: 233929.97 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 4545.62 lookups/sec
    Latency per lookup:
      Mean: 219991.97 ns
      Std Dev: 3850.04 ns
      Min: 207913.54 ns
      Max: 235540.70 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 4499.22 lookups/sec
    Latency per lookup:
      Mean: 222260.53 ns
      Std Dev: 3966.79 ns
      Min: 208176.29 ns
      Max: 234149.00 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 4522.53 lookups/sec
    Latency per lookup:
      Mean: 221115.11 ns
      Std Dev: 3873.63 ns
      Min: 208629.43 ns
      Max: 232695.83 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 4512.58 lookups/sec
    Latency per lookup:
      Mean: 221602.68 ns
      Std Dev: 3909.90 ns
      Min: 209418.05 ns
      Max: 238594.50 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 4527.89 lookups/sec
    Latency per lookup:
      Mean: 220853.43 ns
      Std Dev: 3803.84 ns
      Min: 209346.42 ns
      Max: 231975.66 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 4488.94 lookups/sec
    Latency per lookup:
      Mean: 222769.66 ns
      Std Dev: 3852.89 ns
      Min: 204747.15 ns
      Max: 235801.53 ns
  Overall Latency Statistics:
    Mean: 221388.50 ns
    Std Dev: 3984.35 ns
    Min: 204747.15 ns
    Max: 238594.50 ns
Run 2/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 188.77s
  Total lookups: 8000000
  End-to-end throughput: 42379.75 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 5316.49 lookups/sec
    Latency per lookup:
      Mean: 188094.00 ns
      Std Dev: 813.23 ns
      Min: 185712.64 ns
      Max: 192119.70 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 5299.07 lookups/sec
    Latency per lookup:
      Mean: 188712.41 ns
      Std Dev: 1124.22 ns
      Min: 173624.45 ns
      Max: 191348.14 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 5308.38 lookups/sec
    Latency per lookup:
      Mean: 188381.24 ns
      Std Dev: 920.84 ns
      Min: 177367.71 ns
      Max: 191338.39 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 5297.48 lookups/sec
    Latency per lookup:
      Mean: 188769.17 ns
      Std Dev: 1123.36 ns
      Min: 172770.30 ns
      Max: 191727.06 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 5318.48 lookups/sec
    Latency per lookup:
      Mean: 188023.60 ns
      Std Dev: 788.03 ns
      Min: 185719.25 ns
      Max: 191572.32 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 5316.32 lookups/sec
    Latency per lookup:
      Mean: 188099.98 ns
      Std Dev: 840.06 ns
      Min: 185241.98 ns
      Max: 190882.70 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 5304.53 lookups/sec
    Latency per lookup:
      Mean: 188518.23 ns
      Std Dev: 959.70 ns
      Min: 176554.60 ns
      Max: 191395.72 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 5317.43 lookups/sec
    Latency per lookup:
      Mean: 188060.95 ns
      Std Dev: 823.53 ns
      Min: 185142.72 ns
      Max: 191666.27 ns
  Overall Latency Statistics:
    Mean: 188332.45 ns
    Std Dev: 975.51 ns
    Min: 172770.30 ns
    Max: 192119.70 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 222.75s
  Total lookups: 8000000
  End-to-end throughput: 35915.47 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 4516.80 lookups/sec
    Latency per lookup:
      Mean: 221395.47 ns
      Std Dev: 4032.77 ns
      Min: 209899.04 ns
      Max: 234048.49 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 4526.39 lookups/sec
    Latency per lookup:
      Mean: 220926.79 ns
      Std Dev: 3909.54 ns
      Min: 206852.11 ns
      Max: 232763.94 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 4526.78 lookups/sec
    Latency per lookup:
      Mean: 220907.74 ns
      Std Dev: 3791.13 ns
      Min: 209158.39 ns
      Max: 231624.16 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 4489.44 lookups/sec
    Latency per lookup:
      Mean: 222745.00 ns
      Std Dev: 3902.50 ns
      Min: 206205.37 ns
      Max: 235221.59 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 4525.83 lookups/sec
    Latency per lookup:
      Mean: 220954.08 ns
      Std Dev: 3971.41 ns
      Min: 210356.14 ns
      Max: 235439.80 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 4514.16 lookups/sec
    Latency per lookup:
      Mean: 221525.17 ns
      Std Dev: 3761.39 ns
      Min: 211170.97 ns
      Max: 233260.97 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 4512.09 lookups/sec
    Latency per lookup:
      Mean: 221626.77 ns
      Std Dev: 4047.92 ns
      Min: 209599.73 ns
      Max: 235061.94 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 4502.06 lookups/sec
    Latency per lookup:
      Mean: 222120.41 ns
      Std Dev: 3943.60 ns
      Min: 210977.45 ns
      Max: 234712.96 ns
  Overall Latency Statistics:
    Mean: 221525.18 ns
    Std Dev: 3967.72 ns
    Min: 206205.37 ns
    Max: 235439.80 ns
Run 3/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 188.70s
  Total lookups: 8000000
  End-to-end throughput: 42395.40 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 5315.19 lookups/sec
    Latency per lookup:
      Mean: 188140.19 ns
      Std Dev: 891.47 ns
      Min: 183788.26 ns
      Max: 190904.56 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 5316.00 lookups/sec
    Latency per lookup:
      Mean: 188111.28 ns
      Std Dev: 828.01 ns
      Min: 184016.29 ns
      Max: 190972.80 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 5299.43 lookups/sec
    Latency per lookup:
      Mean: 188699.46 ns
      Std Dev: 1317.86 ns
      Min: 170351.56 ns
      Max: 191911.22 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 5313.05 lookups/sec
    Latency per lookup:
      Mean: 188215.67 ns
      Std Dev: 1056.89 ns
      Min: 178940.15 ns
      Max: 191286.82 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 5325.85 lookups/sec
    Latency per lookup:
      Mean: 187763.61 ns
      Std Dev: 806.28 ns
      Min: 185255.44 ns
      Max: 190159.81 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 5315.17 lookups/sec
    Latency per lookup:
      Mean: 188140.81 ns
      Std Dev: 857.53 ns
      Min: 182789.76 ns
      Max: 190569.72 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 5315.59 lookups/sec
    Latency per lookup:
      Mean: 188125.97 ns
      Std Dev: 862.26 ns
      Min: 183902.91 ns
      Max: 191639.41 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 5327.99 lookups/sec
    Latency per lookup:
      Mean: 187687.93 ns
      Std Dev: 831.73 ns
      Min: 185299.71 ns
      Max: 190396.95 ns
  Overall Latency Statistics:
    Mean: 188110.62 ns
    Std Dev: 988.29 ns
    Min: 170351.56 ns
    Max: 191911.22 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 222.97s
  Total lookups: 8000000
  End-to-end throughput: 35878.78 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 4528.71 lookups/sec
    Latency per lookup:
      Mean: 220813.37 ns
      Std Dev: 3881.06 ns
      Min: 207781.87 ns
      Max: 233305.39 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 4540.17 lookups/sec
    Latency per lookup:
      Mean: 220255.99 ns
      Std Dev: 3919.41 ns
      Min: 208722.49 ns
      Max: 232185.72 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 4540.11 lookups/sec
    Latency per lookup:
      Mean: 220258.78 ns
      Std Dev: 3845.44 ns
      Min: 206402.82 ns
      Max: 232063.30 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 4484.85 lookups/sec
    Latency per lookup:
      Mean: 222972.76 ns
      Std Dev: 4021.95 ns
      Min: 204990.89 ns
      Max: 237333.23 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 4529.04 lookups/sec
    Latency per lookup:
      Mean: 220797.20 ns
      Std Dev: 3772.56 ns
      Min: 208137.71 ns
      Max: 233328.64 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 4523.40 lookups/sec
    Latency per lookup:
      Mean: 221072.85 ns
      Std Dev: 3977.30 ns
      Min: 210466.92 ns
      Max: 233966.21 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 4503.27 lookups/sec
    Latency per lookup:
      Mean: 222060.66 ns
      Std Dev: 4114.42 ns
      Min: 206103.14 ns
      Max: 234977.84 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 4497.73 lookups/sec
    Latency per lookup:
      Mean: 222334.38 ns
      Std Dev: 3834.21 ns
      Min: 205095.42 ns
      Max: 236380.09 ns
  Overall Latency Statistics:
    Mean: 221320.75 ns
    Std Dev: 4034.65 ns
    Min: 204990.89 ns
    Max: 237333.23 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 1217146 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 4458538891 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 937687876080 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 24000000 }, shards: [Shard { sum: AtomicF64 { inner: 4723498289452810240 }, count: AtomicU64 { inner: 24000000 }, buckets: [AtomicU64 { inner: 5509880 }, AtomicU64 { inner: 8286163 }, AtomicU64 { inner: 5143942 }, AtomicU64 { inner: 2819316 }, AtomicU64 { inner: 1356963 }, AtomicU64 { inner: 577859 }, AtomicU64 { inner: 210434 }, AtomicU64 { inner: 68209 }, AtomicU64 { inner: 20970 }, AtomicU64 { inner: 5263 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 136757 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 5236515730 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 490505543680 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Thu Mar 27 12:03:39 AM UTC 2025

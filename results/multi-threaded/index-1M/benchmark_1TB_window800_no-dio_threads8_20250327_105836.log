Benchmark started at Thu Mar 27 10:58:36 AM UTC 2025
Running benchmark with direct I/O: off, threads: 8...
    Finished `release` profile [optimized] target(s) in 0.18s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 800 --num-threads 8 --header-file data/bench-header-1TB-1M.dat --uniform-file data/bench-uniform-1TB-1M.dat`
Running multithreaded benchmark with 8 threads
Run 1/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 137.76s
  Total lookups: 8000000
  End-to-end throughput: 58072.82 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 7262.52 lookups/sec
    Latency per lookup:
      Mean: 137693.19 ns
      Std Dev: 16084.05 ns
      Min: 106703.35 ns
      Max: 213182.57 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7267.97 lookups/sec
    Latency per lookup:
      Mean: 137589.96 ns
      Std Dev: 16248.22 ns
      Min: 117130.65 ns
      Max: 212662.30 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7264.94 lookups/sec
    Latency per lookup:
      Mean: 137647.31 ns
      Std Dev: 16124.34 ns
      Min: 114139.02 ns
      Max: 213769.12 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7265.91 lookups/sec
    Latency per lookup:
      Mean: 137628.97 ns
      Std Dev: 16302.01 ns
      Min: 116831.83 ns
      Max: 216967.46 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 7322.97 lookups/sec
    Latency per lookup:
      Mean: 136556.53 ns
      Std Dev: 16247.07 ns
      Min: 116123.35 ns
      Max: 217556.35 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7286.83 lookups/sec
    Latency per lookup:
      Mean: 137233.97 ns
      Std Dev: 16134.06 ns
      Min: 116796.11 ns
      Max: 215214.75 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 7259.13 lookups/sec
    Latency per lookup:
      Mean: 137757.56 ns
      Std Dev: 16186.39 ns
      Min: 95813.65 ns
      Max: 216117.37 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 7283.40 lookups/sec
    Latency per lookup:
      Mean: 137298.52 ns
      Std Dev: 15926.07 ns
      Min: 116857.95 ns
      Max: 213471.03 ns
  Overall Latency Statistics:
    Mean: 137425.75 ns
    Std Dev: 16161.19 ns
    Min: 95813.65 ns
    Max: 217556.35 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 154.40s
  Total lookups: 8000000
  End-to-end throughput: 51813.25 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6517.23 lookups/sec
    Latency per lookup:
      Mean: 153439.51 ns
      Std Dev: 9502.97 ns
      Min: 137978.15 ns
      Max: 258041.57 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6476.68 lookups/sec
    Latency per lookup:
      Mean: 154400.01 ns
      Std Dev: 9481.71 ns
      Min: 112875.94 ns
      Max: 254718.66 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6517.34 lookups/sec
    Latency per lookup:
      Mean: 153436.75 ns
      Std Dev: 9310.05 ns
      Min: 136098.01 ns
      Max: 256974.60 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6516.49 lookups/sec
    Latency per lookup:
      Mean: 153456.84 ns
      Std Dev: 9717.48 ns
      Min: 136195.71 ns
      Max: 255381.45 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6500.54 lookups/sec
    Latency per lookup:
      Mean: 153833.48 ns
      Std Dev: 9340.13 ns
      Min: 121594.35 ns
      Max: 259115.49 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6518.56 lookups/sec
    Latency per lookup:
      Mean: 153408.12 ns
      Std Dev: 9377.69 ns
      Min: 138218.21 ns
      Max: 249478.64 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6498.83 lookups/sec
    Latency per lookup:
      Mean: 153873.84 ns
      Std Dev: 9558.46 ns
      Min: 122923.67 ns
      Max: 259527.08 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6535.72 lookups/sec
    Latency per lookup:
      Mean: 153005.30 ns
      Std Dev: 9695.77 ns
      Min: 138408.23 ns
      Max: 258837.41 ns
  Overall Latency Statistics:
    Mean: 153606.73 ns
    Std Dev: 9507.23 ns
    Min: 112875.94 ns
    Max: 259527.08 ns
Run 2/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 138.94s
  Total lookups: 8000000
  End-to-end throughput: 57580.32 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 7197.55 lookups/sec
    Latency per lookup:
      Mean: 138936.13 ns
      Std Dev: 18272.02 ns
      Min: 100980.42 ns
      Max: 240344.52 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7202.68 lookups/sec
    Latency per lookup:
      Mean: 138837.14 ns
      Std Dev: 18487.75 ns
      Min: 102901.69 ns
      Max: 241519.27 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7229.29 lookups/sec
    Latency per lookup:
      Mean: 138326.10 ns
      Std Dev: 18088.29 ns
      Min: 119550.09 ns
      Max: 239617.51 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7225.16 lookups/sec
    Latency per lookup:
      Mean: 138405.17 ns
      Std Dev: 18285.34 ns
      Min: 118351.74 ns
      Max: 235354.67 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 7209.71 lookups/sec
    Latency per lookup:
      Mean: 138701.76 ns
      Std Dev: 18259.30 ns
      Min: 105343.63 ns
      Max: 240148.88 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7213.73 lookups/sec
    Latency per lookup:
      Mean: 138624.49 ns
      Std Dev: 18112.43 ns
      Min: 110415.90 ns
      Max: 232908.35 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 7227.56 lookups/sec
    Latency per lookup:
      Mean: 138359.19 ns
      Std Dev: 18202.10 ns
      Min: 120087.53 ns
      Max: 239947.69 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 7223.78 lookups/sec
    Latency per lookup:
      Mean: 138431.65 ns
      Std Dev: 18097.68 ns
      Min: 116405.73 ns
      Max: 233145.79 ns
  Overall Latency Statistics:
    Mean: 138577.70 ns
    Std Dev: 18227.33 ns
    Min: 100980.42 ns
    Max: 241519.27 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 155.74s
  Total lookups: 8000000
  End-to-end throughput: 51367.68 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6441.63 lookups/sec
    Latency per lookup:
      Mean: 155240.09 ns
      Std Dev: 14186.68 ns
      Min: 127688.22 ns
      Max: 247699.77 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6451.94 lookups/sec
    Latency per lookup:
      Mean: 154992.25 ns
      Std Dev: 14440.51 ns
      Min: 135609.25 ns
      Max: 254482.87 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6453.70 lookups/sec
    Latency per lookup:
      Mean: 154949.92 ns
      Std Dev: 14280.57 ns
      Min: 137606.03 ns
      Max: 254242.65 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6429.97 lookups/sec
    Latency per lookup:
      Mean: 155521.78 ns
      Std Dev: 14439.72 ns
      Min: 123444.90 ns
      Max: 249634.09 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6436.91 lookups/sec
    Latency per lookup:
      Mean: 155353.93 ns
      Std Dev: 14126.30 ns
      Min: 122784.09 ns
      Max: 250015.60 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6471.27 lookups/sec
    Latency per lookup:
      Mean: 154529.19 ns
      Std Dev: 14314.82 ns
      Min: 137045.21 ns
      Max: 246832.53 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6444.47 lookups/sec
    Latency per lookup:
      Mean: 155171.82 ns
      Std Dev: 14516.86 ns
      Min: 134112.14 ns
      Max: 249150.99 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6420.97 lookups/sec
    Latency per lookup:
      Mean: 155739.67 ns
      Std Dev: 14636.91 ns
      Min: 116411.23 ns
      Max: 253325.79 ns
  Overall Latency Statistics:
    Mean: 155187.33 ns
    Std Dev: 14372.94 ns
    Min: 116411.23 ns
    Max: 254482.87 ns
Run 3/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 139.01s
  Total lookups: 8000000
  End-to-end throughput: 57551.13 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 7213.90 lookups/sec
    Latency per lookup:
      Mean: 138621.20 ns
      Std Dev: 18816.92 ns
      Min: 117531.71 ns
      Max: 226469.48 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7210.27 lookups/sec
    Latency per lookup:
      Mean: 138691.08 ns
      Std Dev: 18998.41 ns
      Min: 110634.01 ns
      Max: 226179.65 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7201.85 lookups/sec
    Latency per lookup:
      Mean: 138853.27 ns
      Std Dev: 18914.40 ns
      Min: 109902.28 ns
      Max: 226634.34 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7225.38 lookups/sec
    Latency per lookup:
      Mean: 138400.94 ns
      Std Dev: 18822.07 ns
      Min: 117470.71 ns
      Max: 224350.68 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 7229.44 lookups/sec
    Latency per lookup:
      Mean: 138323.21 ns
      Std Dev: 18726.03 ns
      Min: 117207.10 ns
      Max: 226758.95 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7228.76 lookups/sec
    Latency per lookup:
      Mean: 138336.32 ns
      Std Dev: 18792.53 ns
      Min: 118033.49 ns
      Max: 227390.37 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 7193.91 lookups/sec
    Latency per lookup:
      Mean: 139006.54 ns
      Std Dev: 19064.12 ns
      Min: 94500.29 ns
      Max: 227357.20 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 7216.80 lookups/sec
    Latency per lookup:
      Mean: 138565.57 ns
      Std Dev: 18859.44 ns
      Min: 119189.59 ns
      Max: 227026.59 ns
  Overall Latency Statistics:
    Mean: 138599.77 ns
    Std Dev: 18875.94 ns
    Min: 94500.29 ns
    Max: 227390.37 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 154.82s
  Total lookups: 8000000
  End-to-end throughput: 51671.67 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6523.06 lookups/sec
    Latency per lookup:
      Mean: 153302.17 ns
      Std Dev: 11611.06 ns
      Min: 137414.90 ns
      Max: 222228.49 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6509.35 lookups/sec
    Latency per lookup:
      Mean: 153625.14 ns
      Std Dev: 11732.63 ns
      Min: 136444.96 ns
      Max: 222382.95 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6502.84 lookups/sec
    Latency per lookup:
      Mean: 153779.04 ns
      Std Dev: 11601.10 ns
      Min: 134926.83 ns
      Max: 226371.09 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6465.17 lookups/sec
    Latency per lookup:
      Mean: 154675.05 ns
      Std Dev: 11847.07 ns
      Min: 121268.85 ns
      Max: 221418.79 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6469.80 lookups/sec
    Latency per lookup:
      Mean: 154564.29 ns
      Std Dev: 11777.80 ns
      Min: 124784.70 ns
      Max: 221925.31 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6458.97 lookups/sec
    Latency per lookup:
      Mean: 154823.42 ns
      Std Dev: 11802.00 ns
      Min: 114200.98 ns
      Max: 222005.33 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6498.47 lookups/sec
    Latency per lookup:
      Mean: 153882.39 ns
      Std Dev: 11965.79 ns
      Min: 130723.29 ns
      Max: 221289.11 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6503.71 lookups/sec
    Latency per lookup:
      Mean: 153758.50 ns
      Std Dev: 11552.53 ns
      Min: 135891.01 ns
      Max: 221454.89 ns
  Overall Latency Statistics:
    Mean: 154051.25 ns
    Std Dev: 11748.59 ns
    Min: 114200.98 ns
    Max: 226371.09 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 14400 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 3279761772 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 937682974840 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 24000000 }, shards: [Shard { sum: AtomicF64 { inner: 4719199380584792064 }, count: AtomicU64 { inner: 24000000 }, buckets: [AtomicU64 { inner: 16747516 }, AtomicU64 { inner: 7085547 }, AtomicU64 { inner: 166625 }, AtomicU64 { inner: 312 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 11265 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 3663893654 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 1005279060880 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Thu Mar 27 11:13:17 AM UTC 2025

Benchmark started at Wed Mar 26 09:24:43 PM UTC 2025
Running benchmark with direct I/O: on, threads: 4...
    Finished `release` profile [optimized] target(s) in 0.05s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 100 --num-threads 4 --header-file data/bench-header-1TB-1M.dat --uniform-file data/bench-uniform-1TB-1M.dat --direct-io`
Running multithreaded benchmark with 4 threads
Run 1/3
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 179.60s
  Total lookups: 4000000
  End-to-end throughput: 22272.01 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 5591.69 lookups/sec
    Latency per lookup:
      Mean: 178836.93 ns
      Std Dev: 612.65 ns
      Min: 177210.98 ns
      Max: 180972.55 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 5588.40 lookups/sec
    Latency per lookup:
      Mean: 178942.06 ns
      Std Dev: 630.48 ns
      Min: 176986.78 ns
      Max: 181041.84 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 5587.07 lookups/sec
    Latency per lookup:
      Mean: 178984.56 ns
      Std Dev: 640.27 ns
      Min: 176111.99 ns
      Max: 181345.61 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 5568.01 lookups/sec
    Latency per lookup:
      Mean: 179597.28 ns
      Std Dev: 853.82 ns
      Min: 169211.55 ns
      Max: 181668.08 ns
  Overall Latency Statistics:
    Mean: 179090.21 ns
    Std Dev: 752.69 ns
    Min: 169211.55 ns
    Max: 181668.08 ns
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 333.20s
  Total lookups: 4000000
  End-to-end throughput: 12004.83 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 3013.06 lookups/sec
    Latency per lookup:
      Mean: 331888.80 ns
      Std Dev: 6619.69 ns
      Min: 312273.60 ns
      Max: 349754.10 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 3003.56 lookups/sec
    Latency per lookup:
      Mean: 332938.58 ns
      Std Dev: 6736.80 ns
      Min: 309305.62 ns
      Max: 351560.34 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 3006.96 lookups/sec
    Latency per lookup:
      Mean: 332561.44 ns
      Std Dev: 6916.21 ns
      Min: 311024.46 ns
      Max: 353613.02 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 3001.21 lookups/sec
    Latency per lookup:
      Mean: 333199.00 ns
      Std Dev: 6540.41 ns
      Min: 314553.78 ns
      Max: 352364.31 ns
  Overall Latency Statistics:
    Mean: 332646.96 ns
    Std Dev: 6722.87 ns
    Min: 309305.62 ns
    Max: 353613.02 ns
Run 2/3
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 179.52s
  Total lookups: 4000000
  End-to-end throughput: 22281.25 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 5584.14 lookups/sec
    Latency per lookup:
      Mean: 179078.64 ns
      Std Dev: 603.00 ns
      Min: 177120.30 ns
      Max: 180977.10 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 5580.53 lookups/sec
    Latency per lookup:
      Mean: 179194.47 ns
      Std Dev: 631.24 ns
      Min: 176818.11 ns
      Max: 181389.76 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 5570.49 lookups/sec
    Latency per lookup:
      Mean: 179517.58 ns
      Std Dev: 685.46 ns
      Min: 174123.86 ns
      Max: 181295.21 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 5570.32 lookups/sec
    Latency per lookup:
      Mean: 179522.90 ns
      Std Dev: 678.70 ns
      Min: 174627.28 ns
      Max: 181525.08 ns
  Overall Latency Statistics:
    Mean: 179328.40 ns
    Std Dev: 679.43 ns
    Min: 174123.86 ns
    Max: 181525.08 ns
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 333.21s
  Total lookups: 4000000
  End-to-end throughput: 12004.31 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 3001.08 lookups/sec
    Latency per lookup:
      Mean: 333213.53 ns
      Std Dev: 6941.02 ns
      Min: 311831.75 ns
      Max: 354920.73 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 3005.03 lookups/sec
    Latency per lookup:
      Mean: 332775.66 ns
      Std Dev: 6811.72 ns
      Min: 309781.84 ns
      Max: 355536.57 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 3002.97 lookups/sec
    Latency per lookup:
      Mean: 333003.71 ns
      Std Dev: 6698.64 ns
      Min: 312799.74 ns
      Max: 353958.15 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 3007.14 lookups/sec
    Latency per lookup:
      Mean: 332542.09 ns
      Std Dev: 6663.89 ns
      Min: 311602.52 ns
      Max: 358705.39 ns
  Overall Latency Statistics:
    Mean: 332883.75 ns
    Std Dev: 6784.32 ns
    Min: 309781.84 ns
    Max: 358705.39 ns
Run 3/3
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 179.59s
  Total lookups: 4000000
  End-to-end throughput: 22272.65 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 5568.17 lookups/sec
    Latency per lookup:
      Mean: 179592.24 ns
      Std Dev: 704.72 ns
      Min: 172839.68 ns
      Max: 181692.24 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 5588.24 lookups/sec
    Latency per lookup:
      Mean: 178947.32 ns
      Std Dev: 610.22 ns
      Min: 176029.88 ns
      Max: 181523.78 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 5570.42 lookups/sec
    Latency per lookup:
      Mean: 179519.58 ns
      Std Dev: 675.58 ns
      Min: 174474.89 ns
      Max: 181640.57 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 5593.33 lookups/sec
    Latency per lookup:
      Mean: 178784.29 ns
      Std Dev: 593.44 ns
      Min: 177018.71 ns
      Max: 181002.20 ns
  Overall Latency Statistics:
    Mean: 179210.86 ns
    Std Dev: 736.50 ns
    Min: 172839.68 ns
    Max: 181692.24 ns
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 332.70s
  Total lookups: 4000000
  End-to-end throughput: 12022.83 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 3016.22 lookups/sec
    Latency per lookup:
      Mean: 331540.26 ns
      Std Dev: 6455.75 ns
      Min: 312727.72 ns
      Max: 350342.46 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 3010.54 lookups/sec
    Latency per lookup:
      Mean: 332166.07 ns
      Std Dev: 7011.24 ns
      Min: 308060.20 ns
      Max: 353711.96 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 3005.71 lookups/sec
    Latency per lookup:
      Mean: 332700.16 ns
      Std Dev: 7041.00 ns
      Min: 308757.98 ns
      Max: 357896.55 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 3006.25 lookups/sec
    Latency per lookup:
      Mean: 332639.91 ns
      Std Dev: 6716.34 ns
      Min: 309654.05 ns
      Max: 353572.14 ns
  Overall Latency Statistics:
    Mean: 332261.60 ns
    Std Dev: 6826.13 ns
    Min: 308060.20 ns
    Max: 357896.55 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 619513 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 2121143928 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 468840071480 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 12000000 }, shards: [Shard { sum: AtomicF64 { inner: 4721963693074546688 }, count: AtomicU64 { inner: 12000000 }, buckets: [AtomicU64 { inner: 1429839 }, AtomicU64 { inner: 2508728 }, AtomicU64 { inner: 2060456 }, AtomicU64 { inner: 1646688 }, AtomicU64 { inner: 1280580 }, AtomicU64 { inner: 967078 }, AtomicU64 { inner: 700185 }, AtomicU64 { inner: 493723 }, AtomicU64 { inner: 337064 }, AtomicU64 { inner: 223705 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 12061 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 3937721989 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 199521875240 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Wed Mar 26 09:50:20 PM UTC 2025

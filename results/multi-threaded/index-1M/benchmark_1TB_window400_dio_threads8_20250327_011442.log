Benchmark started at Thu Mar 27 01:14:42 AM UTC 2025
Running benchmark with direct I/O: on, threads: 8...
    Finished `release` profile [optimized] target(s) in 0.06s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 400 --num-threads 8 --header-file data/bench-header-1TB-1M.dat --uniform-file data/bench-uniform-1TB-1M.dat --direct-io`
Running multithreaded benchmark with 8 threads
Run 1/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 188.86s
  Total lookups: 8000000
  End-to-end throughput: 42359.86 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 5325.69 lookups/sec
    Latency per lookup:
      Mean: 187769.03 ns
      Std Dev: 840.13 ns
      Min: 184138.14 ns
      Max: 190619.23 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 5298.51 lookups/sec
    Latency per lookup:
      Mean: 188732.32 ns
      Std Dev: 1345.36 ns
      Min: 173294.88 ns
      Max: 191871.48 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 5315.53 lookups/sec
    Latency per lookup:
      Mean: 188128.16 ns
      Std Dev: 899.65 ns
      Min: 180652.14 ns
      Max: 190983.69 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 5329.52 lookups/sec
    Latency per lookup:
      Mean: 187634.26 ns
      Std Dev: 812.33 ns
      Min: 184762.95 ns
      Max: 190374.86 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 5310.69 lookups/sec
    Latency per lookup:
      Mean: 188299.60 ns
      Std Dev: 936.33 ns
      Min: 178428.07 ns
      Max: 191312.62 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 5308.01 lookups/sec
    Latency per lookup:
      Mean: 188394.50 ns
      Std Dev: 966.50 ns
      Min: 177725.22 ns
      Max: 190908.87 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 5295.00 lookups/sec
    Latency per lookup:
      Mean: 188857.56 ns
      Std Dev: 1437.84 ns
      Min: 170920.68 ns
      Max: 192697.31 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 5328.40 lookups/sec
    Latency per lookup:
      Mean: 187673.51 ns
      Std Dev: 788.58 ns
      Min: 184636.77 ns
      Max: 190012.50 ns
  Overall Latency Statistics:
    Mean: 188186.12 ns
    Std Dev: 1120.00 ns
    Min: 170920.68 ns
    Max: 192697.31 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 162.88s
  Total lookups: 8000000
  End-to-end throughput: 49116.06 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6167.21 lookups/sec
    Latency per lookup:
      Mean: 162147.95 ns
      Std Dev: 2373.59 ns
      Min: 152889.72 ns
      Max: 171353.17 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6181.55 lookups/sec
    Latency per lookup:
      Mean: 161771.84 ns
      Std Dev: 2387.31 ns
      Min: 153766.81 ns
      Max: 169397.66 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6205.26 lookups/sec
    Latency per lookup:
      Mean: 161153.62 ns
      Std Dev: 2301.96 ns
      Min: 154161.23 ns
      Max: 168375.92 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6139.52 lookups/sec
    Latency per lookup:
      Mean: 162879.26 ns
      Std Dev: 2690.62 ns
      Min: 143538.94 ns
      Max: 171193.47 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6166.43 lookups/sec
    Latency per lookup:
      Mean: 162168.33 ns
      Std Dev: 2347.70 ns
      Min: 151184.12 ns
      Max: 170518.80 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6184.92 lookups/sec
    Latency per lookup:
      Mean: 161683.63 ns
      Std Dev: 2216.94 ns
      Min: 155239.89 ns
      Max: 169546.06 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6195.19 lookups/sec
    Latency per lookup:
      Mean: 161415.55 ns
      Std Dev: 2272.53 ns
      Min: 154397.71 ns
      Max: 168774.32 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6159.08 lookups/sec
    Latency per lookup:
      Mean: 162361.79 ns
      Std Dev: 2517.85 ns
      Min: 151354.76 ns
      Max: 170231.77 ns
  Overall Latency Statistics:
    Mean: 161947.75 ns
    Std Dev: 2448.08 ns
    Min: 143538.94 ns
    Max: 171353.17 ns
Run 2/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 188.62s
  Total lookups: 8000000
  End-to-end throughput: 42412.89 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 5303.97 lookups/sec
    Latency per lookup:
      Mean: 188538.00 ns
      Std Dev: 929.13 ns
      Min: 176368.89 ns
      Max: 191377.23 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 5317.07 lookups/sec
    Latency per lookup:
      Mean: 188073.55 ns
      Std Dev: 792.98 ns
      Min: 185646.85 ns
      Max: 190881.29 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 5301.62 lookups/sec
    Latency per lookup:
      Mean: 188621.67 ns
      Std Dev: 1131.87 ns
      Min: 171718.10 ns
      Max: 192036.81 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 5305.50 lookups/sec
    Latency per lookup:
      Mean: 188483.49 ns
      Std Dev: 989.84 ns
      Min: 179146.43 ns
      Max: 191578.50 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 5308.54 lookups/sec
    Latency per lookup:
      Mean: 188375.86 ns
      Std Dev: 843.73 ns
      Min: 183861.02 ns
      Max: 191867.34 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 5307.69 lookups/sec
    Latency per lookup:
      Mean: 188405.91 ns
      Std Dev: 865.64 ns
      Min: 182164.10 ns
      Max: 191428.83 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 5310.27 lookups/sec
    Latency per lookup:
      Mean: 188314.31 ns
      Std Dev: 918.45 ns
      Min: 185833.20 ns
      Max: 191663.11 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 5311.08 lookups/sec
    Latency per lookup:
      Mean: 188285.70 ns
      Std Dev: 964.39 ns
      Min: 185940.59 ns
      Max: 191682.57 ns
  Overall Latency Statistics:
    Mean: 188387.31 ns
    Std Dev: 947.98 ns
    Min: 171718.10 ns
    Max: 192036.81 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 162.78s
  Total lookups: 8000000
  End-to-end throughput: 49146.69 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6172.37 lookups/sec
    Latency per lookup:
      Mean: 162012.25 ns
      Std Dev: 2353.27 ns
      Min: 155182.59 ns
      Max: 168977.27 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6175.19 lookups/sec
    Latency per lookup:
      Mean: 161938.36 ns
      Std Dev: 2326.81 ns
      Min: 153637.19 ns
      Max: 169846.93 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6207.43 lookups/sec
    Latency per lookup:
      Mean: 161097.28 ns
      Std Dev: 2285.39 ns
      Min: 154252.85 ns
      Max: 169817.58 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6156.41 lookups/sec
    Latency per lookup:
      Mean: 162432.36 ns
      Std Dev: 2561.21 ns
      Min: 147406.12 ns
      Max: 170179.38 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6172.18 lookups/sec
    Latency per lookup:
      Mean: 162017.30 ns
      Std Dev: 2412.74 ns
      Min: 154535.52 ns
      Max: 169726.20 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6186.14 lookups/sec
    Latency per lookup:
      Mean: 161651.63 ns
      Std Dev: 2304.92 ns
      Min: 153590.56 ns
      Max: 169169.24 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6175.74 lookups/sec
    Latency per lookup:
      Mean: 161923.98 ns
      Std Dev: 2361.87 ns
      Min: 154400.79 ns
      Max: 170825.48 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6143.34 lookups/sec
    Latency per lookup:
      Mean: 162777.78 ns
      Std Dev: 2525.75 ns
      Min: 145976.71 ns
      Max: 170520.58 ns
  Overall Latency Statistics:
    Mean: 161981.37 ns
    Std Dev: 2438.29 ns
    Min: 145976.71 ns
    Max: 170825.48 ns
Run 3/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 188.95s
  Total lookups: 8000000
  End-to-end throughput: 42338.15 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 5331.20 lookups/sec
    Latency per lookup:
      Mean: 187574.89 ns
      Std Dev: 832.24 ns
      Min: 184914.61 ns
      Max: 190226.95 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 5320.19 lookups/sec
    Latency per lookup:
      Mean: 187963.34 ns
      Std Dev: 781.40 ns
      Min: 185567.44 ns
      Max: 190542.85 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 5319.45 lookups/sec
    Latency per lookup:
      Mean: 187989.39 ns
      Std Dev: 825.48 ns
      Min: 185222.31 ns
      Max: 190681.99 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 5292.27 lookups/sec
    Latency per lookup:
      Mean: 188954.67 ns
      Std Dev: 1605.79 ns
      Min: 169011.56 ns
      Max: 191409.99 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 5319.26 lookups/sec
    Latency per lookup:
      Mean: 187996.24 ns
      Std Dev: 791.01 ns
      Min: 185381.70 ns
      Max: 190258.37 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 5316.45 lookups/sec
    Latency per lookup:
      Mean: 188095.62 ns
      Std Dev: 850.04 ns
      Min: 182064.75 ns
      Max: 191268.47 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 5315.72 lookups/sec
    Latency per lookup:
      Mean: 188121.45 ns
      Std Dev: 835.00 ns
      Min: 180894.06 ns
      Max: 190780.90 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 5316.82 lookups/sec
    Latency per lookup:
      Mean: 188082.21 ns
      Std Dev: 836.21 ns
      Min: 182593.01 ns
      Max: 191102.36 ns
  Overall Latency Statistics:
    Mean: 188097.22 ns
    Std Dev: 1022.04 ns
    Min: 169011.56 ns
    Max: 191409.99 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 162.80s
  Total lookups: 8000000
  End-to-end throughput: 49139.39 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6183.36 lookups/sec
    Latency per lookup:
      Mean: 161724.38 ns
      Std Dev: 2410.18 ns
      Min: 155236.15 ns
      Max: 170253.14 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6188.83 lookups/sec
    Latency per lookup:
      Mean: 161581.33 ns
      Std Dev: 2338.76 ns
      Min: 154998.16 ns
      Max: 169392.35 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6211.35 lookups/sec
    Latency per lookup:
      Mean: 160995.68 ns
      Std Dev: 2404.58 ns
      Min: 152223.33 ns
      Max: 168868.71 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6142.43 lookups/sec
    Latency per lookup:
      Mean: 162801.94 ns
      Std Dev: 2683.69 ns
      Min: 143543.41 ns
      Max: 171325.81 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6175.90 lookups/sec
    Latency per lookup:
      Mean: 161919.84 ns
      Std Dev: 2321.33 ns
      Min: 155008.60 ns
      Max: 167962.89 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6177.34 lookups/sec
    Latency per lookup:
      Mean: 161882.03 ns
      Std Dev: 2269.91 ns
      Min: 154054.09 ns
      Max: 170244.31 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6174.29 lookups/sec
    Latency per lookup:
      Mean: 161961.98 ns
      Std Dev: 2401.44 ns
      Min: 154390.31 ns
      Max: 169590.17 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6165.76 lookups/sec
    Latency per lookup:
      Mean: 162186.07 ns
      Std Dev: 2454.31 ns
      Min: 152683.86 ns
      Max: 170168.66 ns
  Overall Latency Statistics:
    Mean: 161881.66 ns
    Std Dev: 2460.74 ns
    Min: 143543.41 ns
    Max: 171325.81 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 1237348 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 4458937994 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 937687452960 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 24000000 }, shards: [Shard { sum: AtomicF64 { inner: 4720887605393096704 }, count: AtomicU64 { inner: 24000000 }, buckets: [AtomicU64 { inner: 10105247 }, AtomicU64 { inner: 10500473 }, AtomicU64 { inner: 2872456 }, AtomicU64 { inner: 472052 }, AtomicU64 { inner: 47121 }, AtomicU64 { inner: 2642 }, AtomicU64 { inner: 9 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 367969 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 3824634081 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 669774859080 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Thu Mar 27 01:32:17 AM UTC 2025

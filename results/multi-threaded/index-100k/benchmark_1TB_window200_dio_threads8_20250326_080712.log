Benchmark started at Wed Mar 26 08:07:12 AM UTC 2025
Running benchmark with direct I/O: on, threads: 8...
    Finished `release` profile [optimized] target(s) in 0.05s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 200 --num-threads 8 --header-file data/bench-header-1TB-100k.dat --uniform-file data/bench-uniform-1TB-100k.dat --direct-io`
Running multithreaded benchmark with 8 threads
Run 1/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 163.27s
  Total lookups: 8000000
  End-to-end throughput: 48998.12 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6132.52 lookups/sec
    Latency per lookup:
      Mean: 163065.05 ns
      Std Dev: 480.79 ns
      Min: 161515.79 ns
      Max: 164463.67 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6144.19 lookups/sec
    Latency per lookup:
      Mean: 162755.47 ns
      Std Dev: 628.84 ns
      Min: 160739.23 ns
      Max: 164784.65 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6138.91 lookups/sec
    Latency per lookup:
      Mean: 162895.27 ns
      Std Dev: 522.93 ns
      Min: 161221.50 ns
      Max: 164602.36 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6133.59 lookups/sec
    Latency per lookup:
      Mean: 163036.58 ns
      Std Dev: 492.78 ns
      Min: 161710.02 ns
      Max: 164767.54 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6133.84 lookups/sec
    Latency per lookup:
      Mean: 163030.14 ns
      Std Dev: 473.63 ns
      Min: 161638.93 ns
      Max: 164526.24 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6133.01 lookups/sec
    Latency per lookup:
      Mean: 163052.12 ns
      Std Dev: 502.43 ns
      Min: 161100.65 ns
      Max: 164767.52 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6124.78 lookups/sec
    Latency per lookup:
      Mean: 163271.07 ns
      Std Dev: 507.74 ns
      Min: 157903.93 ns
      Max: 164981.56 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6137.89 lookups/sec
    Latency per lookup:
      Mean: 162922.40 ns
      Std Dev: 606.92 ns
      Min: 161085.75 ns
      Max: 164778.96 ns
  Overall Latency Statistics:
    Mean: 163003.51 ns
    Std Dev: 548.31 ns
    Min: 157903.93 ns
    Max: 164981.56 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 125.24s
  Total lookups: 8000000
  End-to-end throughput: 63878.96 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 8038.49 lookups/sec
    Latency per lookup:
      Mean: 124401.44 ns
      Std Dev: 1645.76 ns
      Min: 119667.29 ns
      Max: 129845.93 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7984.88 lookups/sec
    Latency per lookup:
      Mean: 125236.65 ns
      Std Dev: 1743.56 ns
      Min: 114511.92 ns
      Max: 130084.42 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 8023.05 lookups/sec
    Latency per lookup:
      Mean: 124640.86 ns
      Std Dev: 1625.57 ns
      Min: 119421.88 ns
      Max: 130432.17 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 8003.52 lookups/sec
    Latency per lookup:
      Mean: 124945.04 ns
      Std Dev: 1651.96 ns
      Min: 118393.82 ns
      Max: 130541.21 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 8031.06 lookups/sec
    Latency per lookup:
      Mean: 124516.60 ns
      Std Dev: 1673.63 ns
      Min: 118979.55 ns
      Max: 129282.97 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 8036.22 lookups/sec
    Latency per lookup:
      Mean: 124436.57 ns
      Std Dev: 1668.30 ns
      Min: 119075.74 ns
      Max: 130501.02 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 8031.40 lookups/sec
    Latency per lookup:
      Mean: 124511.28 ns
      Std Dev: 1633.03 ns
      Min: 119154.70 ns
      Max: 129770.12 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 8052.50 lookups/sec
    Latency per lookup:
      Mean: 124185.07 ns
      Std Dev: 1647.99 ns
      Min: 119366.71 ns
      Max: 129897.43 ns
  Overall Latency Statistics:
    Mean: 124609.19 ns
    Std Dev: 1690.62 ns
    Min: 114511.92 ns
    Max: 130541.21 ns
Run 2/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 163.29s
  Total lookups: 8000000
  End-to-end throughput: 48991.11 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6123.90 lookups/sec
    Latency per lookup:
      Mean: 163294.70 ns
      Std Dev: 599.21 ns
      Min: 157236.55 ns
      Max: 165420.90 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6136.50 lookups/sec
    Latency per lookup:
      Mean: 162959.25 ns
      Std Dev: 513.33 ns
      Min: 161462.37 ns
      Max: 165560.16 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6147.93 lookups/sec
    Latency per lookup:
      Mean: 162656.29 ns
      Std Dev: 483.75 ns
      Min: 161370.55 ns
      Max: 164119.11 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6133.63 lookups/sec
    Latency per lookup:
      Mean: 163035.52 ns
      Std Dev: 512.79 ns
      Min: 160347.07 ns
      Max: 165680.55 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6139.38 lookups/sec
    Latency per lookup:
      Mean: 162882.84 ns
      Std Dev: 530.97 ns
      Min: 161252.11 ns
      Max: 164916.89 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6131.01 lookups/sec
    Latency per lookup:
      Mean: 163105.39 ns
      Std Dev: 482.80 ns
      Min: 161127.74 ns
      Max: 164982.05 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6134.79 lookups/sec
    Latency per lookup:
      Mean: 163004.75 ns
      Std Dev: 494.18 ns
      Min: 161328.77 ns
      Max: 166142.79 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6147.62 lookups/sec
    Latency per lookup:
      Mean: 162664.71 ns
      Std Dev: 476.86 ns
      Min: 160811.73 ns
      Max: 164462.14 ns
  Overall Latency Statistics:
    Mean: 162950.43 ns
    Std Dev: 551.33 ns
    Min: 157236.55 ns
    Max: 166142.79 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 124.87s
  Total lookups: 8000000
  End-to-end throughput: 64068.44 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 8040.11 lookups/sec
    Latency per lookup:
      Mean: 124376.37 ns
      Std Dev: 1628.99 ns
      Min: 119907.22 ns
      Max: 129862.50 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 8011.65 lookups/sec
    Latency per lookup:
      Mean: 124818.17 ns
      Std Dev: 1634.42 ns
      Min: 117908.51 ns
      Max: 130990.19 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 8032.52 lookups/sec
    Latency per lookup:
      Mean: 124493.97 ns
      Std Dev: 1574.84 ns
      Min: 119614.88 ns
      Max: 129876.75 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 8009.06 lookups/sec
    Latency per lookup:
      Mean: 124858.63 ns
      Std Dev: 1673.96 ns
      Min: 117746.84 ns
      Max: 129763.29 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 8008.57 lookups/sec
    Latency per lookup:
      Mean: 124866.27 ns
      Std Dev: 1634.05 ns
      Min: 117654.73 ns
      Max: 129997.23 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 8035.47 lookups/sec
    Latency per lookup:
      Mean: 124448.19 ns
      Std Dev: 1631.19 ns
      Min: 118764.77 ns
      Max: 130023.68 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 8016.03 lookups/sec
    Latency per lookup:
      Mean: 124750.00 ns
      Std Dev: 1618.40 ns
      Min: 118653.33 ns
      Max: 129450.84 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 8047.92 lookups/sec
    Latency per lookup:
      Mean: 124255.69 ns
      Std Dev: 1613.32 ns
      Min: 118801.89 ns
      Max: 129279.35 ns
  Overall Latency Statistics:
    Mean: 124608.41 ns
    Std Dev: 1642.04 ns
    Min: 117654.73 ns
    Max: 130990.19 ns
Run 3/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 163.63s
  Total lookups: 8000000
  End-to-end throughput: 48890.14 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6137.81 lookups/sec
    Latency per lookup:
      Mean: 162924.56 ns
      Std Dev: 478.09 ns
      Min: 161504.29 ns
      Max: 164685.32 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6136.11 lookups/sec
    Latency per lookup:
      Mean: 162969.70 ns
      Std Dev: 474.75 ns
      Min: 161429.73 ns
      Max: 164512.42 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6111.27 lookups/sec
    Latency per lookup:
      Mean: 163631.98 ns
      Std Dev: 613.85 ns
      Min: 157127.82 ns
      Max: 165217.40 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6140.33 lookups/sec
    Latency per lookup:
      Mean: 162857.74 ns
      Std Dev: 472.56 ns
      Min: 161500.74 ns
      Max: 164346.85 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6125.86 lookups/sec
    Latency per lookup:
      Mean: 163242.44 ns
      Std Dev: 515.15 ns
      Min: 159580.89 ns
      Max: 165115.79 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6140.96 lookups/sec
    Latency per lookup:
      Mean: 162840.96 ns
      Std Dev: 485.64 ns
      Min: 161448.41 ns
      Max: 164421.49 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6134.60 lookups/sec
    Latency per lookup:
      Mean: 163009.71 ns
      Std Dev: 491.43 ns
      Min: 161420.98 ns
      Max: 164519.26 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6137.96 lookups/sec
    Latency per lookup:
      Mean: 162920.70 ns
      Std Dev: 471.23 ns
      Min: 161284.12 ns
      Max: 164680.23 ns
  Overall Latency Statistics:
    Mean: 163049.72 ns
    Std Dev: 560.78 ns
    Min: 157127.82 ns
    Max: 165217.40 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 125.17s
  Total lookups: 8000000
  End-to-end throughput: 63914.93 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 8000.63 lookups/sec
    Latency per lookup:
      Mean: 124990.22 ns
      Std Dev: 1663.15 ns
      Min: 119896.08 ns
      Max: 129694.51 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 8022.25 lookups/sec
    Latency per lookup:
      Mean: 124653.32 ns
      Std Dev: 1624.77 ns
      Min: 119641.12 ns
      Max: 129510.86 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 8006.69 lookups/sec
    Latency per lookup:
      Mean: 124895.62 ns
      Std Dev: 1665.79 ns
      Min: 120288.30 ns
      Max: 130914.42 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7989.38 lookups/sec
    Latency per lookup:
      Mean: 125166.17 ns
      Std Dev: 1713.95 ns
      Min: 115397.81 ns
      Max: 130231.59 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 8029.22 lookups/sec
    Latency per lookup:
      Mean: 124545.11 ns
      Std Dev: 1691.30 ns
      Min: 119905.11 ns
      Max: 129698.03 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 8018.56 lookups/sec
    Latency per lookup:
      Mean: 124710.62 ns
      Std Dev: 1634.87 ns
      Min: 119310.38 ns
      Max: 130282.65 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 8011.38 lookups/sec
    Latency per lookup:
      Mean: 124822.41 ns
      Std Dev: 1666.95 ns
      Min: 119536.37 ns
      Max: 129786.80 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 8030.65 lookups/sec
    Latency per lookup:
      Mean: 124522.93 ns
      Std Dev: 1673.64 ns
      Min: 119935.84 ns
      Max: 129387.35 ns
  Overall Latency Statistics:
    Mean: 124788.30 ns
    Std Dev: 1680.09 ns
    Min: 115397.81 ns
    Max: 130914.42 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 36871 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 3859983031 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 93940274080 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 24000000 }, shards: [Shard { sum: AtomicF64 { inner: 4719883731278495744 }, count: AtomicU64 { inner: 24000000 }, buckets: [AtomicU64 { inner: 14317409 }, AtomicU64 { inner: 8994276 }, AtomicU64 { inner: 675417 }, AtomicU64 { inner: 12858 }, AtomicU64 { inner: 40 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 140118 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 2937639040 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 274974553880 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Wed Mar 26 08:21:37 AM UTC 2025

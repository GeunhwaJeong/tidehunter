Benchmark started at Wed Mar 26 12:47:02 PM UTC 2025
Running benchmark with direct I/O: on, threads: 8...
    Finished `release` profile [optimized] target(s) in 0.05s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 3200 --num-threads 8 --header-file data/bench-header-1TB-100k.dat --uniform-file data/bench-uniform-1TB-100k.dat --direct-io`
Running multithreaded benchmark with 8 threads
Run 1/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 163.47s
  Total lookups: 8000000
  End-to-end throughput: 48937.15 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6118.71 lookups/sec
    Latency per lookup:
      Mean: 163433.27 ns
      Std Dev: 742.37 ns
      Min: 160280.45 ns
      Max: 165712.91 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6135.57 lookups/sec
    Latency per lookup:
      Mean: 162984.14 ns
      Std Dev: 480.23 ns
      Min: 161267.03 ns
      Max: 164729.78 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6123.47 lookups/sec
    Latency per lookup:
      Mean: 163306.01 ns
      Std Dev: 524.09 ns
      Min: 161721.86 ns
      Max: 164950.12 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6127.29 lookups/sec
    Latency per lookup:
      Mean: 163204.41 ns
      Std Dev: 511.08 ns
      Min: 161749.80 ns
      Max: 165723.02 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6120.50 lookups/sec
    Latency per lookup:
      Mean: 163385.29 ns
      Std Dev: 685.11 ns
      Min: 159521.43 ns
      Max: 165362.88 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6117.16 lookups/sec
    Latency per lookup:
      Mean: 163474.50 ns
      Std Dev: 519.27 ns
      Min: 159997.87 ns
      Max: 165088.64 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6148.84 lookups/sec
    Latency per lookup:
      Mean: 162632.19 ns
      Std Dev: 495.14 ns
      Min: 161207.61 ns
      Max: 164439.12 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6156.30 lookups/sec
    Latency per lookup:
      Mean: 162435.30 ns
      Std Dev: 519.08 ns
      Min: 160676.88 ns
      Max: 165133.33 ns
  Overall Latency Statistics:
    Mean: 163106.89 ns
    Std Dev: 673.70 ns
    Min: 159521.43 ns
    Max: 165723.02 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 256.97s
  Total lookups: 8000000
  End-to-end throughput: 31131.54 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 3898.21 lookups/sec
    Latency per lookup:
      Mean: 256527.71 ns
      Std Dev: 9581.02 ns
      Min: 168692.97 ns
      Max: 319520.52 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6684.32 lookups/sec
    Latency per lookup:
      Mean: 149603.77 ns
      Std Dev: 11511.75 ns
      Min: 143523.66 ns
      Max: 315851.86 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 3897.82 lookups/sec
    Latency per lookup:
      Mean: 256553.72 ns
      Std Dev: 8904.81 ns
      Min: 170404.84 ns
      Max: 315558.93 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 3891.45 lookups/sec
    Latency per lookup:
      Mean: 256973.59 ns
      Std Dev: 11493.82 ns
      Min: 142834.02 ns
      Max: 324328.28 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 3901.31 lookups/sec
    Latency per lookup:
      Mean: 256323.97 ns
      Std Dev: 8832.15 ns
      Min: 207846.38 ns
      Max: 329080.97 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 3908.30 lookups/sec
    Latency per lookup:
      Mean: 255865.77 ns
      Std Dev: 7753.96 ns
      Min: 231103.93 ns
      Max: 316587.08 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 3901.90 lookups/sec
    Latency per lookup:
      Mean: 256285.46 ns
      Std Dev: 7982.69 ns
      Min: 213368.79 ns
      Max: 316422.47 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 3895.25 lookups/sec
    Latency per lookup:
      Mean: 256722.69 ns
      Std Dev: 9419.29 ns
      Min: 150112.19 ns
      Max: 313939.50 ns
  Overall Latency Statistics:
    Mean: 243107.08 ns
    Std Dev: 36604.13 ns
    Min: 142834.02 ns
    Max: 329080.97 ns
Run 2/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 163.38s
  Total lookups: 8000000
  End-to-end throughput: 48965.24 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6120.66 lookups/sec
    Latency per lookup:
      Mean: 163381.01 ns
      Std Dev: 573.60 ns
      Min: 158498.16 ns
      Max: 165196.40 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6127.25 lookups/sec
    Latency per lookup:
      Mean: 163205.42 ns
      Std Dev: 626.31 ns
      Min: 160624.74 ns
      Max: 165384.52 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6123.27 lookups/sec
    Latency per lookup:
      Mean: 163311.42 ns
      Std Dev: 549.78 ns
      Min: 161533.14 ns
      Max: 165530.30 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6124.70 lookups/sec
    Latency per lookup:
      Mean: 163273.38 ns
      Std Dev: 495.48 ns
      Min: 161071.91 ns
      Max: 164825.25 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6139.55 lookups/sec
    Latency per lookup:
      Mean: 162878.32 ns
      Std Dev: 490.07 ns
      Min: 161382.88 ns
      Max: 164324.93 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6141.14 lookups/sec
    Latency per lookup:
      Mean: 162836.34 ns
      Std Dev: 476.91 ns
      Min: 161177.76 ns
      Max: 165043.23 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6127.53 lookups/sec
    Latency per lookup:
      Mean: 163197.82 ns
      Std Dev: 650.19 ns
      Min: 161332.89 ns
      Max: 165302.99 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6139.97 lookups/sec
    Latency per lookup:
      Mean: 162867.36 ns
      Std Dev: 531.38 ns
      Min: 161337.71 ns
      Max: 165012.70 ns
  Overall Latency Statistics:
    Mean: 163118.88 ns
    Std Dev: 590.14 ns
    Min: 158498.16 ns
    Max: 165530.30 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 257.88s
  Total lookups: 8000000
  End-to-end throughput: 31021.79 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 3891.25 lookups/sec
    Latency per lookup:
      Mean: 256987.05 ns
      Std Dev: 8369.05 ns
      Min: 154916.82 ns
      Max: 282637.84 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 3877.73 lookups/sec
    Latency per lookup:
      Mean: 257882.78 ns
      Std Dev: 12174.03 ns
      Min: 142794.05 ns
      Max: 284238.38 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 3896.90 lookups/sec
    Latency per lookup:
      Mean: 256614.06 ns
      Std Dev: 6694.96 ns
      Min: 208730.39 ns
      Max: 281510.97 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 3893.59 lookups/sec
    Latency per lookup:
      Mean: 256832.23 ns
      Std Dev: 7645.85 ns
      Min: 165546.30 ns
      Max: 280159.30 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 3889.46 lookups/sec
    Latency per lookup:
      Mean: 257104.97 ns
      Std Dev: 8746.46 ns
      Min: 151518.61 ns
      Max: 285037.56 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 3902.14 lookups/sec
    Latency per lookup:
      Mean: 256269.45 ns
      Std Dev: 6425.60 ns
      Min: 231721.98 ns
      Max: 279040.49 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6732.79 lookups/sec
    Latency per lookup:
      Mean: 148526.79 ns
      Std Dev: 2923.10 ns
      Min: 143037.66 ns
      Max: 217366.19 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 3896.45 lookups/sec
    Latency per lookup:
      Mean: 256644.14 ns
      Std Dev: 6445.89 ns
      Min: 204465.73 ns
      Max: 284394.98 ns
  Overall Latency Statistics:
    Mean: 243357.68 ns
    Std Dev: 36688.85 ns
    Min: 142794.05 ns
    Max: 285037.56 ns
Run 3/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 163.60s
  Total lookups: 8000000
  End-to-end throughput: 48898.37 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6133.81 lookups/sec
    Latency per lookup:
      Mean: 163030.81 ns
      Std Dev: 482.26 ns
      Min: 161387.64 ns
      Max: 164498.69 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6122.12 lookups/sec
    Latency per lookup:
      Mean: 163342.20 ns
      Std Dev: 534.59 ns
      Min: 161855.98 ns
      Max: 165845.44 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6112.68 lookups/sec
    Latency per lookup:
      Mean: 163594.30 ns
      Std Dev: 647.27 ns
      Min: 159162.43 ns
      Max: 165826.15 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6122.79 lookups/sec
    Latency per lookup:
      Mean: 163324.26 ns
      Std Dev: 536.99 ns
      Min: 160626.60 ns
      Max: 166067.45 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6139.99 lookups/sec
    Latency per lookup:
      Mean: 162866.70 ns
      Std Dev: 476.64 ns
      Min: 161282.94 ns
      Max: 165121.03 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6135.26 lookups/sec
    Latency per lookup:
      Mean: 162992.16 ns
      Std Dev: 505.49 ns
      Min: 161535.68 ns
      Max: 164979.75 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6112.31 lookups/sec
    Latency per lookup:
      Mean: 163604.35 ns
      Std Dev: 688.41 ns
      Min: 159486.75 ns
      Max: 165741.91 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6113.64 lookups/sec
    Latency per lookup:
      Mean: 163568.55 ns
      Std Dev: 531.59 ns
      Min: 160895.34 ns
      Max: 165987.93 ns
  Overall Latency Statistics:
    Mean: 163290.42 ns
    Std Dev: 619.76 ns
    Min: 159162.43 ns
    Max: 166067.45 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 260.72s
  Total lookups: 8000000
  End-to-end throughput: 30684.24 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 3845.12 lookups/sec
    Latency per lookup:
      Mean: 260069.85 ns
      Std Dev: 8323.51 ns
      Min: 172697.60 ns
      Max: 286149.43 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 3847.12 lookups/sec
    Latency per lookup:
      Mean: 259934.78 ns
      Std Dev: 7624.93 ns
      Min: 189088.16 ns
      Max: 280492.12 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6724.21 lookups/sec
    Latency per lookup:
      Mean: 148716.29 ns
      Std Dev: 2380.28 ns
      Min: 144157.69 ns
      Max: 189423.13 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 3835.53 lookups/sec
    Latency per lookup:
      Mean: 260719.85 ns
      Std Dev: 11317.35 ns
      Min: 142818.99 ns
      Max: 282435.11 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 3845.68 lookups/sec
    Latency per lookup:
      Mean: 260032.09 ns
      Std Dev: 7291.08 ns
      Min: 179104.95 ns
      Max: 277444.04 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 3842.70 lookups/sec
    Latency per lookup:
      Mean: 260233.88 ns
      Std Dev: 8543.80 ns
      Min: 151584.04 ns
      Max: 287363.43 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 3855.27 lookups/sec
    Latency per lookup:
      Mean: 259385.38 ns
      Std Dev: 6990.94 ns
      Min: 209277.52 ns
      Max: 276190.63 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 3863.10 lookups/sec
    Latency per lookup:
      Mean: 258859.43 ns
      Std Dev: 6393.40 ns
      Min: 231220.11 ns
      Max: 279649.14 ns
  Overall Latency Statistics:
    Mean: 245993.94 ns
    Std Dev: 37573.33 ns
    Min: 142818.99 ns
    Max: 287363.43 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 53195 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 3863467438 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 93940037240 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 24000000 }, shards: [Shard { sum: AtomicF64 { inner: 4717207661173538816 }, count: AtomicU64 { inner: 24000000 }, buckets: [AtomicU64 { inner: 24000000 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 2676528 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 5026281440 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 3047412738640 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Wed Mar 26 01:08:08 PM UTC 2025

Benchmark started at Wed Mar 26 11:28:44 AM UTC 2025
Running benchmark with direct I/O: on, threads: 8...
    Finished `release` profile [optimized] target(s) in 0.05s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 1600 --num-threads 8 --header-file data/bench-header-1TB-100k.dat --uniform-file data/bench-uniform-1TB-100k.dat --direct-io`
Running multithreaded benchmark with 8 threads
Run 1/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 163.56s
  Total lookups: 8000000
  End-to-end throughput: 48910.54 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6131.20 lookups/sec
    Latency per lookup:
      Mean: 163100.15 ns
      Std Dev: 643.12 ns
      Min: 161275.36 ns
      Max: 165734.00 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6113.83 lookups/sec
    Latency per lookup:
      Mean: 163563.56 ns
      Std Dev: 583.47 ns
      Min: 157391.67 ns
      Max: 165278.84 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6140.25 lookups/sec
    Latency per lookup:
      Mean: 162859.91 ns
      Std Dev: 482.65 ns
      Min: 161379.06 ns
      Max: 164709.48 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6124.07 lookups/sec
    Latency per lookup:
      Mean: 163290.20 ns
      Std Dev: 513.86 ns
      Min: 159792.73 ns
      Max: 164652.93 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6133.27 lookups/sec
    Latency per lookup:
      Mean: 163045.08 ns
      Std Dev: 663.19 ns
      Min: 161288.81 ns
      Max: 165555.30 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6139.93 lookups/sec
    Latency per lookup:
      Mean: 162868.32 ns
      Std Dev: 480.29 ns
      Min: 161332.22 ns
      Max: 164431.71 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6135.45 lookups/sec
    Latency per lookup:
      Mean: 162987.32 ns
      Std Dev: 496.12 ns
      Min: 161276.18 ns
      Max: 164712.12 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6136.06 lookups/sec
    Latency per lookup:
      Mean: 162970.90 ns
      Std Dev: 484.70 ns
      Min: 161446.55 ns
      Max: 164527.84 ns
  Overall Latency Statistics:
    Mean: 163085.68 ns
    Std Dev: 591.16 ns
    Min: 157391.67 ns
    Max: 165734.00 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 125.06s
  Total lookups: 8000000
  End-to-end throughput: 63971.54 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 8009.59 lookups/sec
    Latency per lookup:
      Mean: 124850.31 ns
      Std Dev: 1028.09 ns
      Min: 112643.84 ns
      Max: 127922.01 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 8008.18 lookups/sec
    Latency per lookup:
      Mean: 124872.32 ns
      Std Dev: 1096.93 ns
      Min: 109906.41 ns
      Max: 128088.90 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 8011.13 lookups/sec
    Latency per lookup:
      Mean: 124826.41 ns
      Std Dev: 987.01 ns
      Min: 116817.79 ns
      Max: 127496.24 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7996.46 lookups/sec
    Latency per lookup:
      Mean: 125055.33 ns
      Std Dev: 1526.76 ns
      Min: 100002.21 ns
      Max: 128056.36 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 8018.72 lookups/sec
    Latency per lookup:
      Mean: 124708.11 ns
      Std Dev: 977.58 ns
      Min: 121633.06 ns
      Max: 127984.41 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 8011.44 lookups/sec
    Latency per lookup:
      Mean: 124821.55 ns
      Std Dev: 996.00 ns
      Min: 117116.16 ns
      Max: 127815.51 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 8017.07 lookups/sec
    Latency per lookup:
      Mean: 124733.92 ns
      Std Dev: 957.27 ns
      Min: 121651.47 ns
      Max: 128068.69 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 8013.81 lookups/sec
    Latency per lookup:
      Mean: 124784.65 ns
      Std Dev: 998.90 ns
      Min: 119053.60 ns
      Max: 127752.18 ns
  Overall Latency Statistics:
    Mean: 124831.57 ns
    Std Dev: 1090.09 ns
    Min: 100002.21 ns
    Max: 128088.90 ns
Run 2/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 163.54s
  Total lookups: 8000000
  End-to-end throughput: 48916.29 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6145.26 lookups/sec
    Latency per lookup:
      Mean: 162727.12 ns
      Std Dev: 604.96 ns
      Min: 160953.81 ns
      Max: 165026.60 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6135.74 lookups/sec
    Latency per lookup:
      Mean: 162979.64 ns
      Std Dev: 700.69 ns
      Min: 160927.14 ns
      Max: 165111.15 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6114.54 lookups/sec
    Latency per lookup:
      Mean: 163544.48 ns
      Std Dev: 627.81 ns
      Min: 157705.48 ns
      Max: 166148.68 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6124.68 lookups/sec
    Latency per lookup:
      Mean: 163273.90 ns
      Std Dev: 493.77 ns
      Min: 161678.95 ns
      Max: 164597.80 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6120.42 lookups/sec
    Latency per lookup:
      Mean: 163387.61 ns
      Std Dev: 748.24 ns
      Min: 160521.40 ns
      Max: 165606.75 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6126.58 lookups/sec
    Latency per lookup:
      Mean: 163223.28 ns
      Std Dev: 665.77 ns
      Min: 161003.90 ns
      Max: 165387.54 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6134.48 lookups/sec
    Latency per lookup:
      Mean: 163013.10 ns
      Std Dev: 543.18 ns
      Min: 161441.52 ns
      Max: 165442.27 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6137.24 lookups/sec
    Latency per lookup:
      Mean: 162939.82 ns
      Std Dev: 673.21 ns
      Min: 161093.12 ns
      Max: 165157.60 ns
  Overall Latency Statistics:
    Mean: 163136.12 ns
    Std Dev: 684.50 ns
    Min: 157705.48 ns
    Max: 166148.68 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 125.21s
  Total lookups: 8000000
  End-to-end throughput: 63894.38 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 8002.28 lookups/sec
    Latency per lookup:
      Mean: 124964.41 ns
      Std Dev: 1000.25 ns
      Min: 114832.01 ns
      Max: 128013.51 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7989.19 lookups/sec
    Latency per lookup:
      Mean: 125169.11 ns
      Std Dev: 1362.35 ns
      Min: 103745.64 ns
      Max: 128500.60 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 8000.42 lookups/sec
    Latency per lookup:
      Mean: 124993.48 ns
      Std Dev: 1061.42 ns
      Min: 112258.61 ns
      Max: 128556.02 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7986.81 lookups/sec
    Latency per lookup:
      Mean: 125206.37 ns
      Std Dev: 1470.57 ns
      Min: 102292.56 ns
      Max: 128467.89 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 8014.00 lookups/sec
    Latency per lookup:
      Mean: 124781.61 ns
      Std Dev: 963.39 ns
      Min: 121881.35 ns
      Max: 128248.74 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 8012.25 lookups/sec
    Latency per lookup:
      Mean: 124808.85 ns
      Std Dev: 946.68 ns
      Min: 121946.52 ns
      Max: 128297.14 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 8005.43 lookups/sec
    Latency per lookup:
      Mean: 124915.26 ns
      Std Dev: 979.88 ns
      Min: 117562.32 ns
      Max: 128561.17 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 8002.93 lookups/sec
    Latency per lookup:
      Mean: 124954.19 ns
      Std Dev: 1011.36 ns
      Min: 116458.23 ns
      Max: 127991.42 ns
  Overall Latency Statistics:
    Mean: 124974.16 ns
    Std Dev: 1124.37 ns
    Min: 102292.56 ns
    Max: 128561.17 ns
Run 3/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 163.48s
  Total lookups: 8000000
  End-to-end throughput: 48935.65 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6124.11 lookups/sec
    Latency per lookup:
      Mean: 163288.90 ns
      Std Dev: 494.41 ns
      Min: 161827.42 ns
      Max: 164679.75 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6124.44 lookups/sec
    Latency per lookup:
      Mean: 163280.11 ns
      Std Dev: 509.40 ns
      Min: 160948.85 ns
      Max: 164912.99 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6134.26 lookups/sec
    Latency per lookup:
      Mean: 163018.75 ns
      Std Dev: 537.34 ns
      Min: 161530.10 ns
      Max: 165106.54 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6121.85 lookups/sec
    Latency per lookup:
      Mean: 163349.19 ns
      Std Dev: 481.28 ns
      Min: 161705.73 ns
      Max: 165024.43 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 6140.98 lookups/sec
    Latency per lookup:
      Mean: 162840.47 ns
      Std Dev: 473.82 ns
      Min: 161042.43 ns
      Max: 164278.92 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 6118.93 lookups/sec
    Latency per lookup:
      Mean: 163427.30 ns
      Std Dev: 503.90 ns
      Min: 160110.64 ns
      Max: 165078.43 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 6116.97 lookups/sec
    Latency per lookup:
      Mean: 163479.71 ns
      Std Dev: 548.61 ns
      Min: 158920.39 ns
      Max: 165106.38 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 6131.09 lookups/sec
    Latency per lookup:
      Mean: 163103.26 ns
      Std Dev: 484.92 ns
      Min: 161518.75 ns
      Max: 165123.89 ns
  Overall Latency Statistics:
    Mean: 163223.46 ns
    Std Dev: 544.56 ns
    Min: 158920.39 ns
    Max: 165123.89 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 125.31s
  Total lookups: 8000000
  End-to-end throughput: 63842.26 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 8007.02 lookups/sec
    Latency per lookup:
      Mean: 124890.47 ns
      Std Dev: 968.52 ns
      Min: 120051.12 ns
      Max: 127978.24 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 8005.26 lookups/sec
    Latency per lookup:
      Mean: 124917.79 ns
      Std Dev: 983.42 ns
      Min: 117826.25 ns
      Max: 127789.06 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7995.15 lookups/sec
    Latency per lookup:
      Mean: 125075.77 ns
      Std Dev: 1201.96 ns
      Min: 106281.20 ns
      Max: 127950.21 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7980.30 lookups/sec
    Latency per lookup:
      Mean: 125308.58 ns
      Std Dev: 1753.75 ns
      Min: 99095.93 ns
      Max: 128348.27 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 8022.34 lookups/sec
    Latency per lookup:
      Mean: 124651.88 ns
      Std Dev: 967.84 ns
      Min: 121364.54 ns
      Max: 127545.14 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7997.18 lookups/sec
    Latency per lookup:
      Mean: 125044.14 ns
      Std Dev: 1173.82 ns
      Min: 106359.79 ns
      Max: 129229.22 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 8005.17 lookups/sec
    Latency per lookup:
      Mean: 124919.27 ns
      Std Dev: 987.07 ns
      Min: 117942.60 ns
      Max: 128287.68 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 8009.58 lookups/sec
    Latency per lookup:
      Mean: 124850.54 ns
      Std Dev: 955.52 ns
      Min: 121913.53 ns
      Max: 127717.95 ns
  Overall Latency Statistics:
    Mean: 124957.31 ns
    Std Dev: 1166.43 ns
    Min: 99095.93 ns
    Max: 129229.22 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 49600 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 3862556710 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 93943609800 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 24000000 }, shards: [Shard { sum: AtomicF64 { inner: 4717207661173538816 }, count: AtomicU64 { inner: 24000000 }, buckets: [AtomicU64 { inner: 24000000 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 419893 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 2950100080 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 1529828293280 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Wed Mar 26 11:43:10 AM UTC 2025

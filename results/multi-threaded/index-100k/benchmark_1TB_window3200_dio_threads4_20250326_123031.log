Benchmark started at Wed Mar 26 12:30:31 PM UTC 2025
Running benchmark with direct I/O: on, threads: 4...
    Finished `release` profile [optimized] target(s) in 0.05s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 3200 --num-threads 4 --header-file data/bench-header-1TB-100k.dat --uniform-file data/bench-uniform-1TB-100k.dat --direct-io`
Running multithreaded benchmark with 4 threads
Run 1/3
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 161.70s
  Total lookups: 4000000
  End-to-end throughput: 24737.33 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6184.34 lookups/sec
    Latency per lookup:
      Mean: 161698.64 ns
      Std Dev: 405.59 ns
      Min: 159937.96 ns
      Max: 162912.26 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6192.09 lookups/sec
    Latency per lookup:
      Mean: 161496.44 ns
      Std Dev: 575.54 ns
      Min: 159648.00 ns
      Max: 163063.53 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6188.11 lookups/sec
    Latency per lookup:
      Mean: 161600.23 ns
      Std Dev: 536.87 ns
      Min: 160107.36 ns
      Max: 163212.91 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6187.69 lookups/sec
    Latency per lookup:
      Mean: 161611.08 ns
      Std Dev: 410.15 ns
      Min: 160144.45 ns
      Max: 162883.15 ns
  Overall Latency Statistics:
    Mean: 161601.59 ns
    Std Dev: 493.14 ns
    Min: 159648.00 ns
    Max: 163212.91 ns
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 168.49s
  Total lookups: 4000000
  End-to-end throughput: 23740.27 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 5939.70 lookups/sec
    Latency per lookup:
      Mean: 168358.78 ns
      Std Dev: 1818.02 ns
      Min: 150440.25 ns
      Max: 173392.31 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 5935.07 lookups/sec
    Latency per lookup:
      Mean: 168489.88 ns
      Std Dev: 1996.45 ns
      Min: 145010.57 ns
      Max: 173621.93 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 5962.01 lookups/sec
    Latency per lookup:
      Mean: 167728.79 ns
      Std Dev: 1559.67 ns
      Min: 161148.39 ns
      Max: 173904.67 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 5965.05 lookups/sec
    Latency per lookup:
      Mean: 167643.23 ns
      Std Dev: 1426.66 ns
      Min: 162857.68 ns
      Max: 173508.95 ns
  Overall Latency Statistics:
    Mean: 168055.17 ns
    Std Dev: 1754.73 ns
    Min: 145010.57 ns
    Max: 173904.67 ns
Run 2/3
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 162.30s
  Total lookups: 4000000
  End-to-end throughput: 24644.98 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6161.25 lookups/sec
    Latency per lookup:
      Mean: 162304.62 ns
      Std Dev: 470.10 ns
      Min: 158464.47 ns
      Max: 163426.34 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6205.14 lookups/sec
    Latency per lookup:
      Mean: 161156.72 ns
      Std Dev: 413.47 ns
      Min: 159913.28 ns
      Max: 162422.63 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6178.53 lookups/sec
    Latency per lookup:
      Mean: 161850.78 ns
      Std Dev: 416.40 ns
      Min: 160472.66 ns
      Max: 163138.61 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6205.55 lookups/sec
    Latency per lookup:
      Mean: 161146.11 ns
      Std Dev: 414.63 ns
      Min: 159688.91 ns
      Max: 162453.30 ns
  Overall Latency Statistics:
    Mean: 161614.56 ns
    Std Dev: 651.59 ns
    Min: 158464.47 ns
    Max: 163426.34 ns
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 170.91s
  Total lookups: 4000000
  End-to-end throughput: 23403.94 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 5856.29 lookups/sec
    Latency per lookup:
      Mean: 170756.58 ns
      Std Dev: 1501.38 ns
      Min: 156754.20 ns
      Max: 174935.09 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 5850.99 lookups/sec
    Latency per lookup:
      Mean: 170911.12 ns
      Std Dev: 1714.65 ns
      Min: 143451.02 ns
      Max: 176010.07 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 5868.16 lookups/sec
    Latency per lookup:
      Mean: 170411.24 ns
      Std Dev: 1369.95 ns
      Min: 165596.21 ns
      Max: 174895.36 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 5855.43 lookups/sec
    Latency per lookup:
      Mean: 170781.78 ns
      Std Dev: 1446.94 ns
      Min: 156914.55 ns
      Max: 174786.36 ns
  Overall Latency Statistics:
    Mean: 170715.18 ns
    Std Dev: 1524.92 ns
    Min: 143451.02 ns
    Max: 176010.07 ns
Run 3/3
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 162.15s
  Total lookups: 4000000
  End-to-end throughput: 24668.07 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6167.03 lookups/sec
    Latency per lookup:
      Mean: 162152.73 ns
      Std Dev: 444.77 ns
      Min: 158124.72 ns
      Max: 163349.89 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6190.96 lookups/sec
    Latency per lookup:
      Mean: 161525.82 ns
      Std Dev: 638.73 ns
      Min: 159963.72 ns
      Max: 163445.88 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 6178.61 lookups/sec
    Latency per lookup:
      Mean: 161848.67 ns
      Std Dev: 422.37 ns
      Min: 160132.90 ns
      Max: 163089.87 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6187.77 lookups/sec
    Latency per lookup:
      Mean: 161609.06 ns
      Std Dev: 657.41 ns
      Min: 160196.60 ns
      Max: 163463.34 ns
  Overall Latency Statistics:
    Mean: 161784.07 ns
    Std Dev: 602.86 ns
    Min: 158124.72 ns
    Max: 163463.34 ns
Running multithreaded benchmark with 4 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 4
  End-to-end time: 165.16s
  Total lookups: 4000000
  End-to-end throughput: 24219.61 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 6057.46 lookups/sec
    Latency per lookup:
      Mean: 165085.68 ns
      Std Dev: 3894.55 ns
      Min: 150697.82 ns
      Max: 171699.78 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 6054.91 lookups/sec
    Latency per lookup:
      Mean: 165155.21 ns
      Std Dev: 4029.43 ns
      Min: 146555.52 ns
      Max: 171523.15 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7383.15 lookups/sec
    Latency per lookup:
      Mean: 135443.58 ns
      Std Dev: 1934.01 ns
      Min: 133044.97 ns
      Max: 170097.67 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 6066.06 lookups/sec
    Latency per lookup:
      Mean: 164851.59 ns
      Std Dev: 3870.38 ns
      Min: 155490.89 ns
      Max: 170617.13 ns
  Overall Latency Statistics:
    Mean: 157634.02 ns
    Std Dev: 13292.18 ns
    Min: 133044.97 ns
    Max: 171699.78 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 20092 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 1913927596 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 46970690240 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 12000000 }, shards: [Shard { sum: AtomicF64 { inner: 4712704061546168320 }, count: AtomicU64 { inner: 12000000 }, buckets: [AtomicU64 { inner: 12000000 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 735731 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 1822425116 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 1523683889760 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Wed Mar 26 12:47:02 PM UTC 2025

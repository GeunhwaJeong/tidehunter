Benchmark started at Wed Mar 26 02:05:45 PM UTC 2025
Running benchmark with direct I/O: off, threads: 8...
    Finished `release` profile [optimized] target(s) in 0.17s
     Running `target/release/index_benchmark run --num-lookups 1000000 --num-runs 3 --batch-size 1000 --window-size 100 --num-threads 8 --header-file data/bench-header-1TB-100k.dat --uniform-file data/bench-uniform-1TB-100k.dat`
Running multithreaded benchmark with 8 threads
Run 1/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 85.14s
  Total lookups: 8000000
  End-to-end throughput: 93957.72 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 11772.75 lookups/sec
    Latency per lookup:
      Mean: 84941.89 ns
      Std Dev: 1079.87 ns
      Min: 81085.32 ns
      Max: 87519.24 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 11752.12 lookups/sec
    Latency per lookup:
      Mean: 85091.05 ns
      Std Dev: 1096.81 ns
      Min: 81341.52 ns
      Max: 88766.86 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 11772.69 lookups/sec
    Latency per lookup:
      Mean: 84942.33 ns
      Std Dev: 1032.78 ns
      Min: 81180.65 ns
      Max: 88544.44 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 11746.59 lookups/sec
    Latency per lookup:
      Mean: 85131.09 ns
      Std Dev: 1117.43 ns
      Min: 80216.41 ns
      Max: 87813.03 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 11744.78 lookups/sec
    Latency per lookup:
      Mean: 85144.24 ns
      Std Dev: 1030.41 ns
      Min: 79806.46 ns
      Max: 87824.63 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 11787.14 lookups/sec
    Latency per lookup:
      Mean: 84838.25 ns
      Std Dev: 1091.81 ns
      Min: 81464.96 ns
      Max: 87413.08 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 11795.33 lookups/sec
    Latency per lookup:
      Mean: 84779.31 ns
      Std Dev: 1066.53 ns
      Min: 81729.57 ns
      Max: 87667.74 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 11799.94 lookups/sec
    Latency per lookup:
      Mean: 84746.17 ns
      Std Dev: 1143.73 ns
      Min: 81619.45 ns
      Max: 88030.14 ns
  Overall Latency Statistics:
    Mean: 84951.79 ns
    Std Dev: 1093.02 ns
    Min: 79806.46 ns
    Max: 88766.86 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 135.80s
  Total lookups: 8000000
  End-to-end throughput: 58911.03 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 7400.95 lookups/sec
    Latency per lookup:
      Mean: 135117.81 ns
      Std Dev: 6682.81 ns
      Min: 125137.64 ns
      Max: 266663.54 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7386.45 lookups/sec
    Latency per lookup:
      Mean: 135383.01 ns
      Std Dev: 6714.56 ns
      Min: 126182.80 ns
      Max: 269536.50 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7387.17 lookups/sec
    Latency per lookup:
      Mean: 135369.81 ns
      Std Dev: 6693.72 ns
      Min: 125116.24 ns
      Max: 264829.86 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7363.90 lookups/sec
    Latency per lookup:
      Mean: 135797.70 ns
      Std Dev: 6831.83 ns
      Min: 118125.93 ns
      Max: 266168.75 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 7419.27 lookups/sec
    Latency per lookup:
      Mean: 134784.08 ns
      Std Dev: 6863.76 ns
      Min: 124392.05 ns
      Max: 272427.36 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7394.72 lookups/sec
    Latency per lookup:
      Mean: 135231.55 ns
      Std Dev: 6746.03 ns
      Min: 125782.34 ns
      Max: 270941.01 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 7385.99 lookups/sec
    Latency per lookup:
      Mean: 135391.43 ns
      Std Dev: 6817.04 ns
      Min: 124907.67 ns
      Max: 272443.97 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 7372.70 lookups/sec
    Latency per lookup:
      Mean: 135635.48 ns
      Std Dev: 6687.84 ns
      Min: 118183.16 ns
      Max: 266473.52 ns
  Overall Latency Statistics:
    Mean: 135338.86 ns
    Std Dev: 6761.26 ns
    Min: 118125.93 ns
    Max: 272443.97 ns
Run 2/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 86.41s
  Total lookups: 8000000
  End-to-end throughput: 92586.95 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 11642.57 lookups/sec
    Latency per lookup:
      Mean: 85891.71 ns
      Std Dev: 753.48 ns
      Min: 83351.40 ns
      Max: 88544.13 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 11638.13 lookups/sec
    Latency per lookup:
      Mean: 85924.45 ns
      Std Dev: 856.18 ns
      Min: 83575.98 ns
      Max: 91886.34 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 11661.34 lookups/sec
    Latency per lookup:
      Mean: 85753.40 ns
      Std Dev: 721.32 ns
      Min: 83417.02 ns
      Max: 87681.08 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 11642.43 lookups/sec
    Latency per lookup:
      Mean: 85892.73 ns
      Std Dev: 721.90 ns
      Min: 83234.47 ns
      Max: 88077.25 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 11611.97 lookups/sec
    Latency per lookup:
      Mean: 86118.03 ns
      Std Dev: 792.64 ns
      Min: 80362.57 ns
      Max: 88862.03 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 11651.54 lookups/sec
    Latency per lookup:
      Mean: 85825.58 ns
      Std Dev: 762.93 ns
      Min: 83392.66 ns
      Max: 89355.98 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 11573.41 lookups/sec
    Latency per lookup:
      Mean: 86404.97 ns
      Std Dev: 920.26 ns
      Min: 80486.67 ns
      Max: 89064.99 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 11652.07 lookups/sec
    Latency per lookup:
      Mean: 85821.66 ns
      Std Dev: 751.43 ns
      Min: 83251.91 ns
      Max: 88545.62 ns
  Overall Latency Statistics:
    Mean: 85954.07 ns
    Std Dev: 812.18 ns
    Min: 80362.57 ns
    Max: 91886.34 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 134.58s
  Total lookups: 8000000
  End-to-end throughput: 59444.07 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 7460.78 lookups/sec
    Latency per lookup:
      Mean: 134034.17 ns
      Std Dev: 4507.81 ns
      Min: 123555.73 ns
      Max: 184770.18 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7476.13 lookups/sec
    Latency per lookup:
      Mean: 133759.10 ns
      Std Dev: 4508.31 ns
      Min: 124612.22 ns
      Max: 182849.41 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7448.40 lookups/sec
    Latency per lookup:
      Mean: 134256.98 ns
      Std Dev: 4498.90 ns
      Min: 121868.76 ns
      Max: 181629.26 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7462.68 lookups/sec
    Latency per lookup:
      Mean: 134000.17 ns
      Std Dev: 4272.28 ns
      Min: 124034.50 ns
      Max: 176978.65 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 7430.52 lookups/sec
    Latency per lookup:
      Mean: 134580.01 ns
      Std Dev: 4530.12 ns
      Min: 120556.98 ns
      Max: 179954.01 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7489.35 lookups/sec
    Latency per lookup:
      Mean: 133522.86 ns
      Std Dev: 4508.75 ns
      Min: 125722.74 ns
      Max: 182510.53 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 7485.08 lookups/sec
    Latency per lookup:
      Mean: 133599.11 ns
      Std Dev: 4433.00 ns
      Min: 126382.20 ns
      Max: 178898.90 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 7480.29 lookups/sec
    Latency per lookup:
      Mean: 133684.74 ns
      Std Dev: 4550.45 ns
      Min: 126219.88 ns
      Max: 183506.96 ns
  Overall Latency Statistics:
    Mean: 133929.64 ns
    Std Dev: 4489.66 ns
    Min: 120556.98 ns
    Max: 184770.18 ns
Run 3/3
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
HeaderLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 86.35s
  Total lookups: 8000000
  End-to-end throughput: 92641.19 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 11603.07 lookups/sec
    Latency per lookup:
      Mean: 86184.07 ns
      Std Dev: 882.95 ns
      Min: 83106.73 ns
      Max: 88987.02 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 11612.18 lookups/sec
    Latency per lookup:
      Mean: 86116.47 ns
      Std Dev: 815.10 ns
      Min: 83858.80 ns
      Max: 88698.31 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 11580.17 lookups/sec
    Latency per lookup:
      Mean: 86354.48 ns
      Std Dev: 843.64 ns
      Min: 81244.65 ns
      Max: 88663.29 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 11606.42 lookups/sec
    Latency per lookup:
      Mean: 86159.21 ns
      Std Dev: 704.75 ns
      Min: 83966.66 ns
      Max: 88103.55 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 11620.03 lookups/sec
    Latency per lookup:
      Mean: 86058.27 ns
      Std Dev: 804.33 ns
      Min: 83817.67 ns
      Max: 88717.32 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 11596.85 lookups/sec
    Latency per lookup:
      Mean: 86230.35 ns
      Std Dev: 817.11 ns
      Min: 83048.02 ns
      Max: 88687.31 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 11616.85 lookups/sec
    Latency per lookup:
      Mean: 86081.89 ns
      Std Dev: 848.77 ns
      Min: 83381.37 ns
      Max: 88371.28 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 11592.48 lookups/sec
    Latency per lookup:
      Mean: 86262.81 ns
      Std Dev: 943.06 ns
      Min: 83737.06 ns
      Max: 89110.74 ns
  Overall Latency Statistics:
    Mean: 86180.94 ns
    Std Dev: 840.05 ns
    Min: 81244.65 ns
    Max: 89110.74 ns
Running multithreaded benchmark with 8 threads, 1000000 lookups per thread in batches of 1000
UniformLookupIndex Multithreaded Results:
  Threads: 8
  End-to-end time: 134.19s
  Total lookups: 8000000
  End-to-end throughput: 59618.68 lookups/sec
  Thread 0 Results:
    Lookups: 1000000
    Throughput: 7503.62 lookups/sec
    Latency per lookup:
      Mean: 133269.06 ns
      Std Dev: 2640.94 ns
      Min: 124406.06 ns
      Max: 142061.35 ns
  Thread 1 Results:
    Lookups: 1000000
    Throughput: 7452.35 lookups/sec
    Latency per lookup:
      Mean: 134185.92 ns
      Std Dev: 2853.70 ns
      Min: 114331.98 ns
      Max: 142422.01 ns
  Thread 2 Results:
    Lookups: 1000000
    Throughput: 7505.46 lookups/sec
    Latency per lookup:
      Mean: 133236.42 ns
      Std Dev: 2594.68 ns
      Min: 124785.89 ns
      Max: 139890.35 ns
  Thread 3 Results:
    Lookups: 1000000
    Throughput: 7508.35 lookups/sec
    Latency per lookup:
      Mean: 133184.97 ns
      Std Dev: 2494.42 ns
      Min: 125146.94 ns
      Max: 141370.76 ns
  Thread 4 Results:
    Lookups: 1000000
    Throughput: 7513.25 lookups/sec
    Latency per lookup:
      Mean: 133098.28 ns
      Std Dev: 2646.27 ns
      Min: 124377.72 ns
      Max: 141162.90 ns
  Thread 5 Results:
    Lookups: 1000000
    Throughput: 7485.52 lookups/sec
    Latency per lookup:
      Mean: 133591.33 ns
      Std Dev: 2840.80 ns
      Min: 122671.01 ns
      Max: 141829.21 ns
  Thread 6 Results:
    Lookups: 1000000
    Throughput: 7498.02 lookups/sec
    Latency per lookup:
      Mean: 133368.61 ns
      Std Dev: 2631.78 ns
      Min: 125674.98 ns
      Max: 141833.78 ns
  Thread 7 Results:
    Lookups: 1000000
    Throughput: 7524.93 lookups/sec
    Latency per lookup:
      Mean: 132891.51 ns
      Std Dev: 2610.16 ns
      Min: 123249.56 ns
      Max: 140385.69 ns
  Overall Latency Statistics:
    Mean: 133353.26 ns
    Std Dev: 2691.71 ns
    Min: 114331.98 ns
    Max: 142422.01 ns
HeaderLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 4032 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 2019766468 }, val_type: Counter, label_pairs: [] } }
HeaderLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 93942472360 }, val_type: Counter, label_pairs: [] } }
Histogram: Histogram { core: HistogramCore { desc: Desc { fq_name: "lookup_iterations", help: "lookup_iterations", const_label_pairs: [], variable_labels: [], id: 2280981954329258229, dim_hash: 2280981954329258229 }, label_pairs: [], collect_lock: Mutex { data: (), poisoned: false, .. }, shard_and_count: ShardAndCount { inner: 24000000 }, shards: [Shard { sum: AtomicF64 { inner: 4721612626340085760 }, count: AtomicU64 { inner: 24000000 }, buckets: [AtomicU64 { inner: 8242357 }, AtomicU64 { inner: 10122859 }, AtomicU64 { inner: 4111109 }, AtomicU64 { inner: 1221577 }, AtomicU64 { inner: 259486 }, AtomicU64 { inner: 38607 }, AtomicU64 { inner: 3707 }, AtomicU64 { inner: 297 }, AtomicU64 { inner: 1 }, AtomicU64 { inner: 0 }] }, Shard { sum: AtomicF64 { inner: 0 }, count: AtomicU64 { inner: 0 }, buckets: [AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }, AtomicU64 { inner: 0 }] }], upper_bounds: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0] } }
UniformLookupIndex: scan mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_scan_mcs", help: "lookup_scan_mcs", const_label_pairs: [], variable_labels: [], id: 914794617080129952, dim_hash: 914794617080129952 }, val: AtomicU64 { inner: 11441 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io mcs GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_mcs", help: "lookup_io_mcs", const_label_pairs: [], variable_labels: [], id: 1936770213637198483, dim_hash: 1936770213637198483 }, val: AtomicU64 { inner: 3169198211 }, val_type: Counter, label_pairs: [] } }
UniformLookupIndex: io bytes GenericCounter { v: Value { desc: Desc { fq_name: "lookup_io_bytes", help: "lookup_io_bytes", const_label_pairs: [], variable_labels: [], id: 16528068844073587369, dim_hash: 16528068844073587369 }, val: AtomicU64 { inner: 189036283000 }, val_type: Counter, label_pairs: [] } }
Benchmark completed at Wed Mar 26 02:16:48 PM UTC 2025
